/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../../common-script/snapp-log-worker.js":
/*!**************************************************!*\
  !*** ../../../common-script/snapp-log-worker.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LOG_WORKER_MESSAGE_TYPE: () => (/* binding */ LOG_WORKER_MESSAGE_TYPE),\n/* harmony export */   LogWorkerMessage: () => (/* binding */ LogWorkerMessage)\n/* harmony export */ });\n/* harmony import */ var _common_script_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/utils */ \"../../../common-script/utils.js\");\n/* harmony import */ var _timed_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timed-task */ \"../../../common-script/timed-task.js\");\n\r\n\r\n\r\nlet oldLogRecoveryTask = new _timed_task__WEBPACK_IMPORTED_MODULE_1__.TimedTask(15000, () => recoveryOldLogs());\r\n\r\nconst requestQueue = [];\r\nconst logFileMaxSize = 50 * 1024 //Max size 50 kB\r\nlet processing = false;\r\nlet currentFileLog = null; \r\nlet logDirectoryHandle = null;\r\nlet snappAPIParams = null;\r\nconst uploadQueue = [];\r\n\r\nconst LOGSTART_LABEL = '{\\\"Logs\\\": ['\r\nconst LOGEND_LABEL = ']}'\r\n\r\n\r\nself.onmessage = async (e) => {\r\n\tif (navigator.storage && navigator.storage.estimate) {\r\n\t\t //Use this queue if you experiment some writing issues on file.\r\n\t\trequestQueue.push(e.data);\r\n\t\tif (!processing) {\r\n\t\t\tprocessing = true;\r\n\t\t\ttry {\r\n\t\t\t\tawait processQueue();\t\t\t\t\r\n\t\t\t} \r\n\t\t\tfinally {\r\n\t\t\t\tprocessing = false;\r\n\t\t\t}\r\n\t\t}\r\n\t} \r\n\telse {\r\n\t\tconsole.error('Local storage is full')\r\n\t}\r\n};\r\n\r\n\r\nasync function processQueue() {\r\n\twhile (requestQueue.length > 0) {\r\n\t\tconst request = requestQueue.shift();\r\n\t\tawait handleRequest(request);\r\n\t}\r\n}\r\n\r\nfunction createLogFileName(sequence) {\r\n\tlet currentDate = new Date();\r\n\tlet currentYear = currentDate.getFullYear();\r\n\tlet currentMonth = currentDate.getMonth() + 1;\r\n\tlet currentDay = currentDate.getDate();\r\n\tlet currentHour = currentDate.getHours();\r\n\tlet currentMin = currentDate.getMinutes();\r\n\t\r\n\treturn 'log_' + currentYear + currentMonth.toString().padStart(2, '0') + \r\n\t\t\t\t\t\t\t\t\tcurrentDay.toString().padStart(2, '0') +\r\n\t\t\t\t\t\t\t\t\tcurrentHour.toString().padStart(2, '0') +\r\n\t\t\t\t\t\t\t\t\tcurrentMin.toString().padStart(2, '0') +\r\n\t\t\t\t\t\t\t\t\t'_' +\r\n\t\t\t\t\t\t\t\t\tsequence + \r\n\t\t\t\t\t\t\t\t\t'_' +\r\n\t\t\t\t\t\t\t\t\t_common_script_utils__WEBPACK_IMPORTED_MODULE_0__.Utils.createUUID() +\r\n\t\t\t\t\t\t\t\t\t'_tmp.txt'\r\n}\r\n\r\n\r\n\r\nasync function createNewFileLogger(fileName) {\r\n\tlet logFileName = null;\r\n\tif (fileName == null)\t\r\n\t logFileName = createLogFileName(0);\r\n\telse\r\n\t\tlogFileName = fileName;\r\n\tlet logFileHandle =  await logDirectoryHandle.getFileHandle(logFileName, {create: true,});\r\n\tlet logFileAccessHandle = await logFileHandle.createSyncAccessHandle();\r\n\treturn new FileLogger(logFileName, logFileHandle, logFileAccessHandle)\r\n}\r\n\r\nasync function isOverSize(logFileHandle) {\r\n\treturn (await logFileHandle.getFile()).size >= logFileMaxSize;\r\n}\r\n\r\nasync function rollLogFileIfNeeded(logFileName, logFileHandle, logFileAccessHandle) {\t\r\n\tlet rolledLogFileName = null;\r\n\tlet rolledLogFileHandle = null;\r\n\tlet rolledLogFileAccessHandle = null;\r\n\t\t\t\r\n\tif (logFileName == null || !isInTheSameMinute(logFileName)) { //If is invalid\r\n\t\tif (logFileName != null && currentFileLog != null && currentFileLog.getLogFileName() == logFileName)\r\n\t\t\tawait closeFileLogger(currentFileLog.getLogFileName(), currentFileLog.getLogFileAccessHandle());\r\n\t\treturn await createNewFileLogger();\r\n\t} \r\n\telse {\r\n\t\tif (logFileHandle == null)\r\n\t\t\tlogFileHandle = await logDirectoryHandle.getFileHandle(logFileName, {create: true,});\r\n\t\t\r\n\t\tif (await isOverSize(logFileHandle)) { //If size exceed max\r\n\t\t\tlet sequenceNumber = logFileName.split('_')[2]; //extract sequence number\r\n\t\t \tlet newSequenceNumber = parseInt(sequenceNumber) + 1;\r\n\t\t \trolledLogFileName = createLogFileName(newSequenceNumber);\r\n\t\t} else {\r\n\t\t\trolledLogFileName = logFileName;\r\n\t\t}\t\r\n\t\t\r\n\t\tif (rolledLogFileName != logFileName) {\r\n\t\t\tif (logFileAccessHandle != null) {\r\n\t\t\t\tawait closeFileLogger(logFileName, logFileAccessHandle);\r\n\t\t\t}\r\n\t\t\treturn await createNewFileLogger(rolledLogFileName);\r\n\t\t}\telse {\r\n\t\t\trolledLogFileName = logFileName;\r\n\t\t\trolledLogFileHandle = logFileHandle;\r\n\t\t\t\r\n\t\t\tif (logFileAccessHandle == null)\r\n\t\t\t\trolledLogFileAccessHandle = await rolledLogFileHandle.createSyncAccessHandle();\r\n\t\t\telse\r\n\t\t\t\trolledLogFileAccessHandle = logFileAccessHandle;\r\n\t\t}\r\n\t}\r\n\treturn new FileLogger(rolledLogFileName, rolledLogFileHandle, rolledLogFileAccessHandle)\r\n}\r\n\r\nasync function tryToUseFileLogOnFileSystem() {\r\n\tlet logFileName = null;\r\n\tlet fileNameList = await getLogFileList(logDirectoryHandle); //list files in log directory\r\n\tfileNameList.sort();\r\n\tlogFileName = fileNameList[fileNameList.length - 1];\r\n\treturn  await rollLogFileIfNeeded(logFileName, null, null);\r\n}\r\n\r\nfunction parseDateFromLogFileName(logFileName) {\r\n\tlet logFileDate = logFileName.split('_')[1]\r\n\tlet logYear = logFileDate.substring(0, 4);\r\n\tlet logMonth = logFileDate.substring(4, 6);\r\n\tlet logDay = logFileDate.substring(6, 8);\r\n\tlet logHour = logFileDate.substring(8, 10);\r\n\tlet logMinute = logFileDate.substring(10, 12);\r\n\treturn new Date(logYear, logMonth -1, logDay, logHour, logMinute, 0, 0);\r\n}\r\n\r\nfunction parseUUIDFromLogFileName(logFileName) {\r\n\treturn logFileName.split('_')[3];\r\n}\r\n\r\nfunction isAnOldLog(logFileName) {\r\n\tlet dateNow = new Date();\r\n\tdateNow.setSeconds(0);\r\n\tdateNow.setMilliseconds(0);\r\n\tlet parsedDate = parseDateFromLogFileName(logFileName);\r\n\tlet diff = dateNow - parsedDate;\r\n\treturn diff > 60 * 1000 ;\r\n}\r\n\r\nasync function recoveryOldLogs() {\r\n\tconsole.log('--- recoveryOldLogs start');\r\n\tlet fileNameList = await getLogFileList(logDirectoryHandle); //list files in log directory\r\n\tfor (let logFileName of fileNameList) {\r\n\t\tif (!uploadQueue.includes(logFileName) && isAnOldLog(logFileName)) {\r\n\t\t\ttry {\r\n\t\t\t\tif (currentFileLog != null && currentFileLog.getLogFileName() == logFileName) //current log file is expired without logs\r\n\t\t\t\t\tawait closeFileLogger(currentFileLog.getLogFileName(), currentFileLog.getLogFileAccessHandle());\r\n\t\t\t\tawait writeLogEndIfNeeded(logFileName);\r\n\t\t\t\taddToUploadQueue(logFileName);\t\t\t\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(error)\r\n\t\t\t}\r\n\t\t\tconsole.log('--- recoverying' + logFileName);\r\n\t\t}\r\n\t}\r\n\tprocessUploadQueue();\r\n\tconsole.log('--- recoveryOldLogs end');\r\n}\r\n\r\nasync function tryToUseCurrentFileLogger() {\r\n\tlet logFileName = currentFileLog.getLogFileName();\r\n\tlet logFileHandle = currentFileLog.getLogFileHandle();\r\n\tlet logFileAccessHandle = currentFileLog.getLogFileAccessHandle();\r\n\treturn await rollLogFileIfNeeded(logFileName, logFileHandle, logFileAccessHandle);\r\n}\r\n\r\nasync function initFileLogger() {\r\n\tlet rootDirectory = await navigator.storage.getDirectory();\r\n\tlogDirectoryHandle = await rootDirectory.getDirectoryHandle('kioskJSLogs', {create: true,});\r\n\treturn await tryToUseFileLogOnFileSystem();\r\n}\r\n\r\nasync function closeFileLogger(fileName, fileAccessHandle) {\r\n\tif (fileAccessHandle != null) {\r\n\t\ttry {\r\n\t\t\tawait fileAccessHandle.flush();\r\n\t\t\tawait writeLogEnd(fileAccessHandle); \r\n\t\t\tawait fileAccessHandle.flush();\r\n\t\t\tawait fileAccessHandle.close();\r\n\t\t\taddToUploadQueue(fileName);\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log('File is already closed. It may be recovery task has already closed it');\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nasync function configureFileLogger() {\t\r\n\tif (currentFileLog == null) {\r\n\t\tcurrentFileLog = await initFileLogger();\r\n\t\toldLogRecoveryTask.startWithImmediateExecution();\r\n\t}\r\n\telse  // Use last log\r\n\t\tcurrentFileLog = await tryToUseCurrentFileLogger();\r\n}\r\n\r\nasync function getLogFileList(logDirectoryHandle) {\r\n\tlet fileNames = [];\r\n\tfor await (const entry of logDirectoryHandle.values()) {\r\n\t\tif (entry.kind === 'file') {\r\n\t\t\tfileNames.push(entry.name);\r\n\t\t}\r\n\t}\r\n\treturn fileNames;\r\n}\r\n\r\nfunction isInTheSameMinute(logFileName) {\r\n\tlet result = false\r\n\tif (logFileName != null) {\r\n\t\tlet dateNow = new Date();\r\n\t\tdateNow.setSeconds(0);\r\n\t\tdateNow.setMilliseconds(0);\r\n\t\tlet parsedDate = parseDateFromLogFileName(logFileName);\r\n\t\tresult = (dateNow - parsedDate == 0);\r\n\t}\r\n\treturn result;\r\n}\r\n\r\n\r\nasync function writeLogStart(logFileAccessHandle) {\r\n\tlet data = new TextEncoder().encode(LOGSTART_LABEL + '\\n');\r\n\tawait logFileAccessHandle.write(data);\r\n\treturn await logFileAccessHandle.flush();\r\n}\r\n\r\nasync function writeLogEnd(logFileAccessHandle) {\r\n\tlet fileSize = await logFileAccessHandle.getSize();\r\n\tlet data = new TextEncoder().encode('\\n' + LOGEND_LABEL);\r\n\tawait logFileAccessHandle.write(data, { at: fileSize - 2 });\r\n\treturn await logFileAccessHandle.flush();\r\n}\r\n\r\nasync function writeOnLogFile(logFileAccessHandle, request) {\r\n\tlet result = false;\r\n\tlet fileSize = await logFileAccessHandle.getSize();\r\n\tif (fileSize == 0) {\r\n\t\tawait writeLogStart(logFileAccessHandle);\r\n\t}\r\n\tfileSize = await logFileAccessHandle.getSize();\r\n\tlet rawText = request + ',' + '\\n';\r\n\tlet data = new TextEncoder().encode(rawText);\r\n\tresult = await logFileAccessHandle.write(data, { at: fileSize });\r\n\t//console.log(\"File size:\" + fileSize);\r\n\tresult = await logFileAccessHandle.flush();\r\n\treturn result;\r\n}\r\n\r\nasync function handleRequest(request) {\r\n\tlet result = false;\r\n\tswitch(request.type) {\r\n\t\tcase LOG_WORKER_MESSAGE_TYPE.LOG: {\r\n\t\t\tresult = await handleLog(request.payload);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\tcase LOG_WORKER_MESSAGE_TYPE.CONFIG_PARAMS: {\r\n\t\t\tconfigureSnappAPI(request.payload);\r\n\t\t\tbreak;\t\t\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nasync function handleLog(request) {\r\n\tawait configureFileLogger();\r\n\tlet currentLogFileAccessHandle = currentFileLog.getLogFileAccessHandle();\r\n\treturn await writeOnLogFile(currentLogFileAccessHandle, JSON.stringify(request));\r\n}\r\n\r\nfunction configureSnappAPI(params) {\r\n\tsnappAPIParams = params;\r\n}\r\n\r\nasync function writeLogEndIfNeeded(fileName) {\r\n\tlet logFileHandle = await logDirectoryHandle.getFileHandle(fileName, {create: false,});\r\n\tlet file = await logFileHandle.getFile();\r\n\tlet start = file.size - 2 < 0 ? 0 : file.size - 2;\r\n\tconst blob = file.slice(start);\r\n\tconst text = await blob.text();\r\n\t\r\n\tif (text != LOGEND_LABEL) {\r\n\t\tlet logFileAccessHandle = await logFileHandle.createSyncAccessHandle();\r\n\t\tawait writeLogEnd(logFileAccessHandle);\r\n\t\tawait logFileAccessHandle.close();\r\n\t}\r\n}\r\n\r\nasync function addToUploadQueue(logFileName) {\r\n\tif (!uploadQueue.includes(logFileName))\r\n\t\tuploadQueue.push(logFileName);\r\n}\r\n\r\nfunction getUploadRequest(logFileName, base64Logs) {\r\n\tlet result = {\r\n\t\t'Header': {\r\n\t\t\t'WorkstationId': snappAPIParams.workstationId,\r\n\t\t\t'UserAccountId': snappAPIParams.userId,\r\n\t\t\t'Token': snappAPIParams.token\r\n\t\t},\r\n\t\t'Request': {\r\n\t\t\t'Command': 'ADD',\r\n\t\t\t'Add': {\r\n\t\t\t\t'UploadId':parseUUIDFromLogFileName(logFileName),\r\n\t\t\t\t'UploadType': 4,\r\n\t\t\t\t'MsgRequest': base64Logs\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn result;\r\n}\r\n\r\n//https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch\r\nasync function uploadLogFile(logFileName) {\r\n\tlet logFileHandle = await logDirectoryHandle.getFileHandle(logFileName, {create: true,});\r\n\tlet file = await logFileHandle.getFile();\r\n\tlet logs = await file.text()\r\n\tlet base64Logs = await _common_script_utils__WEBPACK_IMPORTED_MODULE_0__.Utils.encodeBase64URLEncoded(logs);\r\n\t  \r\n\tconst urlEncodedBody = new URLSearchParams({\r\n\t\tmessage: JSON.stringify(getUploadRequest(logFileName, base64Logs))\r\n\t});\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\t    // Perform the API call using fetch or any other suitable method\r\n\t    fetch(snappAPIParams.apiUrl + '/service?cmd=UPLOAD&format=json', {\r\n\t      method: 'POST',\r\n\t      headers: {\r\n\t        'Content-Type': 'application/x-www-form-urlencoded'\r\n\t      },\r\n\t      body: urlEncodedBody\r\n\t    })\r\n\t    .then(response => {\r\n\t        if (response.ok) {\r\n\t          // Resolve the Promise with the response data\r\n\t          resolve(response.json());\r\n\t          \r\n\t          logFileHandle.remove(); //Remove if upload succeded\r\n\t        } else {\r\n\t\t\t\t\t\tconsole.error(error);\r\n\t          // Reject the Promise with an error message\r\n\t          reject('API call failed with status: ' + response.status);\r\n\t        }\r\n\t      })\r\n\t      .catch(error => {\r\n\t      \tconsole.error(error);\r\n\t        reject(error);\r\n\t      });\r\n  });\r\n}\r\n\r\nasync function processUploadQueue() {\r\n\twhile (uploadQueue.length > 0) {\r\n\t\ttry {\r\n\t\t\tlet uploadFile = uploadQueue.shift();\r\n\t\t\tawait uploadLogFile(uploadFile);\t\t\t\r\n\t\t} catch(e) {\r\n\t\t\tconsole.error(e);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nclass FileLogger {\r\n\t#logFileName;\r\n\t#logFileHandle;\r\n\t#logFileAccessHandle;\r\n\t\r\n\tconstructor(logFileName, logFileHandle, logFileAccessHandle) {\r\n\t   this.#logFileName = logFileName;\r\n\t   this.#logFileHandle = logFileHandle;\r\n\t   this.#logFileAccessHandle = logFileAccessHandle;\r\n\t}\r\n\t\r\n\tgetLogFileName() {\r\n\t\treturn this.#logFileName;\r\n\t}\r\n\t\r\n\tgetLogFileHandle() {\r\n\t\treturn this.#logFileHandle;\r\n\t}\r\n\t\r\n\tgetLogFileAccessHandle() {\r\n\t\treturn this.#logFileAccessHandle;\r\n\t}\r\n}\r\n\r\n\r\nclass LogWorkerMessage {\r\n\ttype;\r\n\tpayload;\r\n\t\r\n\tconstructor(type, payload) {\r\n\t\tthis.type = type;\r\n\t\tthis.payload = payload;\r\n\t}\r\n}\r\n\r\nconst LOG_WORKER_MESSAGE_TYPE = {\r\n\tLOG: 1,\r\n\tCONFIG_PARAMS: 2\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vY29tbW9uLXNjcmlwdC9zbmFwcC1sb2ctd29ya2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNkM7QUFDSjtBQUN6QztBQUNBLDZCQUE2QixrREFBUztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHVEQUFLO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSxjQUFjO0FBQ3pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxjQUFjO0FBQ3RGO0FBQ0EseUNBQXlDO0FBQ3pDLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLGNBQWM7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGtCQUFrQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsY0FBYztBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1RUFBdUUsZUFBZTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsY0FBYztBQUN4RjtBQUNBO0FBQ0Esd0JBQXdCLHVEQUFLO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2tpb3NrLWNvbnRyb2xsZXIvLi4vLi4vLi4vY29tbW9uLXNjcmlwdC9zbmFwcC1sb2ctd29ya2VyLmpzPzVhZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbHMgfSBmcm9tICdAY29tbW9uLXNjcmlwdC91dGlscyc7XHJcbmltcG9ydCB7IFRpbWVkVGFzayB9IGZyb20gXCIuL3RpbWVkLXRhc2tcIjtcclxuXHJcbmxldCBvbGRMb2dSZWNvdmVyeVRhc2sgPSBuZXcgVGltZWRUYXNrKDE1MDAwLCAoKSA9PiByZWNvdmVyeU9sZExvZ3MoKSk7XHJcblxyXG5jb25zdCByZXF1ZXN0UXVldWUgPSBbXTtcclxuY29uc3QgbG9nRmlsZU1heFNpemUgPSA1MCAqIDEwMjQgLy9NYXggc2l6ZSA1MCBrQlxyXG5sZXQgcHJvY2Vzc2luZyA9IGZhbHNlO1xyXG5sZXQgY3VycmVudEZpbGVMb2cgPSBudWxsOyBcclxubGV0IGxvZ0RpcmVjdG9yeUhhbmRsZSA9IG51bGw7XHJcbmxldCBzbmFwcEFQSVBhcmFtcyA9IG51bGw7XHJcbmNvbnN0IHVwbG9hZFF1ZXVlID0gW107XHJcblxyXG5jb25zdCBMT0dTVEFSVF9MQUJFTCA9ICd7XFxcIkxvZ3NcXFwiOiBbJ1xyXG5jb25zdCBMT0dFTkRfTEFCRUwgPSAnXX0nXHJcblxyXG5cclxuc2VsZi5vbm1lc3NhZ2UgPSBhc3luYyAoZSkgPT4ge1xyXG5cdGlmIChuYXZpZ2F0b3Iuc3RvcmFnZSAmJiBuYXZpZ2F0b3Iuc3RvcmFnZS5lc3RpbWF0ZSkge1xyXG5cdFx0IC8vVXNlIHRoaXMgcXVldWUgaWYgeW91IGV4cGVyaW1lbnQgc29tZSB3cml0aW5nIGlzc3VlcyBvbiBmaWxlLlxyXG5cdFx0cmVxdWVzdFF1ZXVlLnB1c2goZS5kYXRhKTtcclxuXHRcdGlmICghcHJvY2Vzc2luZykge1xyXG5cdFx0XHRwcm9jZXNzaW5nID0gdHJ1ZTtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRhd2FpdCBwcm9jZXNzUXVldWUoKTtcdFx0XHRcdFxyXG5cdFx0XHR9IFxyXG5cdFx0XHRmaW5hbGx5IHtcclxuXHRcdFx0XHRwcm9jZXNzaW5nID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IFxyXG5cdGVsc2Uge1xyXG5cdFx0Y29uc29sZS5lcnJvcignTG9jYWwgc3RvcmFnZSBpcyBmdWxsJylcclxuXHR9XHJcbn07XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc1F1ZXVlKCkge1xyXG5cdHdoaWxlIChyZXF1ZXN0UXVldWUubGVuZ3RoID4gMCkge1xyXG5cdFx0Y29uc3QgcmVxdWVzdCA9IHJlcXVlc3RRdWV1ZS5zaGlmdCgpO1xyXG5cdFx0YXdhaXQgaGFuZGxlUmVxdWVzdChyZXF1ZXN0KTtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxvZ0ZpbGVOYW1lKHNlcXVlbmNlKSB7XHJcblx0bGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKTtcclxuXHRsZXQgY3VycmVudFllYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cdGxldCBjdXJyZW50TW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMTtcclxuXHRsZXQgY3VycmVudERheSA9IGN1cnJlbnREYXRlLmdldERhdGUoKTtcclxuXHRsZXQgY3VycmVudEhvdXIgPSBjdXJyZW50RGF0ZS5nZXRIb3VycygpO1xyXG5cdGxldCBjdXJyZW50TWluID0gY3VycmVudERhdGUuZ2V0TWludXRlcygpO1xyXG5cdFxyXG5cdHJldHVybiAnbG9nXycgKyBjdXJyZW50WWVhciArIGN1cnJlbnRNb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyBcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudERheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50SG91ci50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50TWluLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCdfJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdHNlcXVlbmNlICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdCdfJyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFV0aWxzLmNyZWF0ZVVVSUQoKSArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCdfdG1wLnR4dCdcclxufVxyXG5cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVOZXdGaWxlTG9nZ2VyKGZpbGVOYW1lKSB7XHJcblx0bGV0IGxvZ0ZpbGVOYW1lID0gbnVsbDtcclxuXHRpZiAoZmlsZU5hbWUgPT0gbnVsbClcdFxyXG5cdCBsb2dGaWxlTmFtZSA9IGNyZWF0ZUxvZ0ZpbGVOYW1lKDApO1xyXG5cdGVsc2VcclxuXHRcdGxvZ0ZpbGVOYW1lID0gZmlsZU5hbWU7XHJcblx0bGV0IGxvZ0ZpbGVIYW5kbGUgPSAgYXdhaXQgbG9nRGlyZWN0b3J5SGFuZGxlLmdldEZpbGVIYW5kbGUobG9nRmlsZU5hbWUsIHtjcmVhdGU6IHRydWUsfSk7XHJcblx0bGV0IGxvZ0ZpbGVBY2Nlc3NIYW5kbGUgPSBhd2FpdCBsb2dGaWxlSGFuZGxlLmNyZWF0ZVN5bmNBY2Nlc3NIYW5kbGUoKTtcclxuXHRyZXR1cm4gbmV3IEZpbGVMb2dnZXIobG9nRmlsZU5hbWUsIGxvZ0ZpbGVIYW5kbGUsIGxvZ0ZpbGVBY2Nlc3NIYW5kbGUpXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGlzT3ZlclNpemUobG9nRmlsZUhhbmRsZSkge1xyXG5cdHJldHVybiAoYXdhaXQgbG9nRmlsZUhhbmRsZS5nZXRGaWxlKCkpLnNpemUgPj0gbG9nRmlsZU1heFNpemU7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJvbGxMb2dGaWxlSWZOZWVkZWQobG9nRmlsZU5hbWUsIGxvZ0ZpbGVIYW5kbGUsIGxvZ0ZpbGVBY2Nlc3NIYW5kbGUpIHtcdFxyXG5cdGxldCByb2xsZWRMb2dGaWxlTmFtZSA9IG51bGw7XHJcblx0bGV0IHJvbGxlZExvZ0ZpbGVIYW5kbGUgPSBudWxsO1xyXG5cdGxldCByb2xsZWRMb2dGaWxlQWNjZXNzSGFuZGxlID0gbnVsbDtcclxuXHRcdFx0XHJcblx0aWYgKGxvZ0ZpbGVOYW1lID09IG51bGwgfHwgIWlzSW5UaGVTYW1lTWludXRlKGxvZ0ZpbGVOYW1lKSkgeyAvL0lmIGlzIGludmFsaWRcclxuXHRcdGlmIChsb2dGaWxlTmFtZSAhPSBudWxsICYmIGN1cnJlbnRGaWxlTG9nICE9IG51bGwgJiYgY3VycmVudEZpbGVMb2cuZ2V0TG9nRmlsZU5hbWUoKSA9PSBsb2dGaWxlTmFtZSlcclxuXHRcdFx0YXdhaXQgY2xvc2VGaWxlTG9nZ2VyKGN1cnJlbnRGaWxlTG9nLmdldExvZ0ZpbGVOYW1lKCksIGN1cnJlbnRGaWxlTG9nLmdldExvZ0ZpbGVBY2Nlc3NIYW5kbGUoKSk7XHJcblx0XHRyZXR1cm4gYXdhaXQgY3JlYXRlTmV3RmlsZUxvZ2dlcigpO1xyXG5cdH0gXHJcblx0ZWxzZSB7XHJcblx0XHRpZiAobG9nRmlsZUhhbmRsZSA9PSBudWxsKVxyXG5cdFx0XHRsb2dGaWxlSGFuZGxlID0gYXdhaXQgbG9nRGlyZWN0b3J5SGFuZGxlLmdldEZpbGVIYW5kbGUobG9nRmlsZU5hbWUsIHtjcmVhdGU6IHRydWUsfSk7XHJcblx0XHRcclxuXHRcdGlmIChhd2FpdCBpc092ZXJTaXplKGxvZ0ZpbGVIYW5kbGUpKSB7IC8vSWYgc2l6ZSBleGNlZWQgbWF4XHJcblx0XHRcdGxldCBzZXF1ZW5jZU51bWJlciA9IGxvZ0ZpbGVOYW1lLnNwbGl0KCdfJylbMl07IC8vZXh0cmFjdCBzZXF1ZW5jZSBudW1iZXJcclxuXHRcdCBcdGxldCBuZXdTZXF1ZW5jZU51bWJlciA9IHBhcnNlSW50KHNlcXVlbmNlTnVtYmVyKSArIDE7XHJcblx0XHQgXHRyb2xsZWRMb2dGaWxlTmFtZSA9IGNyZWF0ZUxvZ0ZpbGVOYW1lKG5ld1NlcXVlbmNlTnVtYmVyKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJvbGxlZExvZ0ZpbGVOYW1lID0gbG9nRmlsZU5hbWU7XHJcblx0XHR9XHRcclxuXHRcdFxyXG5cdFx0aWYgKHJvbGxlZExvZ0ZpbGVOYW1lICE9IGxvZ0ZpbGVOYW1lKSB7XHJcblx0XHRcdGlmIChsb2dGaWxlQWNjZXNzSGFuZGxlICE9IG51bGwpIHtcclxuXHRcdFx0XHRhd2FpdCBjbG9zZUZpbGVMb2dnZXIobG9nRmlsZU5hbWUsIGxvZ0ZpbGVBY2Nlc3NIYW5kbGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBhd2FpdCBjcmVhdGVOZXdGaWxlTG9nZ2VyKHJvbGxlZExvZ0ZpbGVOYW1lKTtcclxuXHRcdH1cdGVsc2Uge1xyXG5cdFx0XHRyb2xsZWRMb2dGaWxlTmFtZSA9IGxvZ0ZpbGVOYW1lO1xyXG5cdFx0XHRyb2xsZWRMb2dGaWxlSGFuZGxlID0gbG9nRmlsZUhhbmRsZTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChsb2dGaWxlQWNjZXNzSGFuZGxlID09IG51bGwpXHJcblx0XHRcdFx0cm9sbGVkTG9nRmlsZUFjY2Vzc0hhbmRsZSA9IGF3YWl0IHJvbGxlZExvZ0ZpbGVIYW5kbGUuY3JlYXRlU3luY0FjY2Vzc0hhbmRsZSgpO1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cm9sbGVkTG9nRmlsZUFjY2Vzc0hhbmRsZSA9IGxvZ0ZpbGVBY2Nlc3NIYW5kbGU7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBuZXcgRmlsZUxvZ2dlcihyb2xsZWRMb2dGaWxlTmFtZSwgcm9sbGVkTG9nRmlsZUhhbmRsZSwgcm9sbGVkTG9nRmlsZUFjY2Vzc0hhbmRsZSlcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdHJ5VG9Vc2VGaWxlTG9nT25GaWxlU3lzdGVtKCkge1xyXG5cdGxldCBsb2dGaWxlTmFtZSA9IG51bGw7XHJcblx0bGV0IGZpbGVOYW1lTGlzdCA9IGF3YWl0IGdldExvZ0ZpbGVMaXN0KGxvZ0RpcmVjdG9yeUhhbmRsZSk7IC8vbGlzdCBmaWxlcyBpbiBsb2cgZGlyZWN0b3J5XHJcblx0ZmlsZU5hbWVMaXN0LnNvcnQoKTtcclxuXHRsb2dGaWxlTmFtZSA9IGZpbGVOYW1lTGlzdFtmaWxlTmFtZUxpc3QubGVuZ3RoIC0gMV07XHJcblx0cmV0dXJuICBhd2FpdCByb2xsTG9nRmlsZUlmTmVlZGVkKGxvZ0ZpbGVOYW1lLCBudWxsLCBudWxsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VEYXRlRnJvbUxvZ0ZpbGVOYW1lKGxvZ0ZpbGVOYW1lKSB7XHJcblx0bGV0IGxvZ0ZpbGVEYXRlID0gbG9nRmlsZU5hbWUuc3BsaXQoJ18nKVsxXVxyXG5cdGxldCBsb2dZZWFyID0gbG9nRmlsZURhdGUuc3Vic3RyaW5nKDAsIDQpO1xyXG5cdGxldCBsb2dNb250aCA9IGxvZ0ZpbGVEYXRlLnN1YnN0cmluZyg0LCA2KTtcclxuXHRsZXQgbG9nRGF5ID0gbG9nRmlsZURhdGUuc3Vic3RyaW5nKDYsIDgpO1xyXG5cdGxldCBsb2dIb3VyID0gbG9nRmlsZURhdGUuc3Vic3RyaW5nKDgsIDEwKTtcclxuXHRsZXQgbG9nTWludXRlID0gbG9nRmlsZURhdGUuc3Vic3RyaW5nKDEwLCAxMik7XHJcblx0cmV0dXJuIG5ldyBEYXRlKGxvZ1llYXIsIGxvZ01vbnRoIC0xLCBsb2dEYXksIGxvZ0hvdXIsIGxvZ01pbnV0ZSwgMCwgMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlVVVJREZyb21Mb2dGaWxlTmFtZShsb2dGaWxlTmFtZSkge1xyXG5cdHJldHVybiBsb2dGaWxlTmFtZS5zcGxpdCgnXycpWzNdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0FuT2xkTG9nKGxvZ0ZpbGVOYW1lKSB7XHJcblx0bGV0IGRhdGVOb3cgPSBuZXcgRGF0ZSgpO1xyXG5cdGRhdGVOb3cuc2V0U2Vjb25kcygwKTtcclxuXHRkYXRlTm93LnNldE1pbGxpc2Vjb25kcygwKTtcclxuXHRsZXQgcGFyc2VkRGF0ZSA9IHBhcnNlRGF0ZUZyb21Mb2dGaWxlTmFtZShsb2dGaWxlTmFtZSk7XHJcblx0bGV0IGRpZmYgPSBkYXRlTm93IC0gcGFyc2VkRGF0ZTtcclxuXHRyZXR1cm4gZGlmZiA+IDYwICogMTAwMCA7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlY292ZXJ5T2xkTG9ncygpIHtcclxuXHRjb25zb2xlLmxvZygnLS0tIHJlY292ZXJ5T2xkTG9ncyBzdGFydCcpO1xyXG5cdGxldCBmaWxlTmFtZUxpc3QgPSBhd2FpdCBnZXRMb2dGaWxlTGlzdChsb2dEaXJlY3RvcnlIYW5kbGUpOyAvL2xpc3QgZmlsZXMgaW4gbG9nIGRpcmVjdG9yeVxyXG5cdGZvciAobGV0IGxvZ0ZpbGVOYW1lIG9mIGZpbGVOYW1lTGlzdCkge1xyXG5cdFx0aWYgKCF1cGxvYWRRdWV1ZS5pbmNsdWRlcyhsb2dGaWxlTmFtZSkgJiYgaXNBbk9sZExvZyhsb2dGaWxlTmFtZSkpIHtcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoY3VycmVudEZpbGVMb2cgIT0gbnVsbCAmJiBjdXJyZW50RmlsZUxvZy5nZXRMb2dGaWxlTmFtZSgpID09IGxvZ0ZpbGVOYW1lKSAvL2N1cnJlbnQgbG9nIGZpbGUgaXMgZXhwaXJlZCB3aXRob3V0IGxvZ3NcclxuXHRcdFx0XHRcdGF3YWl0IGNsb3NlRmlsZUxvZ2dlcihjdXJyZW50RmlsZUxvZy5nZXRMb2dGaWxlTmFtZSgpLCBjdXJyZW50RmlsZUxvZy5nZXRMb2dGaWxlQWNjZXNzSGFuZGxlKCkpO1xyXG5cdFx0XHRcdGF3YWl0IHdyaXRlTG9nRW5kSWZOZWVkZWQobG9nRmlsZU5hbWUpO1xyXG5cdFx0XHRcdGFkZFRvVXBsb2FkUXVldWUobG9nRmlsZU5hbWUpO1x0XHRcdFx0XHJcblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcilcclxuXHRcdFx0fVxyXG5cdFx0XHRjb25zb2xlLmxvZygnLS0tIHJlY292ZXJ5aW5nJyArIGxvZ0ZpbGVOYW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cHJvY2Vzc1VwbG9hZFF1ZXVlKCk7XHJcblx0Y29uc29sZS5sb2coJy0tLSByZWNvdmVyeU9sZExvZ3MgZW5kJyk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHRyeVRvVXNlQ3VycmVudEZpbGVMb2dnZXIoKSB7XHJcblx0bGV0IGxvZ0ZpbGVOYW1lID0gY3VycmVudEZpbGVMb2cuZ2V0TG9nRmlsZU5hbWUoKTtcclxuXHRsZXQgbG9nRmlsZUhhbmRsZSA9IGN1cnJlbnRGaWxlTG9nLmdldExvZ0ZpbGVIYW5kbGUoKTtcclxuXHRsZXQgbG9nRmlsZUFjY2Vzc0hhbmRsZSA9IGN1cnJlbnRGaWxlTG9nLmdldExvZ0ZpbGVBY2Nlc3NIYW5kbGUoKTtcclxuXHRyZXR1cm4gYXdhaXQgcm9sbExvZ0ZpbGVJZk5lZWRlZChsb2dGaWxlTmFtZSwgbG9nRmlsZUhhbmRsZSwgbG9nRmlsZUFjY2Vzc0hhbmRsZSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGluaXRGaWxlTG9nZ2VyKCkge1xyXG5cdGxldCByb290RGlyZWN0b3J5ID0gYXdhaXQgbmF2aWdhdG9yLnN0b3JhZ2UuZ2V0RGlyZWN0b3J5KCk7XHJcblx0bG9nRGlyZWN0b3J5SGFuZGxlID0gYXdhaXQgcm9vdERpcmVjdG9yeS5nZXREaXJlY3RvcnlIYW5kbGUoJ2tpb3NrSlNMb2dzJywge2NyZWF0ZTogdHJ1ZSx9KTtcclxuXHRyZXR1cm4gYXdhaXQgdHJ5VG9Vc2VGaWxlTG9nT25GaWxlU3lzdGVtKCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGNsb3NlRmlsZUxvZ2dlcihmaWxlTmFtZSwgZmlsZUFjY2Vzc0hhbmRsZSkge1xyXG5cdGlmIChmaWxlQWNjZXNzSGFuZGxlICE9IG51bGwpIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGF3YWl0IGZpbGVBY2Nlc3NIYW5kbGUuZmx1c2goKTtcclxuXHRcdFx0YXdhaXQgd3JpdGVMb2dFbmQoZmlsZUFjY2Vzc0hhbmRsZSk7IFxyXG5cdFx0XHRhd2FpdCBmaWxlQWNjZXNzSGFuZGxlLmZsdXNoKCk7XHJcblx0XHRcdGF3YWl0IGZpbGVBY2Nlc3NIYW5kbGUuY2xvc2UoKTtcclxuXHRcdFx0YWRkVG9VcGxvYWRRdWV1ZShmaWxlTmFtZSk7XHRcdFx0XHJcblx0XHR9IGNhdGNoIChlcnJvcikge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnRmlsZSBpcyBhbHJlYWR5IGNsb3NlZC4gSXQgbWF5IGJlIHJlY292ZXJ5IHRhc2sgaGFzIGFscmVhZHkgY2xvc2VkIGl0Jyk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY29uZmlndXJlRmlsZUxvZ2dlcigpIHtcdFxyXG5cdGlmIChjdXJyZW50RmlsZUxvZyA9PSBudWxsKSB7XHJcblx0XHRjdXJyZW50RmlsZUxvZyA9IGF3YWl0IGluaXRGaWxlTG9nZ2VyKCk7XHJcblx0XHRvbGRMb2dSZWNvdmVyeVRhc2suc3RhcnRXaXRoSW1tZWRpYXRlRXhlY3V0aW9uKCk7XHJcblx0fVxyXG5cdGVsc2UgIC8vIFVzZSBsYXN0IGxvZ1xyXG5cdFx0Y3VycmVudEZpbGVMb2cgPSBhd2FpdCB0cnlUb1VzZUN1cnJlbnRGaWxlTG9nZ2VyKCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdldExvZ0ZpbGVMaXN0KGxvZ0RpcmVjdG9yeUhhbmRsZSkge1xyXG5cdGxldCBmaWxlTmFtZXMgPSBbXTtcclxuXHRmb3IgYXdhaXQgKGNvbnN0IGVudHJ5IG9mIGxvZ0RpcmVjdG9yeUhhbmRsZS52YWx1ZXMoKSkge1xyXG5cdFx0aWYgKGVudHJ5LmtpbmQgPT09ICdmaWxlJykge1xyXG5cdFx0XHRmaWxlTmFtZXMucHVzaChlbnRyeS5uYW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZpbGVOYW1lcztcclxufVxyXG5cclxuZnVuY3Rpb24gaXNJblRoZVNhbWVNaW51dGUobG9nRmlsZU5hbWUpIHtcclxuXHRsZXQgcmVzdWx0ID0gZmFsc2VcclxuXHRpZiAobG9nRmlsZU5hbWUgIT0gbnVsbCkge1xyXG5cdFx0bGV0IGRhdGVOb3cgPSBuZXcgRGF0ZSgpO1xyXG5cdFx0ZGF0ZU5vdy5zZXRTZWNvbmRzKDApO1xyXG5cdFx0ZGF0ZU5vdy5zZXRNaWxsaXNlY29uZHMoMCk7XHJcblx0XHRsZXQgcGFyc2VkRGF0ZSA9IHBhcnNlRGF0ZUZyb21Mb2dGaWxlTmFtZShsb2dGaWxlTmFtZSk7XHJcblx0XHRyZXN1bHQgPSAoZGF0ZU5vdyAtIHBhcnNlZERhdGUgPT0gMCk7XHJcblx0fVxyXG5cdHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcblxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZUxvZ1N0YXJ0KGxvZ0ZpbGVBY2Nlc3NIYW5kbGUpIHtcclxuXHRsZXQgZGF0YSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShMT0dTVEFSVF9MQUJFTCArICdcXG4nKTtcclxuXHRhd2FpdCBsb2dGaWxlQWNjZXNzSGFuZGxlLndyaXRlKGRhdGEpO1xyXG5cdHJldHVybiBhd2FpdCBsb2dGaWxlQWNjZXNzSGFuZGxlLmZsdXNoKCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlTG9nRW5kKGxvZ0ZpbGVBY2Nlc3NIYW5kbGUpIHtcclxuXHRsZXQgZmlsZVNpemUgPSBhd2FpdCBsb2dGaWxlQWNjZXNzSGFuZGxlLmdldFNpemUoKTtcclxuXHRsZXQgZGF0YSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZSgnXFxuJyArIExPR0VORF9MQUJFTCk7XHJcblx0YXdhaXQgbG9nRmlsZUFjY2Vzc0hhbmRsZS53cml0ZShkYXRhLCB7IGF0OiBmaWxlU2l6ZSAtIDIgfSk7XHJcblx0cmV0dXJuIGF3YWl0IGxvZ0ZpbGVBY2Nlc3NIYW5kbGUuZmx1c2goKTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gd3JpdGVPbkxvZ0ZpbGUobG9nRmlsZUFjY2Vzc0hhbmRsZSwgcmVxdWVzdCkge1xyXG5cdGxldCByZXN1bHQgPSBmYWxzZTtcclxuXHRsZXQgZmlsZVNpemUgPSBhd2FpdCBsb2dGaWxlQWNjZXNzSGFuZGxlLmdldFNpemUoKTtcclxuXHRpZiAoZmlsZVNpemUgPT0gMCkge1xyXG5cdFx0YXdhaXQgd3JpdGVMb2dTdGFydChsb2dGaWxlQWNjZXNzSGFuZGxlKTtcclxuXHR9XHJcblx0ZmlsZVNpemUgPSBhd2FpdCBsb2dGaWxlQWNjZXNzSGFuZGxlLmdldFNpemUoKTtcclxuXHRsZXQgcmF3VGV4dCA9IHJlcXVlc3QgKyAnLCcgKyAnXFxuJztcclxuXHRsZXQgZGF0YSA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShyYXdUZXh0KTtcclxuXHRyZXN1bHQgPSBhd2FpdCBsb2dGaWxlQWNjZXNzSGFuZGxlLndyaXRlKGRhdGEsIHsgYXQ6IGZpbGVTaXplIH0pO1xyXG5cdC8vY29uc29sZS5sb2coXCJGaWxlIHNpemU6XCIgKyBmaWxlU2l6ZSk7XHJcblx0cmVzdWx0ID0gYXdhaXQgbG9nRmlsZUFjY2Vzc0hhbmRsZS5mbHVzaCgpO1xyXG5cdHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QocmVxdWVzdCkge1xyXG5cdGxldCByZXN1bHQgPSBmYWxzZTtcclxuXHRzd2l0Y2gocmVxdWVzdC50eXBlKSB7XHJcblx0XHRjYXNlIExPR19XT1JLRVJfTUVTU0FHRV9UWVBFLkxPRzoge1xyXG5cdFx0XHRyZXN1bHQgPSBhd2FpdCBoYW5kbGVMb2cocmVxdWVzdC5wYXlsb2FkKTtcclxuXHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRjYXNlIExPR19XT1JLRVJfTUVTU0FHRV9UWVBFLkNPTkZJR19QQVJBTVM6IHtcclxuXHRcdFx0Y29uZmlndXJlU25hcHBBUEkocmVxdWVzdC5wYXlsb2FkKTtcclxuXHRcdFx0YnJlYWs7XHRcdFxyXG5cdFx0fVxyXG5cdFx0ZGVmYXVsdDpcclxuXHRcdFx0YnJlYWs7XHJcblx0fVxyXG5cdHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUxvZyhyZXF1ZXN0KSB7XHJcblx0YXdhaXQgY29uZmlndXJlRmlsZUxvZ2dlcigpO1xyXG5cdGxldCBjdXJyZW50TG9nRmlsZUFjY2Vzc0hhbmRsZSA9IGN1cnJlbnRGaWxlTG9nLmdldExvZ0ZpbGVBY2Nlc3NIYW5kbGUoKTtcclxuXHRyZXR1cm4gYXdhaXQgd3JpdGVPbkxvZ0ZpbGUoY3VycmVudExvZ0ZpbGVBY2Nlc3NIYW5kbGUsIEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY29uZmlndXJlU25hcHBBUEkocGFyYW1zKSB7XHJcblx0c25hcHBBUElQYXJhbXMgPSBwYXJhbXM7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlTG9nRW5kSWZOZWVkZWQoZmlsZU5hbWUpIHtcclxuXHRsZXQgbG9nRmlsZUhhbmRsZSA9IGF3YWl0IGxvZ0RpcmVjdG9yeUhhbmRsZS5nZXRGaWxlSGFuZGxlKGZpbGVOYW1lLCB7Y3JlYXRlOiBmYWxzZSx9KTtcclxuXHRsZXQgZmlsZSA9IGF3YWl0IGxvZ0ZpbGVIYW5kbGUuZ2V0RmlsZSgpO1xyXG5cdGxldCBzdGFydCA9IGZpbGUuc2l6ZSAtIDIgPCAwID8gMCA6IGZpbGUuc2l6ZSAtIDI7XHJcblx0Y29uc3QgYmxvYiA9IGZpbGUuc2xpY2Uoc3RhcnQpO1xyXG5cdGNvbnN0IHRleHQgPSBhd2FpdCBibG9iLnRleHQoKTtcclxuXHRcclxuXHRpZiAodGV4dCAhPSBMT0dFTkRfTEFCRUwpIHtcclxuXHRcdGxldCBsb2dGaWxlQWNjZXNzSGFuZGxlID0gYXdhaXQgbG9nRmlsZUhhbmRsZS5jcmVhdGVTeW5jQWNjZXNzSGFuZGxlKCk7XHJcblx0XHRhd2FpdCB3cml0ZUxvZ0VuZChsb2dGaWxlQWNjZXNzSGFuZGxlKTtcclxuXHRcdGF3YWl0IGxvZ0ZpbGVBY2Nlc3NIYW5kbGUuY2xvc2UoKTtcclxuXHR9XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGFkZFRvVXBsb2FkUXVldWUobG9nRmlsZU5hbWUpIHtcclxuXHRpZiAoIXVwbG9hZFF1ZXVlLmluY2x1ZGVzKGxvZ0ZpbGVOYW1lKSlcclxuXHRcdHVwbG9hZFF1ZXVlLnB1c2gobG9nRmlsZU5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRVcGxvYWRSZXF1ZXN0KGxvZ0ZpbGVOYW1lLCBiYXNlNjRMb2dzKSB7XHJcblx0bGV0IHJlc3VsdCA9IHtcclxuXHRcdCdIZWFkZXInOiB7XHJcblx0XHRcdCdXb3Jrc3RhdGlvbklkJzogc25hcHBBUElQYXJhbXMud29ya3N0YXRpb25JZCxcclxuXHRcdFx0J1VzZXJBY2NvdW50SWQnOiBzbmFwcEFQSVBhcmFtcy51c2VySWQsXHJcblx0XHRcdCdUb2tlbic6IHNuYXBwQVBJUGFyYW1zLnRva2VuXHJcblx0XHR9LFxyXG5cdFx0J1JlcXVlc3QnOiB7XHJcblx0XHRcdCdDb21tYW5kJzogJ0FERCcsXHJcblx0XHRcdCdBZGQnOiB7XHJcblx0XHRcdFx0J1VwbG9hZElkJzpwYXJzZVVVSURGcm9tTG9nRmlsZU5hbWUobG9nRmlsZU5hbWUpLFxyXG5cdFx0XHRcdCdVcGxvYWRUeXBlJzogNCxcclxuXHRcdFx0XHQnTXNnUmVxdWVzdCc6IGJhc2U2NExvZ3NcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0cmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuLy9odHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRmV0Y2hfQVBJL1VzaW5nX0ZldGNoXHJcbmFzeW5jIGZ1bmN0aW9uIHVwbG9hZExvZ0ZpbGUobG9nRmlsZU5hbWUpIHtcclxuXHRsZXQgbG9nRmlsZUhhbmRsZSA9IGF3YWl0IGxvZ0RpcmVjdG9yeUhhbmRsZS5nZXRGaWxlSGFuZGxlKGxvZ0ZpbGVOYW1lLCB7Y3JlYXRlOiB0cnVlLH0pO1xyXG5cdGxldCBmaWxlID0gYXdhaXQgbG9nRmlsZUhhbmRsZS5nZXRGaWxlKCk7XHJcblx0bGV0IGxvZ3MgPSBhd2FpdCBmaWxlLnRleHQoKVxyXG5cdGxldCBiYXNlNjRMb2dzID0gYXdhaXQgVXRpbHMuZW5jb2RlQmFzZTY0VVJMRW5jb2RlZChsb2dzKTtcclxuXHQgIFxyXG5cdGNvbnN0IHVybEVuY29kZWRCb2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XHJcblx0XHRtZXNzYWdlOiBKU09OLnN0cmluZ2lmeShnZXRVcGxvYWRSZXF1ZXN0KGxvZ0ZpbGVOYW1lLCBiYXNlNjRMb2dzKSlcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHQgICAgLy8gUGVyZm9ybSB0aGUgQVBJIGNhbGwgdXNpbmcgZmV0Y2ggb3IgYW55IG90aGVyIHN1aXRhYmxlIG1ldGhvZFxyXG5cdCAgICBmZXRjaChzbmFwcEFQSVBhcmFtcy5hcGlVcmwgKyAnL3NlcnZpY2U/Y21kPVVQTE9BRCZmb3JtYXQ9anNvbicsIHtcclxuXHQgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuXHQgICAgICBoZWFkZXJzOiB7XHJcblx0ICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcclxuXHQgICAgICB9LFxyXG5cdCAgICAgIGJvZHk6IHVybEVuY29kZWRCb2R5XHJcblx0ICAgIH0pXHJcblx0ICAgIC50aGVuKHJlc3BvbnNlID0+IHtcclxuXHQgICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG5cdCAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBQcm9taXNlIHdpdGggdGhlIHJlc3BvbnNlIGRhdGFcclxuXHQgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZS5qc29uKCkpO1xyXG5cdCAgICAgICAgICBcclxuXHQgICAgICAgICAgbG9nRmlsZUhhbmRsZS5yZW1vdmUoKTsgLy9SZW1vdmUgaWYgdXBsb2FkIHN1Y2NlZGVkXHJcblx0ICAgICAgICB9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHQgICAgICAgICAgLy8gUmVqZWN0IHRoZSBQcm9taXNlIHdpdGggYW4gZXJyb3IgbWVzc2FnZVxyXG5cdCAgICAgICAgICByZWplY3QoJ0FQSSBjYWxsIGZhaWxlZCB3aXRoIHN0YXR1czogJyArIHJlc3BvbnNlLnN0YXR1cyk7XHJcblx0ICAgICAgICB9XHJcblx0ICAgICAgfSlcclxuXHQgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG5cdCAgICAgIFx0Y29uc29sZS5lcnJvcihlcnJvcik7XHJcblx0ICAgICAgICByZWplY3QoZXJyb3IpO1xyXG5cdCAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzVXBsb2FkUXVldWUoKSB7XHJcblx0d2hpbGUgKHVwbG9hZFF1ZXVlLmxlbmd0aCA+IDApIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGxldCB1cGxvYWRGaWxlID0gdXBsb2FkUXVldWUuc2hpZnQoKTtcclxuXHRcdFx0YXdhaXQgdXBsb2FkTG9nRmlsZSh1cGxvYWRGaWxlKTtcdFx0XHRcclxuXHRcdH0gY2F0Y2goZSkge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGUpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbmNsYXNzIEZpbGVMb2dnZXIge1xyXG5cdCNsb2dGaWxlTmFtZTtcclxuXHQjbG9nRmlsZUhhbmRsZTtcclxuXHQjbG9nRmlsZUFjY2Vzc0hhbmRsZTtcclxuXHRcclxuXHRjb25zdHJ1Y3Rvcihsb2dGaWxlTmFtZSwgbG9nRmlsZUhhbmRsZSwgbG9nRmlsZUFjY2Vzc0hhbmRsZSkge1xyXG5cdCAgIHRoaXMuI2xvZ0ZpbGVOYW1lID0gbG9nRmlsZU5hbWU7XHJcblx0ICAgdGhpcy4jbG9nRmlsZUhhbmRsZSA9IGxvZ0ZpbGVIYW5kbGU7XHJcblx0ICAgdGhpcy4jbG9nRmlsZUFjY2Vzc0hhbmRsZSA9IGxvZ0ZpbGVBY2Nlc3NIYW5kbGU7XHJcblx0fVxyXG5cdFxyXG5cdGdldExvZ0ZpbGVOYW1lKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI2xvZ0ZpbGVOYW1lO1xyXG5cdH1cclxuXHRcclxuXHRnZXRMb2dGaWxlSGFuZGxlKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI2xvZ0ZpbGVIYW5kbGU7XHJcblx0fVxyXG5cdFxyXG5cdGdldExvZ0ZpbGVBY2Nlc3NIYW5kbGUoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy4jbG9nRmlsZUFjY2Vzc0hhbmRsZTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgY2xhc3MgTG9nV29ya2VyTWVzc2FnZSB7XHJcblx0dHlwZTtcclxuXHRwYXlsb2FkO1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKHR5cGUsIHBheWxvYWQpIHtcclxuXHRcdHRoaXMudHlwZSA9IHR5cGU7XHJcblx0XHR0aGlzLnBheWxvYWQgPSBwYXlsb2FkO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IExPR19XT1JLRVJfTUVTU0FHRV9UWVBFID0ge1xyXG5cdExPRzogMSxcclxuXHRDT05GSUdfUEFSQU1TOiAyXHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../common-script/snapp-log-worker.js\n");

/***/ }),

/***/ "../../../common-script/timed-task.js":
/*!********************************************!*\
  !*** ../../../common-script/timed-task.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TimedTask: () => (/* binding */ TimedTask)\n/* harmony export */ });\nclass TimedTask {\r\n\t#timer;\r\n\t#timeoutTime;\r\n\t#task;\r\n\t\r\n\tconstructor(timeoutTime, task) {\r\n\t\tthis.#timeoutTime = timeoutTime;\r\n\t\tthis.#task = task;\r\n\t}\r\n\t\r\n\tstartWithImmediateExecution() {\r\n\t\tthis.#executeTask();\r\n\t}\r\n\t\r\n\tstartTimer() {\r\n\t\tthis.reset();\r\n\t}\r\n\t\r\n\t#executeTask() {\r\n\t\tthis.#clearTimer();\r\n\t\ttry {\r\n\t\t\tthis.#task();\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t}\r\n\r\n\t#clearTimer() {\r\n\t\tif (this.#timer)\r\n\t\t\tclearTimeout(this.#timer);\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.#clearTimer();\r\n\t\tthis.#timer = setTimeout(() => this.#executeTask(), this.#timeoutTime);\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vY29tbW9uLXNjcmlwdC90aW1lZC10YXNrLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2lvc2stY29udHJvbGxlci8uLi8uLi8uLi9jb21tb24tc2NyaXB0L3RpbWVkLXRhc2suanM/ZTVhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVGltZWRUYXNrIHtcclxuXHQjdGltZXI7XHJcblx0I3RpbWVvdXRUaW1lO1xyXG5cdCN0YXNrO1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKHRpbWVvdXRUaW1lLCB0YXNrKSB7XHJcblx0XHR0aGlzLiN0aW1lb3V0VGltZSA9IHRpbWVvdXRUaW1lO1xyXG5cdFx0dGhpcy4jdGFzayA9IHRhc2s7XHJcblx0fVxyXG5cdFxyXG5cdHN0YXJ0V2l0aEltbWVkaWF0ZUV4ZWN1dGlvbigpIHtcclxuXHRcdHRoaXMuI2V4ZWN1dGVUYXNrKCk7XHJcblx0fVxyXG5cdFxyXG5cdHN0YXJ0VGltZXIoKSB7XHJcblx0XHR0aGlzLnJlc2V0KCk7XHJcblx0fVxyXG5cdFxyXG5cdCNleGVjdXRlVGFzaygpIHtcclxuXHRcdHRoaXMuI2NsZWFyVGltZXIoKTtcclxuXHRcdHRyeSB7XHJcblx0XHRcdHRoaXMuI3Rhc2soKTtcclxuXHRcdH1cclxuXHRcdGZpbmFsbHkge1xyXG5cdFx0XHR0aGlzLnJlc2V0KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQjY2xlYXJUaW1lcigpIHtcclxuXHRcdGlmICh0aGlzLiN0aW1lcilcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuI3RpbWVyKTtcclxuXHR9XHJcblxyXG5cdHJlc2V0KCkge1xyXG5cdFx0dGhpcy4jY2xlYXJUaW1lcigpO1xyXG5cdFx0dGhpcy4jdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMuI2V4ZWN1dGVUYXNrKCksIHRoaXMuI3RpbWVvdXRUaW1lKTtcclxuXHR9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../../common-script/timed-task.js\n");

/***/ }),

/***/ "../../../common-script/utils.js":
/*!***************************************!*\
  !*** ../../../common-script/utils.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Utils: () => (/* binding */ Utils)\n/* harmony export */ });\nclass Utils {\r\n\tstatic beautifyJSONString(str) {\r\n\t\treturn JSON.stringify(str, null, 4)\r\n\t}\t\r\n\r\n\tstatic decodeBase64(str) {\r\n\t\tif (str[str.length-1] === \"=\")\r\n    \tstr = str.slice(0,-1);\r\n\t\treturn atob(str);\r\n\t}\r\n\r\n\tstatic encodeBase64(str) {\r\n\t\treturn btoa(str);\r\n\t}\r\n\t\r\n\tstatic createUUID() {\r\n    let dt = new Date().getTime();\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n      let r = (dt + Math.random() * 16) % 16 | 0;\r\n      dt = Math.floor(dt / 16);\r\n      return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n  }\r\n  \r\n\tstatic async encodeBase64URLEncoded(str) {\r\n\t\tlet blob = new Blob([str], { type: 'text/plain; charset=UTF-8' });\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\treader.onloadend = () => {\r\n\t\t\t\t\tlet base64data = reader.result.split(',')[1];\r\n\t\t\t\t\tresolve(base64data);\r\n\t\t\t\t};\r\n\t\t\treader.onerror = reject;\r\n\t\t\treader.readAsDataURL(blob);\r\n\t\t});\r\n\t}\r\n\t\r\n\tstatic async streamToBase64(stream) {\r\n    // Convert the stream to blob\r\n    const blob = await new Response(stream).blob();\r\n\r\n    // Create a FileReader instance\r\n    const reader = new FileReader();\r\n\r\n    // Convert the blob to base64\r\n    return new Promise((resolve, reject) => {\r\n        reader.onloadend = () => resolve(reader.result.split(',')[1]); // Remove the Data URL prefix\r\n        reader.onerror = reject;\r\n        reader.readAsDataURL(blob);\r\n    });\r\n\t}\t\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vY29tbW9uLXNjcmlwdC91dGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixtQkFBbUIsZ0JBQWdCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9raW9zay1jb250cm9sbGVyLy4uLy4uLy4uL2NvbW1vbi1zY3JpcHQvdXRpbHMuanM/NjE2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVXRpbHMge1xyXG5cdHN0YXRpYyBiZWF1dGlmeUpTT05TdHJpbmcoc3RyKSB7XHJcblx0XHRyZXR1cm4gSlNPTi5zdHJpbmdpZnkoc3RyLCBudWxsLCA0KVxyXG5cdH1cdFxyXG5cclxuXHRzdGF0aWMgZGVjb2RlQmFzZTY0KHN0cikge1xyXG5cdFx0aWYgKHN0cltzdHIubGVuZ3RoLTFdID09PSBcIj1cIilcclxuICAgIFx0c3RyID0gc3RyLnNsaWNlKDAsLTEpO1xyXG5cdFx0cmV0dXJuIGF0b2Ioc3RyKTtcclxuXHR9XHJcblxyXG5cdHN0YXRpYyBlbmNvZGVCYXNlNjQoc3RyKSB7XHJcblx0XHRyZXR1cm4gYnRvYShzdHIpO1xyXG5cdH1cclxuXHRcclxuXHRzdGF0aWMgY3JlYXRlVVVJRCgpIHtcclxuICAgIGxldCBkdCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xyXG4gICAgICBsZXQgciA9IChkdCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XHJcbiAgICAgIGR0ID0gTWF0aC5mbG9vcihkdCAvIDE2KTtcclxuICAgICAgcmV0dXJuIChjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuXHRzdGF0aWMgYXN5bmMgZW5jb2RlQmFzZTY0VVJMRW5jb2RlZChzdHIpIHtcclxuXHRcdGxldCBibG9iID0gbmV3IEJsb2IoW3N0cl0sIHsgdHlwZTogJ3RleHQvcGxhaW47IGNoYXJzZXQ9VVRGLTgnIH0pO1xyXG5cdFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHRcdGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG5cdFx0XHRcdHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XHJcblx0XHRcdFx0XHRsZXQgYmFzZTY0ZGF0YSA9IHJlYWRlci5yZXN1bHQuc3BsaXQoJywnKVsxXTtcclxuXHRcdFx0XHRcdHJlc29sdmUoYmFzZTY0ZGF0YSk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0cmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XHJcblx0XHRcdHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHN0YXRpYyBhc3luYyBzdHJlYW1Ub0Jhc2U2NChzdHJlYW0pIHtcclxuICAgIC8vIENvbnZlcnQgdGhlIHN0cmVhbSB0byBibG9iXHJcbiAgICBjb25zdCBibG9iID0gYXdhaXQgbmV3IFJlc3BvbnNlKHN0cmVhbSkuYmxvYigpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIEZpbGVSZWFkZXIgaW5zdGFuY2VcclxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcblxyXG4gICAgLy8gQ29udmVydCB0aGUgYmxvYiB0byBiYXNlNjRcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVhZGVyLm9ubG9hZGVuZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdC5zcGxpdCgnLCcpWzFdKTsgLy8gUmVtb3ZlIHRoZSBEYXRhIFVSTCBwcmVmaXhcclxuICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcclxuICAgIH0pO1xyXG5cdH1cdFxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../common-script/utils.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("../../../common-script/snapp-log-worker.js");
/******/ 	globalThis["kiosk-controller"] = __webpack_exports__;
/******/ 	
/******/ })()
;