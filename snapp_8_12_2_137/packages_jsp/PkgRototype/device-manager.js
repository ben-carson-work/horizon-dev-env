/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "../../../../../PkgKioskJS/web-modules/common-script/device-manager/device-manager.js":
/*!********************************************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/device-manager/device-manager.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DeviceManagerBase\": () => (/* binding */ DeviceManagerBase)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\n\r\nclass DeviceManagerBase {\r\n  #status;\r\n  #deviceManagerName;\r\n  #errorMessage = \"\";\r\n\r\n  deviceInstanceMap = new Map();\r\n  #readerDevicePresent = false;\r\n  #printerDevicePresent = false;\r\n  #paymentDevicePresent = false;\r\n\r\n  onMediaRead;\r\n  \r\n  constructor(name) {\r\n    this.#deviceManagerName = name;\r\n  }\r\n  \r\n  init(workstation) {\r\n    this.setStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.CONNECTOR_STATUS.INIT);\r\n\r\n    workstation.PluginList.forEach(plugin => {\r\n      try {\r\n\t\t  \tif (plugin.DriverType !== _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.DEVICE_CONNECTOR) {\r\n\t        let device = this._createDeviceInstance({\r\n\t\t\t\t      \"pluginInfo\": plugin,\r\n\t\t\t\t      \"onStatusChanged\": event => this.#onDeviceStatusChanged(event)\r\n\t\t\t\t    });\r\n\t\t\t\t    \r\n\t        if (device) {\r\n\t\t\t\t\t\tthis.deviceInstanceMap.set(device.deviceId, device);\r\n\t\t\t\t\t\tif (device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.READER) {\r\n\t\t\t\t  \t\tthis.#readerDevicePresent = true;\r\n\t            device.onMediaRead = r => this._triggerMediaRead(r);\r\n\t\t\t  \t\t}\r\n\t          else if (device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.PRINTER)\r\n\t          \tthis.#printerDevicePresent = true;\r\n\t          else if (device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.EXT_PAY_DEVICE)\r\n\t          \tthis.#paymentDevicePresent = true;\r\n\t        }\r\n\t\t\t  }\r\n      }\r\n      catch(err) {\r\n        console.error(`Failed to create device instance for ${plugin.PluginName} with error: ${err.message}`);\r\n      }\r\n    });\r\n    this.updateStatusAccordingToDevicesStatus();\r\n  }\r\n  \r\n  close() {\r\n    //To be implemented in extending class\r\n  }\r\n\r\n  get deviceManagerName() {\r\n    return this.#deviceManagerName;\r\n  }\r\n  \r\n  get errorMessage() {\r\n    return this.#errorMessage;\r\n  }\r\n\r\n  get status() {\r\n    return this.#status;\r\n  }\r\n  \r\n  setStatus(newStatus) {\r\n    if (newStatus !== this.#status) {\r\n      this.#status = newStatus;\r\n\t\t\tif (newStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.CONNECTOR_STATUS.READY)\r\n\t\t\t\tthis.#errorMessage = \"\";\r\n\t\t\telse if (newStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.CONNECTOR_STATUS.INIT)\r\n\t\t\t\tthis.#errorMessage = \"Initializing...\";\r\n      this.#triggerStatusChanged(this.#status);\r\n    }\r\n  }\r\n  \r\n \tsetError(message) {\r\n\t\tif (this.#errorMessage !== message) {\r\n\t\t\tthis.#errorMessage = message;\r\n\t\t\tthis.setStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.CONNECTOR_STATUS.ERROR);\r\n\t\t}\r\n\t}\r\n\r\n\t#onDeviceStatusChanged(event) {\r\n\t\tthis.updateStatusAccordingToDevicesStatus();\r\n    this.#triggerDeviceStatusChanged(event);\r\n\t}\r\n\t\r\n\tupdateStatusAccordingToDevicesStatus() {\r\n\t\tlet activeReaderFound = false;\r\n\t\tlet allPrintersReady = true;\r\n\t\tlet activePaymentDeviceFound = false;\r\n\t\tlet initializingDevice = false;\r\n\t\t\r\n    for (let device of this.deviceInstanceMap.values()) {\r\n\t\t\tif (device.deviceStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.INIT) {\r\n\t\t\t\tinitializingDevice = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\t\r\n      if ((device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.PRINTER) && (device.deviceStatus !== _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.READY))\r\n      \tallPrintersReady = false;\r\n      \t\r\n      if ((device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.READER) && (device.deviceStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.READY))\r\n      \tactiveReaderFound = true;\r\n      \t\r\n      if ((device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.EXT_PAY_DEVICE) && (device.deviceStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.READY))\r\n      \tactivePaymentDeviceFound = true;\r\n\t  } \r\n\t\t\r\n\t\tif (initializingDevice)\r\n\t\t\tthis.setStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.CONNECTOR_STATUS.INIT);\r\n\t\telse if (this.#enoughDevicesReady(allPrintersReady, activeReaderFound, activePaymentDeviceFound))\r\n\t\t\tthis.setStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.CONNECTOR_STATUS.READY);\r\n\t\telse\r\n\t\t\tthis.setError(\"Minimum required devices not ready\");\r\n\t}\r\n\t\r\n\t#enoughDevicesReady(allPrintersReady, activeReaderFound, activePaymentDeviceFound) {\r\n\t\treturn (!this.#printerDevicePresent || allPrintersReady) &&\r\n\t\t\t\t\t (!this.#readerDevicePresent || activeReaderFound) && \r\n\t\t\t\t\t (!this.#paymentDevicePresent || activePaymentDeviceFound);\r\n\t}\r\n\t\r\n  _createDeviceInstance(params) {\r\n    throw Error(\"To be implemented in extending class\");\r\n  }\r\n  \r\n  allLightsOff() {\r\n    //To be implemented in extending class if needed\r\n  }\r\n  \r\n  findDeviceById(deviceId) {    \r\n    return this.deviceInstanceMap.get(deviceId);\r\n  }\r\n  \r\n  findDeviceByClassAndDeviceAlias(classAlias, deviceAlias) {  \r\n    for (let device of this.deviceInstanceMap.values())  \r\n      if ((device.classAlias === classAlias) && (!deviceAlias || (device.deviceAlias === deviceAlias)))\r\n        return device;\r\n        \r\n    return null;\r\n  }\r\n  \r\n  findDeviceByDeviceType(deviceType) { \r\n\t  let result = [];\r\n\t  \r\n    for (let device of this.deviceInstanceMap.values())  \r\n      if (device.deviceType === deviceType)\r\n        result.push(device);\r\n        \r\n    return result;\r\n  }\r\n\r\n  startRead() {\r\n    for (const device of this.deviceInstanceMap.values()) {\r\n      if (device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.READER)\r\n        device.startRead();\r\n    }\r\n  }\r\n  \r\n  stopRead() {\r\n    for (const device of this.deviceInstanceMap.values()) {\r\n      if (device.deviceType === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_TYPE.READER)\r\n        device.stopRead();\r\n    }\r\n  }\r\n  \r\n  async performMaintenance() {\r\n\t\tfor (const device of this.deviceInstanceMap.values()) {\r\n\t\t\tconsole.log(\"Start maintenance for: \" + device.pluginName);\r\n\t\t\tawait device.performMaintenance();\r\n\t\t\tconsole.log(\"End maintenance for: \" + device.pluginName);\r\n\t\t}\r\n  }\r\n\r\n  #triggerEvent(eventCode, payload) {\r\n    $(document).trigger(eventCode, payload);\r\n  }\r\n\r\n  #triggerStatusChanged(status) {\r\n    this.#triggerEvent(\"device-manager-status\", status);\r\n  }\r\n  \r\n  #triggerDeviceStatusChanged(status) {\r\n    this.#triggerEvent(\"device-status\", status);\r\n  }\r\n  \r\n  _triggerMediaRead(read) {\r\n    if (this.onMediaRead)\r\n      this.onMediaRead(read)\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RldmljZS1tYW5hZ2VyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXlGO0FBQ3BCO0FBQ3JFO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQix5RkFBcUI7QUFDeEM7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGdHQUE0QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNGQUFrQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsdUZBQW1CO0FBQzdEO0FBQ0EsMENBQTBDLDhGQUEwQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELG1CQUFtQixjQUFjLFlBQVk7QUFDM0c7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsMEZBQXNCO0FBQzNDO0FBQ0EsMEJBQTBCLHlGQUFxQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLDBGQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0Isc0ZBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHVGQUFtQiw4QkFBOEIsdUZBQW1CO0FBQ3JHO0FBQ0E7QUFDQSxpQ0FBaUMsc0ZBQWtCLDhCQUE4Qix1RkFBbUI7QUFDcEc7QUFDQTtBQUNBLGlDQUFpQyw4RkFBMEIsOEJBQThCLHVGQUFtQjtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix5RkFBcUI7QUFDdkM7QUFDQSxrQkFBa0IsMEZBQXNCO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxzRkFBa0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLHNGQUFrQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RldmljZS1tYW5hZ2VyLmpzP2NmODIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ09OTkVDVE9SX1NUQVRVUywgREVWSUNFX1NUQVRVUyB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLW1vZGVsJztcclxuaW1wb3J0IHsgREVWSUNFX1RZUEUgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1tb2RlbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRGV2aWNlTWFuYWdlckJhc2Uge1xyXG4gICNzdGF0dXM7XHJcbiAgI2RldmljZU1hbmFnZXJOYW1lO1xyXG4gICNlcnJvck1lc3NhZ2UgPSBcIlwiO1xyXG5cclxuICBkZXZpY2VJbnN0YW5jZU1hcCA9IG5ldyBNYXAoKTtcclxuICAjcmVhZGVyRGV2aWNlUHJlc2VudCA9IGZhbHNlO1xyXG4gICNwcmludGVyRGV2aWNlUHJlc2VudCA9IGZhbHNlO1xyXG4gICNwYXltZW50RGV2aWNlUHJlc2VudCA9IGZhbHNlO1xyXG5cclxuICBvbk1lZGlhUmVhZDtcclxuICBcclxuICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICB0aGlzLiNkZXZpY2VNYW5hZ2VyTmFtZSA9IG5hbWU7XHJcbiAgfVxyXG4gIFxyXG4gIGluaXQod29ya3N0YXRpb24pIHtcclxuICAgIHRoaXMuc2V0U3RhdHVzKENPTk5FQ1RPUl9TVEFUVVMuSU5JVCk7XHJcblxyXG4gICAgd29ya3N0YXRpb24uUGx1Z2luTGlzdC5mb3JFYWNoKHBsdWdpbiA9PiB7XHJcbiAgICAgIHRyeSB7XHJcblx0XHQgIFx0aWYgKHBsdWdpbi5Ecml2ZXJUeXBlICE9PSBERVZJQ0VfVFlQRS5ERVZJQ0VfQ09OTkVDVE9SKSB7XHJcblx0ICAgICAgICBsZXQgZGV2aWNlID0gdGhpcy5fY3JlYXRlRGV2aWNlSW5zdGFuY2Uoe1xyXG5cdFx0XHRcdCAgICAgIFwicGx1Z2luSW5mb1wiOiBwbHVnaW4sXHJcblx0XHRcdFx0ICAgICAgXCJvblN0YXR1c0NoYW5nZWRcIjogZXZlbnQgPT4gdGhpcy4jb25EZXZpY2VTdGF0dXNDaGFuZ2VkKGV2ZW50KVxyXG5cdFx0XHRcdCAgICB9KTtcclxuXHRcdFx0XHQgICAgXHJcblx0ICAgICAgICBpZiAoZGV2aWNlKSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGV2aWNlSW5zdGFuY2VNYXAuc2V0KGRldmljZS5kZXZpY2VJZCwgZGV2aWNlKTtcclxuXHRcdFx0XHRcdFx0aWYgKGRldmljZS5kZXZpY2VUeXBlID09PSBERVZJQ0VfVFlQRS5SRUFERVIpIHtcclxuXHRcdFx0XHQgIFx0XHR0aGlzLiNyZWFkZXJEZXZpY2VQcmVzZW50ID0gdHJ1ZTtcclxuXHQgICAgICAgICAgICBkZXZpY2Uub25NZWRpYVJlYWQgPSByID0+IHRoaXMuX3RyaWdnZXJNZWRpYVJlYWQocik7XHJcblx0XHRcdCAgXHRcdH1cclxuXHQgICAgICAgICAgZWxzZSBpZiAoZGV2aWNlLmRldmljZVR5cGUgPT09IERFVklDRV9UWVBFLlBSSU5URVIpXHJcblx0ICAgICAgICAgIFx0dGhpcy4jcHJpbnRlckRldmljZVByZXNlbnQgPSB0cnVlO1xyXG5cdCAgICAgICAgICBlbHNlIGlmIChkZXZpY2UuZGV2aWNlVHlwZSA9PT0gREVWSUNFX1RZUEUuRVhUX1BBWV9ERVZJQ0UpXHJcblx0ICAgICAgICAgIFx0dGhpcy4jcGF5bWVudERldmljZVByZXNlbnQgPSB0cnVlO1xyXG5cdCAgICAgICAgfVxyXG5cdFx0XHQgIH1cclxuICAgICAgfVxyXG4gICAgICBjYXRjaChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGRldmljZSBpbnN0YW5jZSBmb3IgJHtwbHVnaW4uUGx1Z2luTmFtZX0gd2l0aCBlcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLnVwZGF0ZVN0YXR1c0FjY29yZGluZ1RvRGV2aWNlc1N0YXR1cygpO1xyXG4gIH1cclxuICBcclxuICBjbG9zZSgpIHtcclxuICAgIC8vVG8gYmUgaW1wbGVtZW50ZWQgaW4gZXh0ZW5kaW5nIGNsYXNzXHJcbiAgfVxyXG5cclxuICBnZXQgZGV2aWNlTWFuYWdlck5hbWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy4jZGV2aWNlTWFuYWdlck5hbWU7XHJcbiAgfVxyXG4gIFxyXG4gIGdldCBlcnJvck1lc3NhZ2UoKSB7XHJcbiAgICByZXR1cm4gdGhpcy4jZXJyb3JNZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN0YXR1cygpIHtcclxuICAgIHJldHVybiB0aGlzLiNzdGF0dXM7XHJcbiAgfVxyXG4gIFxyXG4gIHNldFN0YXR1cyhuZXdTdGF0dXMpIHtcclxuICAgIGlmIChuZXdTdGF0dXMgIT09IHRoaXMuI3N0YXR1cykge1xyXG4gICAgICB0aGlzLiNzdGF0dXMgPSBuZXdTdGF0dXM7XHJcblx0XHRcdGlmIChuZXdTdGF0dXMgPT09IENPTk5FQ1RPUl9TVEFUVVMuUkVBRFkpXHJcblx0XHRcdFx0dGhpcy4jZXJyb3JNZXNzYWdlID0gXCJcIjtcclxuXHRcdFx0ZWxzZSBpZiAobmV3U3RhdHVzID09PSBDT05ORUNUT1JfU1RBVFVTLklOSVQpXHJcblx0XHRcdFx0dGhpcy4jZXJyb3JNZXNzYWdlID0gXCJJbml0aWFsaXppbmcuLi5cIjtcclxuICAgICAgdGhpcy4jdHJpZ2dlclN0YXR1c0NoYW5nZWQodGhpcy4jc3RhdHVzKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiBcdHNldEVycm9yKG1lc3NhZ2UpIHtcclxuXHRcdGlmICh0aGlzLiNlcnJvck1lc3NhZ2UgIT09IG1lc3NhZ2UpIHtcclxuXHRcdFx0dGhpcy4jZXJyb3JNZXNzYWdlID0gbWVzc2FnZTtcclxuXHRcdFx0dGhpcy5zZXRTdGF0dXMoQ09OTkVDVE9SX1NUQVRVUy5FUlJPUik7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQjb25EZXZpY2VTdGF0dXNDaGFuZ2VkKGV2ZW50KSB7XHJcblx0XHR0aGlzLnVwZGF0ZVN0YXR1c0FjY29yZGluZ1RvRGV2aWNlc1N0YXR1cygpO1xyXG4gICAgdGhpcy4jdHJpZ2dlckRldmljZVN0YXR1c0NoYW5nZWQoZXZlbnQpO1xyXG5cdH1cclxuXHRcclxuXHR1cGRhdGVTdGF0dXNBY2NvcmRpbmdUb0RldmljZXNTdGF0dXMoKSB7XHJcblx0XHRsZXQgYWN0aXZlUmVhZGVyRm91bmQgPSBmYWxzZTtcclxuXHRcdGxldCBhbGxQcmludGVyc1JlYWR5ID0gdHJ1ZTtcclxuXHRcdGxldCBhY3RpdmVQYXltZW50RGV2aWNlRm91bmQgPSBmYWxzZTtcclxuXHRcdGxldCBpbml0aWFsaXppbmdEZXZpY2UgPSBmYWxzZTtcclxuXHRcdFxyXG4gICAgZm9yIChsZXQgZGV2aWNlIG9mIHRoaXMuZGV2aWNlSW5zdGFuY2VNYXAudmFsdWVzKCkpIHtcclxuXHRcdFx0aWYgKGRldmljZS5kZXZpY2VTdGF0dXMgPT09IERFVklDRV9TVEFUVVMuSU5JVCkge1xyXG5cdFx0XHRcdGluaXRpYWxpemluZ0RldmljZSA9IHRydWU7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0XHRcclxuICAgICAgaWYgKChkZXZpY2UuZGV2aWNlVHlwZSA9PT0gREVWSUNFX1RZUEUuUFJJTlRFUikgJiYgKGRldmljZS5kZXZpY2VTdGF0dXMgIT09IERFVklDRV9TVEFUVVMuUkVBRFkpKVxyXG4gICAgICBcdGFsbFByaW50ZXJzUmVhZHkgPSBmYWxzZTtcclxuICAgICAgXHRcclxuICAgICAgaWYgKChkZXZpY2UuZGV2aWNlVHlwZSA9PT0gREVWSUNFX1RZUEUuUkVBREVSKSAmJiAoZGV2aWNlLmRldmljZVN0YXR1cyA9PT0gREVWSUNFX1NUQVRVUy5SRUFEWSkpXHJcbiAgICAgIFx0YWN0aXZlUmVhZGVyRm91bmQgPSB0cnVlO1xyXG4gICAgICBcdFxyXG4gICAgICBpZiAoKGRldmljZS5kZXZpY2VUeXBlID09PSBERVZJQ0VfVFlQRS5FWFRfUEFZX0RFVklDRSkgJiYgKGRldmljZS5kZXZpY2VTdGF0dXMgPT09IERFVklDRV9TVEFUVVMuUkVBRFkpKVxyXG4gICAgICBcdGFjdGl2ZVBheW1lbnREZXZpY2VGb3VuZCA9IHRydWU7XHJcblx0ICB9IFxyXG5cdFx0XHJcblx0XHRpZiAoaW5pdGlhbGl6aW5nRGV2aWNlKVxyXG5cdFx0XHR0aGlzLnNldFN0YXR1cyhDT05ORUNUT1JfU1RBVFVTLklOSVQpO1xyXG5cdFx0ZWxzZSBpZiAodGhpcy4jZW5vdWdoRGV2aWNlc1JlYWR5KGFsbFByaW50ZXJzUmVhZHksIGFjdGl2ZVJlYWRlckZvdW5kLCBhY3RpdmVQYXltZW50RGV2aWNlRm91bmQpKVxyXG5cdFx0XHR0aGlzLnNldFN0YXR1cyhDT05ORUNUT1JfU1RBVFVTLlJFQURZKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0dGhpcy5zZXRFcnJvcihcIk1pbmltdW0gcmVxdWlyZWQgZGV2aWNlcyBub3QgcmVhZHlcIik7XHJcblx0fVxyXG5cdFxyXG5cdCNlbm91Z2hEZXZpY2VzUmVhZHkoYWxsUHJpbnRlcnNSZWFkeSwgYWN0aXZlUmVhZGVyRm91bmQsIGFjdGl2ZVBheW1lbnREZXZpY2VGb3VuZCkge1xyXG5cdFx0cmV0dXJuICghdGhpcy4jcHJpbnRlckRldmljZVByZXNlbnQgfHwgYWxsUHJpbnRlcnNSZWFkeSkgJiZcclxuXHRcdFx0XHRcdCAoIXRoaXMuI3JlYWRlckRldmljZVByZXNlbnQgfHwgYWN0aXZlUmVhZGVyRm91bmQpICYmIFxyXG5cdFx0XHRcdFx0ICghdGhpcy4jcGF5bWVudERldmljZVByZXNlbnQgfHwgYWN0aXZlUGF5bWVudERldmljZUZvdW5kKTtcclxuXHR9XHJcblx0XHJcbiAgX2NyZWF0ZURldmljZUluc3RhbmNlKHBhcmFtcykge1xyXG4gICAgdGhyb3cgRXJyb3IoXCJUbyBiZSBpbXBsZW1lbnRlZCBpbiBleHRlbmRpbmcgY2xhc3NcIik7XHJcbiAgfVxyXG4gIFxyXG4gIGFsbExpZ2h0c09mZigpIHtcclxuICAgIC8vVG8gYmUgaW1wbGVtZW50ZWQgaW4gZXh0ZW5kaW5nIGNsYXNzIGlmIG5lZWRlZFxyXG4gIH1cclxuICBcclxuICBmaW5kRGV2aWNlQnlJZChkZXZpY2VJZCkgeyAgICBcclxuICAgIHJldHVybiB0aGlzLmRldmljZUluc3RhbmNlTWFwLmdldChkZXZpY2VJZCk7XHJcbiAgfVxyXG4gIFxyXG4gIGZpbmREZXZpY2VCeUNsYXNzQW5kRGV2aWNlQWxpYXMoY2xhc3NBbGlhcywgZGV2aWNlQWxpYXMpIHsgIFxyXG4gICAgZm9yIChsZXQgZGV2aWNlIG9mIHRoaXMuZGV2aWNlSW5zdGFuY2VNYXAudmFsdWVzKCkpICBcclxuICAgICAgaWYgKChkZXZpY2UuY2xhc3NBbGlhcyA9PT0gY2xhc3NBbGlhcykgJiYgKCFkZXZpY2VBbGlhcyB8fCAoZGV2aWNlLmRldmljZUFsaWFzID09PSBkZXZpY2VBbGlhcykpKVxyXG4gICAgICAgIHJldHVybiBkZXZpY2U7XHJcbiAgICAgICAgXHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbiAgXHJcbiAgZmluZERldmljZUJ5RGV2aWNlVHlwZShkZXZpY2VUeXBlKSB7IFxyXG5cdCAgbGV0IHJlc3VsdCA9IFtdO1xyXG5cdCAgXHJcbiAgICBmb3IgKGxldCBkZXZpY2Ugb2YgdGhpcy5kZXZpY2VJbnN0YW5jZU1hcC52YWx1ZXMoKSkgIFxyXG4gICAgICBpZiAoZGV2aWNlLmRldmljZVR5cGUgPT09IGRldmljZVR5cGUpXHJcbiAgICAgICAgcmVzdWx0LnB1c2goZGV2aWNlKTtcclxuICAgICAgICBcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBzdGFydFJlYWQoKSB7XHJcbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiB0aGlzLmRldmljZUluc3RhbmNlTWFwLnZhbHVlcygpKSB7XHJcbiAgICAgIGlmIChkZXZpY2UuZGV2aWNlVHlwZSA9PT0gREVWSUNFX1RZUEUuUkVBREVSKVxyXG4gICAgICAgIGRldmljZS5zdGFydFJlYWQoKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgc3RvcFJlYWQoKSB7XHJcbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiB0aGlzLmRldmljZUluc3RhbmNlTWFwLnZhbHVlcygpKSB7XHJcbiAgICAgIGlmIChkZXZpY2UuZGV2aWNlVHlwZSA9PT0gREVWSUNFX1RZUEUuUkVBREVSKVxyXG4gICAgICAgIGRldmljZS5zdG9wUmVhZCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBhc3luYyBwZXJmb3JtTWFpbnRlbmFuY2UoKSB7XHJcblx0XHRmb3IgKGNvbnN0IGRldmljZSBvZiB0aGlzLmRldmljZUluc3RhbmNlTWFwLnZhbHVlcygpKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwiU3RhcnQgbWFpbnRlbmFuY2UgZm9yOiBcIiArIGRldmljZS5wbHVnaW5OYW1lKTtcclxuXHRcdFx0YXdhaXQgZGV2aWNlLnBlcmZvcm1NYWludGVuYW5jZSgpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkVuZCBtYWludGVuYW5jZSBmb3I6IFwiICsgZGV2aWNlLnBsdWdpbk5hbWUpO1xyXG5cdFx0fVxyXG4gIH1cclxuXHJcbiAgI3RyaWdnZXJFdmVudChldmVudENvZGUsIHBheWxvYWQpIHtcclxuICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoZXZlbnRDb2RlLCBwYXlsb2FkKTtcclxuICB9XHJcblxyXG4gICN0cmlnZ2VyU3RhdHVzQ2hhbmdlZChzdGF0dXMpIHtcclxuICAgIHRoaXMuI3RyaWdnZXJFdmVudChcImRldmljZS1tYW5hZ2VyLXN0YXR1c1wiLCBzdGF0dXMpO1xyXG4gIH1cclxuICBcclxuICAjdHJpZ2dlckRldmljZVN0YXR1c0NoYW5nZWQoc3RhdHVzKSB7XHJcbiAgICB0aGlzLiN0cmlnZ2VyRXZlbnQoXCJkZXZpY2Utc3RhdHVzXCIsIHN0YXR1cyk7XHJcbiAgfVxyXG4gIFxyXG4gIF90cmlnZ2VyTWVkaWFSZWFkKHJlYWQpIHtcclxuICAgIGlmICh0aGlzLm9uTWVkaWFSZWFkKVxyXG4gICAgICB0aGlzLm9uTWVkaWFSZWFkKHJlYWQpXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/device-manager/device-manager.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-device.js":
/*!***************************************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-device.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DMDevice\": () => (/* binding */ DMDevice)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\nclass DMDevice {\r\n  _pluginInfo;\r\n  #deviceStatus;\r\n  #errorMessage = \"\";\r\n\t#onStatusChanged;\r\n  \r\n  /*\r\n  params = {\r\n    pluginInfo: DOPluginInfo //device configuration\r\n    onStatusChanged: callback // Called when the status of the device changes\r\n  }\r\n  */\r\n  constructor(params) {\r\n    this._pluginInfo = params.pluginInfo;\r\n    this.#onStatusChanged = params.onStatusChanged;\r\n    this.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.INIT)\r\n  }\r\n  \r\n  get deviceId() {\r\n    return this._pluginInfo.PluginId;\r\n  }\r\n  \r\n  get pluginName() {\r\n\t  return this._pluginInfo.PluginName;\r\n  }\r\n  \r\n  get iconName() {\r\n\t  return this._pluginInfo.IconName;\r\n  }\r\n  \r\n  get classAlias() {\r\n    return this._pluginInfo.DriverClassAlias;\r\n  }\r\n\r\n  get deviceAlias() {\r\n    return this._pluginInfo.DeviceAlias;\r\n  }\r\n  \r\n  get driverType() {\r\n\t  return this._pluginInfo.DriverType;\r\n  }\r\n  \r\n  get deviceStatus() {\r\n    return this.#deviceStatus;\r\n  }\r\n  \r\n  get errorMessage() {\r\n    return this.#errorMessage;\r\n  }\r\n\r\n\tsetDeviceStatus(newStatus) {\r\n\t\tif (this.#deviceStatus !== newStatus) {\r\n\t\t\tthis.#deviceStatus = newStatus;\r\n\t\t\tif (newStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.READY)\r\n\t\t\t\tthis.#errorMessage = \"\";\r\n\t\t\telse if (newStatus === _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.INIT)\r\n\t\t\t\tthis.#errorMessage = \"Initializing...\";\r\n\r\n\t\t\tthis.#triggerStatusChangedEvent(this.#deviceStatus);\r\n\t\t}\r\n\t}\r\n\t\r\n\t#triggerStatusChangedEvent(deviceStatus) {\r\n\t\tif (this.#onStatusChanged) {\r\n\t\t\tlet event = {\r\n\t\t\t\tdeviceId: this.deviceId,\r\n\t\t\t\tdriverType: this.driverType,\r\n\t\t\t\tdeviceStatus: deviceStatus\r\n\t\t\t}\r\n\t\t\tthis.#onStatusChanged(event);\r\n\t\t}\r\n\t}\r\n\r\n\tsetError(message) {\r\n\t\tif (this.#errorMessage !== message) {\r\n\t\t\tthis.#errorMessage = message;\r\n\t\t\tthis.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_0__.DEVICE_STATUS.ERROR);\r\n\t\t}\r\n\t}\r\n\t\r\n\trefreshStatus() {\r\n\t\tthrow new Error(\"RefreshStatus method not implemented\");\r\n\t}\r\n\t\r\n\treset() {\r\n\t\tthrow new Error(\"Reset method not implemented\");\r\n\t}\r\n\t\r\n\tasync performMaintenance() {\r\n\t\t//To be implemented by subclasses if required.\r\n\t}\r\n\t\r\n\ttest() {\r\n\t\tthrow new Error(\"Test method not implemented\");\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLWRldmljZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1RTtBQUN2RTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixzRkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUZBQW1CO0FBQ3hDO0FBQ0EsMEJBQTBCLHNGQUFrQjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVGQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uLy4uLy4uLy4uLy4uL1BrZ0tpb3NrSlMvd2ViLW1vZHVsZXMvY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1kZXZpY2UuanM/ZWJiYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBERVZJQ0VfU1RBVFVTIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tbW9kZWwnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERNRGV2aWNlIHtcclxuICBfcGx1Z2luSW5mbztcclxuICAjZGV2aWNlU3RhdHVzO1xyXG4gICNlcnJvck1lc3NhZ2UgPSBcIlwiO1xyXG5cdCNvblN0YXR1c0NoYW5nZWQ7XHJcbiAgXHJcbiAgLypcclxuICBwYXJhbXMgPSB7XHJcbiAgICBwbHVnaW5JbmZvOiBET1BsdWdpbkluZm8gLy9kZXZpY2UgY29uZmlndXJhdGlvblxyXG4gICAgb25TdGF0dXNDaGFuZ2VkOiBjYWxsYmFjayAvLyBDYWxsZWQgd2hlbiB0aGUgc3RhdHVzIG9mIHRoZSBkZXZpY2UgY2hhbmdlc1xyXG4gIH1cclxuICAqL1xyXG4gIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgdGhpcy5fcGx1Z2luSW5mbyA9IHBhcmFtcy5wbHVnaW5JbmZvO1xyXG4gICAgdGhpcy4jb25TdGF0dXNDaGFuZ2VkID0gcGFyYW1zLm9uU3RhdHVzQ2hhbmdlZDtcclxuICAgIHRoaXMuc2V0RGV2aWNlU3RhdHVzKERFVklDRV9TVEFUVVMuSU5JVClcclxuICB9XHJcbiAgXHJcbiAgZ2V0IGRldmljZUlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BsdWdpbkluZm8uUGx1Z2luSWQ7XHJcbiAgfVxyXG4gIFxyXG4gIGdldCBwbHVnaW5OYW1lKCkge1xyXG5cdCAgcmV0dXJuIHRoaXMuX3BsdWdpbkluZm8uUGx1Z2luTmFtZTtcclxuICB9XHJcbiAgXHJcbiAgZ2V0IGljb25OYW1lKCkge1xyXG5cdCAgcmV0dXJuIHRoaXMuX3BsdWdpbkluZm8uSWNvbk5hbWU7XHJcbiAgfVxyXG4gIFxyXG4gIGdldCBjbGFzc0FsaWFzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3BsdWdpbkluZm8uRHJpdmVyQ2xhc3NBbGlhcztcclxuICB9XHJcblxyXG4gIGdldCBkZXZpY2VBbGlhcygpIHtcclxuICAgIHJldHVybiB0aGlzLl9wbHVnaW5JbmZvLkRldmljZUFsaWFzO1xyXG4gIH1cclxuICBcclxuICBnZXQgZHJpdmVyVHlwZSgpIHtcclxuXHQgIHJldHVybiB0aGlzLl9wbHVnaW5JbmZvLkRyaXZlclR5cGU7XHJcbiAgfVxyXG4gIFxyXG4gIGdldCBkZXZpY2VTdGF0dXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy4jZGV2aWNlU3RhdHVzO1xyXG4gIH1cclxuICBcclxuICBnZXQgZXJyb3JNZXNzYWdlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuI2Vycm9yTWVzc2FnZTtcclxuICB9XHJcblxyXG5cdHNldERldmljZVN0YXR1cyhuZXdTdGF0dXMpIHtcclxuXHRcdGlmICh0aGlzLiNkZXZpY2VTdGF0dXMgIT09IG5ld1N0YXR1cykge1xyXG5cdFx0XHR0aGlzLiNkZXZpY2VTdGF0dXMgPSBuZXdTdGF0dXM7XHJcblx0XHRcdGlmIChuZXdTdGF0dXMgPT09IERFVklDRV9TVEFUVVMuUkVBRFkpXHJcblx0XHRcdFx0dGhpcy4jZXJyb3JNZXNzYWdlID0gXCJcIjtcclxuXHRcdFx0ZWxzZSBpZiAobmV3U3RhdHVzID09PSBERVZJQ0VfU1RBVFVTLklOSVQpXHJcblx0XHRcdFx0dGhpcy4jZXJyb3JNZXNzYWdlID0gXCJJbml0aWFsaXppbmcuLi5cIjtcclxuXHJcblx0XHRcdHRoaXMuI3RyaWdnZXJTdGF0dXNDaGFuZ2VkRXZlbnQodGhpcy4jZGV2aWNlU3RhdHVzKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0I3RyaWdnZXJTdGF0dXNDaGFuZ2VkRXZlbnQoZGV2aWNlU3RhdHVzKSB7XHJcblx0XHRpZiAodGhpcy4jb25TdGF0dXNDaGFuZ2VkKSB7XHJcblx0XHRcdGxldCBldmVudCA9IHtcclxuXHRcdFx0XHRkZXZpY2VJZDogdGhpcy5kZXZpY2VJZCxcclxuXHRcdFx0XHRkcml2ZXJUeXBlOiB0aGlzLmRyaXZlclR5cGUsXHJcblx0XHRcdFx0ZGV2aWNlU3RhdHVzOiBkZXZpY2VTdGF0dXNcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLiNvblN0YXR1c0NoYW5nZWQoZXZlbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2V0RXJyb3IobWVzc2FnZSkge1xyXG5cdFx0aWYgKHRoaXMuI2Vycm9yTWVzc2FnZSAhPT0gbWVzc2FnZSkge1xyXG5cdFx0XHR0aGlzLiNlcnJvck1lc3NhZ2UgPSBtZXNzYWdlO1xyXG5cdFx0XHR0aGlzLnNldERldmljZVN0YXR1cyhERVZJQ0VfU1RBVFVTLkVSUk9SKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cmVmcmVzaFN0YXR1cygpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIlJlZnJlc2hTdGF0dXMgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZFwiKTtcclxuXHR9XHJcblx0XHJcblx0cmVzZXQoKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJSZXNldCBtZXRob2Qgbm90IGltcGxlbWVudGVkXCIpO1xyXG5cdH1cclxuXHRcclxuXHRhc3luYyBwZXJmb3JtTWFpbnRlbmFuY2UoKSB7XHJcblx0XHQvL1RvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzZXMgaWYgcmVxdWlyZWQuXHJcblx0fVxyXG5cdFxyXG5cdHRlc3QoKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUZXN0IG1ldGhvZCBub3QgaW1wbGVtZW50ZWRcIik7XHJcblx0fVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-device.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js":
/*!**************************************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CONNECTOR_STATUS\": () => (/* binding */ CONNECTOR_STATUS),\n/* harmony export */   \"DEVICE_STATUS\": () => (/* binding */ DEVICE_STATUS),\n/* harmony export */   \"DEVICE_TYPE\": () => (/* binding */ DEVICE_TYPE),\n/* harmony export */   \"PLUGIN_STATUS\": () => (/* binding */ PLUGIN_STATUS)\n/* harmony export */ });\nconst DEVICE_STATUS = { \r\n  INIT: \"INITIALIZING\",\r\n  READY: \"READY\",\r\n  ERROR: \"ERROR\"\r\n}\r\n\r\nconst CONNECTOR_STATUS = { \r\n  INIT: \"INITIALIZING\",\r\n  READY: \"READY\",\r\n  ERROR: \"ERROR\"\r\n}\r\n\r\nconst DEVICE_TYPE = { \r\n  PRINTER: 1,\r\n  EXT_PAY_DEVICE: 6,\r\n  READER: 7,\r\n  DEVICE_CONNECTOR: 13\r\n}\r\n\r\nconst PLUGIN_STATUS = Object.freeze({\r\n  DISABLED: \"DISABLED\",\r\n  ACTIVE: \"ACTIVE\",\r\n  DOWNLOADING: \"DOWNLOADING\",\r\n  WARNING: \"WARNING\",\r\n  ERROR: \"ERROR\"\r\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLW1vZGVsLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi8uLi8uLi8uLi8uLi9Qa2dLaW9za0pTL3dlYi1tb2R1bGVzL2NvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tbW9kZWwuanM/NWYxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgREVWSUNFX1NUQVRVUyA9IHsgXHJcbiAgSU5JVDogXCJJTklUSUFMSVpJTkdcIixcclxuICBSRUFEWTogXCJSRUFEWVwiLFxyXG4gIEVSUk9SOiBcIkVSUk9SXCJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IENPTk5FQ1RPUl9TVEFUVVMgPSB7IFxyXG4gIElOSVQ6IFwiSU5JVElBTElaSU5HXCIsXHJcbiAgUkVBRFk6IFwiUkVBRFlcIixcclxuICBFUlJPUjogXCJFUlJPUlwiXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERVZJQ0VfVFlQRSA9IHsgXHJcbiAgUFJJTlRFUjogMSxcclxuICBFWFRfUEFZX0RFVklDRTogNixcclxuICBSRUFERVI6IDcsXHJcbiAgREVWSUNFX0NPTk5FQ1RPUjogMTNcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFBMVUdJTl9TVEFUVVMgPSBPYmplY3QuZnJlZXplKHtcclxuICBESVNBQkxFRDogXCJESVNBQkxFRFwiLFxyXG4gIEFDVElWRTogXCJBQ1RJVkVcIixcclxuICBET1dOTE9BRElORzogXCJET1dOTE9BRElOR1wiLFxyXG4gIFdBUk5JTkc6IFwiV0FSTklOR1wiLFxyXG4gIEVSUk9SOiBcIkVSUk9SXCJcclxufSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-payment.js":
/*!****************************************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-payment.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DMPayment\": () => (/* binding */ DMPayment)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_device__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-device */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-device.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\n\r\nclass DMPayment extends _common_script_device_manager_dm_device__WEBPACK_IMPORTED_MODULE_0__.DMDevice { \r\n\t_transactionTimeout = 90000;\r\n\t\r\n  get deviceType() {\r\n    return _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_TYPE.EXT_PAY_DEVICE;\r\n  }\r\n  \r\n  get paymentTransactionTimeout() {\r\n    return this._transactionTimeout;\r\n  }\r\n  \r\n  get paymentMethodIDs() {\r\n    return this._pluginInfo.PaymentMethodIDs;\r\n  }\r\n \r\n  pay(currency, amount, transactionRef, deviceAlias) {\r\n\t\tthrow new Error(\"Pay method must be implemented in extending class\");\r\n  }\r\n  \r\n \tvoid(currency, salePayment, transactionRef, deviceAlias) {\r\n\t\tthrow new Error(\"Void method must be implemented in extending class\");\r\n\t}\r\n\r\n  refund(currency, amount, transactionRef, deviceAlias) {\r\n\t\tthrow new Error(\"Refund method must be implemented in extending class\");\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLXBheW1lbnQuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1FO0FBQ0U7QUFDckU7QUFDTyx3QkFBd0IsNkVBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4RkFBMEI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi8uLi8uLi8uLi8uLi9Qa2dLaW9za0pTL3dlYi1tb2R1bGVzL2NvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tcGF5bWVudC5qcz82NDRjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERNRGV2aWNlIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tZGV2aWNlJztcclxuaW1wb3J0IHsgREVWSUNFX1RZUEUgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1tb2RlbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgRE1QYXltZW50IGV4dGVuZHMgRE1EZXZpY2UgeyBcclxuXHRfdHJhbnNhY3Rpb25UaW1lb3V0ID0gOTAwMDA7XHJcblx0XHJcbiAgZ2V0IGRldmljZVR5cGUoKSB7XHJcbiAgICByZXR1cm4gREVWSUNFX1RZUEUuRVhUX1BBWV9ERVZJQ0U7XHJcbiAgfVxyXG4gIFxyXG4gIGdldCBwYXltZW50VHJhbnNhY3Rpb25UaW1lb3V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uVGltZW91dDtcclxuICB9XHJcbiAgXHJcbiAgZ2V0IHBheW1lbnRNZXRob2RJRHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGx1Z2luSW5mby5QYXltZW50TWV0aG9kSURzO1xyXG4gIH1cclxuIFxyXG4gIHBheShjdXJyZW5jeSwgYW1vdW50LCB0cmFuc2FjdGlvblJlZiwgZGV2aWNlQWxpYXMpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIlBheSBtZXRob2QgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBleHRlbmRpbmcgY2xhc3NcIik7XHJcbiAgfVxyXG4gIFxyXG4gXHR2b2lkKGN1cnJlbmN5LCBzYWxlUGF5bWVudCwgdHJhbnNhY3Rpb25SZWYsIGRldmljZUFsaWFzKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJWb2lkIG1ldGhvZCBtdXN0IGJlIGltcGxlbWVudGVkIGluIGV4dGVuZGluZyBjbGFzc1wiKTtcclxuXHR9XHJcblxyXG4gIHJlZnVuZChjdXJyZW5jeSwgYW1vdW50LCB0cmFuc2FjdGlvblJlZiwgZGV2aWNlQWxpYXMpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIlJlZnVuZCBtZXRob2QgbXVzdCBiZSBpbXBsZW1lbnRlZCBpbiBleHRlbmRpbmcgY2xhc3NcIik7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-payment.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-printer.js":
/*!****************************************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-printer.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DMPrinter\": () => (/* binding */ DMPrinter)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_device__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-device */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-device.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\n\r\nclass DMPrinter extends _common_script_device_manager_dm_device__WEBPACK_IMPORTED_MODULE_0__.DMDevice { \r\n  _canReadMediaCodes = false;\r\n  _isVirtual = false;\r\n\r\n  get deviceType() {\r\n    return _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_TYPE.PRINTER;\r\n  }\r\n  \r\n  get canReadMediaCodes() {\r\n    return this._canReadMediaCodes;\r\n  }\r\n\r\n  get isVirtual() {\r\n    return this._isVirtual;\r\n  }\r\n  \r\n  processDoc(doc, docEditorType) {\r\n\t\tthrow new Error(\"processDoc not supported by \" + this.pluginName);\r\n  }\r\n  \r\n  processReceipt(receiptPrintTemplate) {\r\n\t\tthrow new Error(\"processReceipt not supported by \" + this.pluginName);\r\n  }\r\n\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLXByaW50ZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1FO0FBQ0U7QUFDckU7QUFDTyx3QkFBd0IsNkVBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVGQUFtQjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uLy4uLy4uLy4uLy4uL1BrZ0tpb3NrSlMvd2ViLW1vZHVsZXMvY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1wcmludGVyLmpzP2E0ODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRE1EZXZpY2UgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1kZXZpY2UnO1xyXG5pbXBvcnQgeyBERVZJQ0VfVFlQRSB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLW1vZGVsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBETVByaW50ZXIgZXh0ZW5kcyBETURldmljZSB7IFxyXG4gIF9jYW5SZWFkTWVkaWFDb2RlcyA9IGZhbHNlO1xyXG4gIF9pc1ZpcnR1YWwgPSBmYWxzZTtcclxuXHJcbiAgZ2V0IGRldmljZVR5cGUoKSB7XHJcbiAgICByZXR1cm4gREVWSUNFX1RZUEUuUFJJTlRFUjtcclxuICB9XHJcbiAgXHJcbiAgZ2V0IGNhblJlYWRNZWRpYUNvZGVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhblJlYWRNZWRpYUNvZGVzO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGlzVmlydHVhbCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc1ZpcnR1YWw7XHJcbiAgfVxyXG4gIFxyXG4gIHByb2Nlc3NEb2MoZG9jLCBkb2NFZGl0b3JUeXBlKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJwcm9jZXNzRG9jIG5vdCBzdXBwb3J0ZWQgYnkgXCIgKyB0aGlzLnBsdWdpbk5hbWUpO1xyXG4gIH1cclxuICBcclxuICBwcm9jZXNzUmVjZWlwdChyZWNlaXB0UHJpbnRUZW1wbGF0ZSkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwicHJvY2Vzc1JlY2VpcHQgbm90IHN1cHBvcnRlZCBieSBcIiArIHRoaXMucGx1Z2luTmFtZSk7XHJcbiAgfVxyXG5cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-printer.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-reader.js":
/*!***************************************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-reader.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DMReader\": () => (/* binding */ DMReader)\n/* harmony export */ });\n/* harmony import */ var _dm_device__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dm-device */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-device.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\n\r\nclass DMReader extends _dm_device__WEBPACK_IMPORTED_MODULE_0__.DMDevice { \r\n  onMediaRead;\r\n  \r\n  get deviceType() {\r\n    return _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_TYPE.READER;\r\n  }\r\n  \r\n  startRead() {}\r\n  stopRead() {}\r\n  \r\n  _triggerMediaRead(read) {\r\n    if (this.onMediaRead)\r\n      this.onMediaRead(read);\r\n\r\n    $(document).trigger(\"kiosk-media-read\", read);\r\n  }\r\n\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLXJlYWRlci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBdUM7QUFDOEI7QUFDckU7QUFDTyx1QkFBdUIsZ0RBQVE7QUFDdEM7QUFDQTtBQUNBO0FBQ0EsV0FBVyxzRkFBa0I7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi8uLi8uLi8uLi8uLi9Qa2dLaW9za0pTL3dlYi1tb2R1bGVzL2NvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tcmVhZGVyLmpzP2MzMWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRE1EZXZpY2UgfSBmcm9tICcuL2RtLWRldmljZSc7XHJcbmltcG9ydCB7IERFVklDRV9UWVBFIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tbW9kZWwnO1xyXG5cclxuZXhwb3J0IGNsYXNzIERNUmVhZGVyIGV4dGVuZHMgRE1EZXZpY2UgeyBcclxuICBvbk1lZGlhUmVhZDtcclxuICBcclxuICBnZXQgZGV2aWNlVHlwZSgpIHtcclxuICAgIHJldHVybiBERVZJQ0VfVFlQRS5SRUFERVI7XHJcbiAgfVxyXG4gIFxyXG4gIHN0YXJ0UmVhZCgpIHt9XHJcbiAgc3RvcFJlYWQoKSB7fVxyXG4gIFxyXG4gIF90cmlnZ2VyTWVkaWFSZWFkKHJlYWQpIHtcclxuICAgIGlmICh0aGlzLm9uTWVkaWFSZWFkKVxyXG4gICAgICB0aGlzLm9uTWVkaWFSZWFkKHJlYWQpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJraW9zay1tZWRpYS1yZWFkXCIsIHJlYWQpO1xyXG4gIH1cclxuXHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-reader.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/errors.js":
/*!*********************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/errors.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ECCPaymentError\": () => (/* binding */ ECCPaymentError),\n/* harmony export */   \"EPaymentError\": () => (/* binding */ EPaymentError),\n/* harmony export */   \"EPrintError\": () => (/* binding */ EPrintError),\n/* harmony export */   \"ESnAppError\": () => (/* binding */ ESnAppError),\n/* harmony export */   \"PAYMENT_ERROR\": () => (/* binding */ PAYMENT_ERROR)\n/* harmony export */ });\nclass ESnAppError extends Error {\r\n\t#errorCode;\r\n\t\r\n\tconstructor(message, errorCode) {\r\n\t\tsuper(message);\r\n\t\tthis.name = this.constructor.name;\r\n\t\tthis.#errorCode = errorCode;\r\n\t}\r\n\t\r\n  static getClassName() {\r\n    return this.name;\r\n  }\r\n  \r\n  static isSameClass(e) {\r\n    return e.constructor.name === this.name;\r\n  }\r\n\t\r\n\tget errorCode() {\r\n\t\treturn this.#errorCode;\r\n\t}\r\n}\r\n\r\nclass ECCPaymentError extends ESnAppError {\r\n\t#processorResult;\r\n\r\n\tconstructor(message, errorCode, processorResult) {\r\n\t\tsuper(message, errorCode);\r\n\t\tthis.#processorResult = processorResult;\r\n\t}\t\r\n\t\r\n\tget processorResult() {\r\n\t\treturn this.#processorResult;\r\n\t}\r\n}\r\n\r\nclass EPaymentError extends ESnAppError {\r\n\t#paymentResult;\r\n\r\n\tconstructor(message, errorCode, paymentResult) {\r\n\t\tsuper(message, errorCode);\r\n\t\tthis.#paymentResult = paymentResult;\r\n\t}\t\r\n\t\r\n\tget paymentResult() {\r\n\t\treturn this.#paymentResult;\r\n\t}\r\n\r\n}\r\n\r\nclass EPrintError extends Error {\r\n\t#printedMediaList;\r\n\r\n\tconstructor(message, printedMediaList) {\r\n\t\tsuper(message);\r\n\t\tthis.#printedMediaList = printedMediaList;\r\n\t}\t\r\n\t\r\n\tget printedMediaList() {\r\n\t\treturn this.#printedMediaList;\r\n\t}\r\n}\r\n\r\nconst PAYMENT_ERROR = { \r\n  ABORT: \"ABORT\",\r\n  FAILED: \"FAILED\"\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L2Vycm9ycy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uLy4uLy4uLy4uLy4uL1BrZ0tpb3NrSlMvd2ViLW1vZHVsZXMvY29tbW9uLXNjcmlwdC9lcnJvcnMuanM/NTI2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgRVNuQXBwRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcblx0I2Vycm9yQ29kZTtcclxuXHRcclxuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBlcnJvckNvZGUpIHtcclxuXHRcdHN1cGVyKG1lc3NhZ2UpO1xyXG5cdFx0dGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xyXG5cdFx0dGhpcy4jZXJyb3JDb2RlID0gZXJyb3JDb2RlO1xyXG5cdH1cclxuXHRcclxuICBzdGF0aWMgZ2V0Q2xhc3NOYW1lKCkge1xyXG4gICAgcmV0dXJuIHRoaXMubmFtZTtcclxuICB9XHJcbiAgXHJcbiAgc3RhdGljIGlzU2FtZUNsYXNzKGUpIHtcclxuICAgIHJldHVybiBlLmNvbnN0cnVjdG9yLm5hbWUgPT09IHRoaXMubmFtZTtcclxuICB9XHJcblx0XHJcblx0Z2V0IGVycm9yQ29kZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLiNlcnJvckNvZGU7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRUNDUGF5bWVudEVycm9yIGV4dGVuZHMgRVNuQXBwRXJyb3Ige1xyXG5cdCNwcm9jZXNzb3JSZXN1bHQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yQ29kZSwgcHJvY2Vzc29yUmVzdWx0KSB7XHJcblx0XHRzdXBlcihtZXNzYWdlLCBlcnJvckNvZGUpO1xyXG5cdFx0dGhpcy4jcHJvY2Vzc29yUmVzdWx0ID0gcHJvY2Vzc29yUmVzdWx0O1xyXG5cdH1cdFxyXG5cdFxyXG5cdGdldCBwcm9jZXNzb3JSZXN1bHQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy4jcHJvY2Vzc29yUmVzdWx0O1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVQYXltZW50RXJyb3IgZXh0ZW5kcyBFU25BcHBFcnJvciB7XHJcblx0I3BheW1lbnRSZXN1bHQ7XHJcblxyXG5cdGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGVycm9yQ29kZSwgcGF5bWVudFJlc3VsdCkge1xyXG5cdFx0c3VwZXIobWVzc2FnZSwgZXJyb3JDb2RlKTtcclxuXHRcdHRoaXMuI3BheW1lbnRSZXN1bHQgPSBwYXltZW50UmVzdWx0O1xyXG5cdH1cdFxyXG5cdFxyXG5cdGdldCBwYXltZW50UmVzdWx0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI3BheW1lbnRSZXN1bHQ7XHJcblx0fVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEVQcmludEVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG5cdCNwcmludGVkTWVkaWFMaXN0O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihtZXNzYWdlLCBwcmludGVkTWVkaWFMaXN0KSB7XHJcblx0XHRzdXBlcihtZXNzYWdlKTtcclxuXHRcdHRoaXMuI3ByaW50ZWRNZWRpYUxpc3QgPSBwcmludGVkTWVkaWFMaXN0O1xyXG5cdH1cdFxyXG5cdFxyXG5cdGdldCBwcmludGVkTWVkaWFMaXN0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI3ByaW50ZWRNZWRpYUxpc3Q7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgUEFZTUVOVF9FUlJPUiA9IHsgXHJcbiAgQUJPUlQ6IFwiQUJPUlRcIixcclxuICBGQUlMRUQ6IFwiRkFJTEVEXCJcclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/errors.js\n");

/***/ }),

/***/ "../../../../../PkgKioskJS/web-modules/common-script/utils.js":
/*!********************************************************************!*\
  !*** ../../../../../PkgKioskJS/web-modules/common-script/utils.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Utils\": () => (/* binding */ Utils)\n/* harmony export */ });\nclass Utils {\r\n\tstatic beautifyJSONString(str) {\r\n\t\treturn JSON.stringify(str, null, 4)\r\n\t}\t\r\n\r\n\tstatic decodeBase64(str) {\r\n\t\tif (str[str.length-1] === \"=\")\r\n    \tstr = str.slice(0,-1);\r\n\t\treturn atob(str);\r\n\t}\r\n\r\n\tstatic encodeBase64(str) {\r\n\t\treturn btoa(str);\r\n\t}\r\n\t\r\n\tstatic createUUID() {\r\n    let dt = new Date().getTime();\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n      let r = (dt + Math.random() * 16) % 16 | 0;\r\n      dt = Math.floor(dt / 16);\r\n      return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n    });\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vLi4vLi4vLi4vUGtnS2lvc2tKUy93ZWItbW9kdWxlcy9jb21tb24tc2NyaXB0L3V0aWxzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uLy4uLy4uLy4uLy4uL1BrZ0tpb3NrSlMvd2ViLW1vZHVsZXMvY29tbW9uLXNjcmlwdC91dGlscy5qcz9jZjZiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBVdGlscyB7XHJcblx0c3RhdGljIGJlYXV0aWZ5SlNPTlN0cmluZyhzdHIpIHtcclxuXHRcdHJldHVybiBKU09OLnN0cmluZ2lmeShzdHIsIG51bGwsIDQpXHJcblx0fVx0XHJcblxyXG5cdHN0YXRpYyBkZWNvZGVCYXNlNjQoc3RyKSB7XHJcblx0XHRpZiAoc3RyW3N0ci5sZW5ndGgtMV0gPT09IFwiPVwiKVxyXG4gICAgXHRzdHIgPSBzdHIuc2xpY2UoMCwtMSk7XHJcblx0XHRyZXR1cm4gYXRvYihzdHIpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGVuY29kZUJhc2U2NChzdHIpIHtcclxuXHRcdHJldHVybiBidG9hKHN0cik7XHJcblx0fVxyXG5cdFxyXG5cdHN0YXRpYyBjcmVhdGVVVUlEKCkge1xyXG4gICAgbGV0IGR0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XHJcbiAgICAgIGxldCByID0gKGR0ICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcclxuICAgICAgZHQgPSBNYXRoLmZsb29yKGR0IC8gMTYpO1xyXG4gICAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KSkudG9TdHJpbmcoMTYpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../../../../../PkgKioskJS/web-modules/common-script/utils.js\n");

/***/ }),

/***/ "../script/roto-device-factory.js":
/*!****************************************!*\
  !*** ../script/roto-device-factory.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"factoryCreateDeviceInstance\": () => (/* binding */ factoryCreateDeviceInstance)\n/* harmony export */ });\n/* harmony import */ var _roto_prn_receipt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-prn-receipt */ \"../script/roto-prn-receipt.js\");\n/* harmony import */ var _roto_prn_ticket__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./roto-prn-ticket */ \"../script/roto-prn-ticket.js\");\n/* harmony import */ var _roto_rdr_barcode__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./roto-rdr-barcode */ \"../script/roto-rdr-barcode.js\");\n/* harmony import */ var _roto_rdr_nfc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./roto-rdr-nfc */ \"../script/roto-rdr-nfc.js\");\n/* harmony import */ var _roto_pay_cc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./roto-pay-cc */ \"../script/roto-pay-cc.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst DEVICE_CLASSES = new Map();\r\n\r\nfunction factoryCreateDeviceInstance(params, connector) {\r\n  let clazz = DEVICE_CLASSES.get(params.pluginInfo.DriverClassAlias);\r\n  \r\n  if (clazz == null)\r\n    throw new Error(\"Unknown device: \" + params.pluginInfo.DriverClassAlias);\r\n  else\r\n    return new clazz(params, connector);\r\n}\r\n\r\nfunction registerDeviceClass(name, clazz) {\r\n  DEVICE_CLASSES.set(name, clazz);\r\n}\r\n\r\nregisterDeviceClass(_roto_prn_receipt__WEBPACK_IMPORTED_MODULE_0__.ReceiptPrinter.classAlias, _roto_prn_receipt__WEBPACK_IMPORTED_MODULE_0__.ReceiptPrinter);\r\nregisterDeviceClass(_roto_prn_ticket__WEBPACK_IMPORTED_MODULE_1__.TicketPrinter.classAlias, _roto_prn_ticket__WEBPACK_IMPORTED_MODULE_1__.TicketPrinter);\r\nregisterDeviceClass(_roto_rdr_barcode__WEBPACK_IMPORTED_MODULE_2__.BarcodeReader.classAlias, _roto_rdr_barcode__WEBPACK_IMPORTED_MODULE_2__.BarcodeReader);\r\nregisterDeviceClass(_roto_rdr_nfc__WEBPACK_IMPORTED_MODULE_3__.NfcReader.classAlias, _roto_rdr_nfc__WEBPACK_IMPORTED_MODULE_3__.NfcReader);\r\nregisterDeviceClass(_roto_pay_cc__WEBPACK_IMPORTED_MODULE_4__.CreditCardPayment.classAlias, _roto_pay_cc__WEBPACK_IMPORTED_MODULE_4__.CreditCardPayment);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tZGV2aWNlLWZhY3RvcnkuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9EO0FBQ0Y7QUFDQztBQUNSO0FBQ087QUFDbEQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0VBQXlCLEVBQUUsNkRBQWM7QUFDN0Qsb0JBQW9CLHNFQUF3QixFQUFFLDJEQUFhO0FBQzNELG9CQUFvQix1RUFBd0IsRUFBRSw0REFBYTtBQUMzRCxvQkFBb0IsK0RBQW9CLEVBQUUsb0RBQVM7QUFDbkQsb0JBQW9CLHNFQUE0QixFQUFFLDJEQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uL3NjcmlwdC9yb3RvLWRldmljZS1mYWN0b3J5LmpzP2Y2OGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVjZWlwdFByaW50ZXIgfSBmcm9tICcuL3JvdG8tcHJuLXJlY2VpcHQnO1xyXG5pbXBvcnQgeyBUaWNrZXRQcmludGVyIH0gZnJvbSAnLi9yb3RvLXBybi10aWNrZXQnO1xyXG5pbXBvcnQgeyBCYXJjb2RlUmVhZGVyIH0gZnJvbSAnLi9yb3RvLXJkci1iYXJjb2RlJztcclxuaW1wb3J0IHsgTmZjUmVhZGVyIH0gZnJvbSAnLi9yb3RvLXJkci1uZmMnO1xyXG5pbXBvcnQgeyBDcmVkaXRDYXJkUGF5bWVudCB9IGZyb20gJy4vcm90by1wYXktY2MnO1xyXG5cclxuY29uc3QgREVWSUNFX0NMQVNTRVMgPSBuZXcgTWFwKCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZmFjdG9yeUNyZWF0ZURldmljZUluc3RhbmNlKHBhcmFtcywgY29ubmVjdG9yKSB7XHJcbiAgbGV0IGNsYXp6ID0gREVWSUNFX0NMQVNTRVMuZ2V0KHBhcmFtcy5wbHVnaW5JbmZvLkRyaXZlckNsYXNzQWxpYXMpO1xyXG4gIFxyXG4gIGlmIChjbGF6eiA9PSBudWxsKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBkZXZpY2U6IFwiICsgcGFyYW1zLnBsdWdpbkluZm8uRHJpdmVyQ2xhc3NBbGlhcyk7XHJcbiAgZWxzZVxyXG4gICAgcmV0dXJuIG5ldyBjbGF6eihwYXJhbXMsIGNvbm5lY3Rvcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyRGV2aWNlQ2xhc3MobmFtZSwgY2xhenopIHtcclxuICBERVZJQ0VfQ0xBU1NFUy5zZXQobmFtZSwgY2xhenopO1xyXG59XHJcblxyXG5yZWdpc3RlckRldmljZUNsYXNzKFJlY2VpcHRQcmludGVyLmNsYXNzQWxpYXMsIFJlY2VpcHRQcmludGVyKTtcclxucmVnaXN0ZXJEZXZpY2VDbGFzcyhUaWNrZXRQcmludGVyLmNsYXNzQWxpYXMsIFRpY2tldFByaW50ZXIpO1xyXG5yZWdpc3RlckRldmljZUNsYXNzKEJhcmNvZGVSZWFkZXIuY2xhc3NBbGlhcywgQmFyY29kZVJlYWRlcik7XHJcbnJlZ2lzdGVyRGV2aWNlQ2xhc3MoTmZjUmVhZGVyLmNsYXNzQWxpYXMsIE5mY1JlYWRlcik7XHJcbnJlZ2lzdGVyRGV2aWNlQ2xhc3MoQ3JlZGl0Q2FyZFBheW1lbnQuY2xhc3NBbGlhcywgQ3JlZGl0Q2FyZFBheW1lbnQpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../script/roto-device-factory.js\n");

/***/ }),

/***/ "../script/roto-device-manager.js":
/*!****************************************!*\
  !*** ../script/roto-device-manager.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RototypeDeviceManager\": () => (/* binding */ RototypeDeviceManager)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_device_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/device-manager */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/device-manager.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n/* harmony import */ var _roto_device_factory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./roto-device-factory */ \"../script/roto-device-factory.js\");\n/* harmony import */ var _services_roto_service_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/roto-service-client */ \"../script/services/roto-service-client.js\");\n/* harmony import */ var _services_roto_service_factory__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./services/roto-service-factory */ \"../script/services/roto-service-factory.js\");\n/* harmony import */ var _services_roto_srv_barcode_reader__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./services/roto-srv-barcode-reader */ \"../script/services/roto-srv-barcode-reader.js\");\n/* harmony import */ var _services_roto_srv_nfc_reader__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./services/roto-srv-nfc-reader */ \"../script/services/roto-srv-nfc-reader.js\");\n/* harmony import */ var _services_roto_srv_ticket_printer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./services/roto-srv-ticket-printer */ \"../script/services/roto-srv-ticket-printer.js\");\n/* harmony import */ var _services_roto_srv_receipt_printer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./services/roto-srv-receipt-printer */ \"../script/services/roto-srv-receipt-printer.js\");\n/* harmony import */ var _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./services/roto-srv-lights */ \"../script/services/roto-srv-lights.js\");\n/* harmony import */ var _services_roto_srv_auxiliaries__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./services/roto-srv-auxiliaries */ \"../script/services/roto-srv-auxiliaries.js\");\n/* harmony import */ var _services_roto_srv_cc_pay__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./services/roto-srv-cc-pay */ \"../script/services/roto-srv-cc-pay.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass RototypeDeviceManager extends _common_script_device_manager_device_manager__WEBPACK_IMPORTED_MODULE_0__.DeviceManagerBase {\r\n  #serviceURL;\r\n  #serviceClient;\r\n  #services = [];\r\n \r\n  onBarcodeStatusChange;\r\n  onNFCStatusChange;\r\n  onTckStatusChange;\r\n  onReceiptStatusChange;\r\n  onLightsStatusChange;\r\n  onAuxiliariesStatusChange;\r\n  onCCPayStatusChange;\r\n\r\n  srvBarcodeReader;\r\n  srvNFCReader;\r\n  srvTicketPrinter;\r\n  srvReceiptPrinter;\r\n  srvLights;\r\n  srvAuxiliaries;\r\n  srvCCPay;\r\n\r\n  constructor() {\r\n    super(\"Rototype client\");\r\n    this.#serviceClient = new _services_roto_service_client__WEBPACK_IMPORTED_MODULE_3__.RotoServiceClient(this._deviceManagerName);\r\n    this.#serviceClient.onSocketOpen = e => this.#onSocketOpen(e);\r\n    this.#serviceClient.onSocketError = e => this.#onSocketError(e);\r\n  }\r\n  \r\n  init(workstation) { \r\n    super.init(workstation);\r\n\r\n    const found = workstation.PluginList.find(plg => plg.DriverType == 13);\r\n\r\n    let cfg;\r\n    if (!found || (found.PluginSettings === \"undefined\"))\r\n      cfg = {};\r\n    else\r\n      cfg = JSON.parse(found.PluginSettings);\r\n  \r\n    this.setDefaultConfigValues(cfg);\r\n    this.#serviceURL = cfg.ServiceURL + \":\" + cfg.ServicePort + \"/xfs4iot/v1.0\";\r\n    \r\n    this.connect();\r\n  }\r\n  \r\n  setDefaultConfigValues(cfg) {\r\n    if (!cfg.ServiceURL)\r\n      cfg.ServiceURL = \"ws://127.0.0.1\";\r\n    if (!cfg.ServicePort)\r\n      cfg.ServicePort = 5846;\r\n  }\r\n \r\n  connect() {\r\n    this.#serviceClient.connect(this.#serviceURL);\r\n  }\r\n  \r\n  close() {\r\n    this.#closeCurrentServices();\r\n    this.#serviceClient.close();\r\n  }\r\n\r\n  #closeCurrentServices() {\r\n    this.#services.forEach((service) => {\r\n      service.close();\r\n    });\r\n    this.#services = [];\r\n  }\r\n  \r\n  #onSocketOpen() {\r\n    this.#detectServices();\r\n//    this.setStatus(CONNECTOR_STATUS.READY);\r\n  }\r\n  \r\n  #onSocketError() {\r\n  \tthis.setError(\"WebSocket error\")\t\r\n  }\r\n\r\n  #detectServices() {\r\n    console.log('\\n[get services]');\r\n\r\n    let payload = {\r\n        timeout: 5000\r\n      };\r\n      \r\n    this.#serviceClient.executeCommand(\"ServicePublisher.GetServices\", payload)\r\n      .then(e => this.#newServicesAvailable(e))\r\n      .catch(e => console.error(e));\r\n\r\n//    this.#test_detectServices();\r\n  }\r\n  \r\n  #newServicesAvailable(payload) {\r\n    console.log(\"new services detected\")\r\n    this.#closeCurrentServices();\r\n    \r\n    payload.services.forEach((service) => {\r\n      console.log(service.serviceURI); \r\n      let svc = (0,_services_roto_service_factory__WEBPACK_IMPORTED_MODULE_4__.createServiceInstance)(service.serviceURI);\r\n      this.#services.push(svc);\r\n\r\n      if (svc instanceof _services_roto_srv_barcode_reader__WEBPACK_IMPORTED_MODULE_5__.SrvBarcodeReader)\r\n        this.#setSrvBarcodeReader(svc);        \r\n      else if (svc instanceof _services_roto_srv_nfc_reader__WEBPACK_IMPORTED_MODULE_6__.SrvNFCReader)\r\n        this.#setSrvNFCReader(svc);        \r\n      else if (svc instanceof _services_roto_srv_ticket_printer__WEBPACK_IMPORTED_MODULE_7__.SrvTicketPrinter)\r\n        this.#setSrvTicketPrinter(svc);        \r\n      else if (svc instanceof _services_roto_srv_receipt_printer__WEBPACK_IMPORTED_MODULE_8__.SrvReceiptPrinter)\r\n        this.#setSrvReceiptPrinter(svc);       \r\n      else if (svc instanceof _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_9__.SrvLights)\r\n        this.#setSrvLights(svc);       \r\n      else if (svc instanceof _services_roto_srv_auxiliaries__WEBPACK_IMPORTED_MODULE_10__.SrvAuxiliaries)\r\n        this.#setSrvAuxiliaries(svc);       \r\n      else if (svc instanceof _services_roto_srv_cc_pay__WEBPACK_IMPORTED_MODULE_11__.SrvCCPay)\r\n        this.#setSrvCCPay(svc);       \r\n\r\n      svc.connect();\r\n    });\r\n  }\r\n  \r\n  #setSrvBarcodeReader(svc) {\r\n    this.srvBarcodeReader = svc;\r\n    svc.onStatusChange = this.onBarcodeStatusChange;\r\n  }\r\n  \r\n  #setSrvNFCReader(svc) {\r\n    this.srvNFCReader = svc;\r\n    svc.onStatusChange = this.onNFCStatusChange;\r\n  }\r\n\r\n  #setSrvTicketPrinter(svc) {\r\n    this.srvTicketPrinter = svc;\r\n    svc.onStatusChange = this.onTckStatusChange;\r\n  }\r\n\r\n  #setSrvReceiptPrinter(svc) {\r\n    this.srvReceiptPrinter = svc;\r\n    svc.onStatusChange = this.onReceiptStatusChange;\r\n  }\r\n\r\n  #setSrvLights(svc) {\r\n    this.srvLights = svc;\r\n    svc.onStatusChange = this.onLightsStatusChange;\r\n  }\r\n\r\n  #setSrvAuxiliaries(svc) {\r\n    this.srvAuxiliaries = svc;\r\n    svc.onStatusChange = this.onAuxiliariesStatusChange;\r\n  }\r\n\r\n  #setSrvCCPay(svc) {\r\n    this.srvCCPay = svc;\r\n    svc.onStatusChange = this.onCCPayStatusChange;\r\n  }\r\n\r\n  lightOn(lightName, flashRate, color) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.srvLights)\r\n        reject(\"Service srvLights not available\")\r\n      else\r\n        this.srvLights.lightOn(lightName, flashRate, color)\r\n          .then(resolve)\r\n          .catch(reject);\r\n    });   \r\n  }\r\n  \r\n  lightOff(lightName) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.srvLights)\r\n        reject(\"Service srvLights not available\")\r\n      else\r\n        this.srvLights.lightOff(lightName)\r\n          .then(resolve)\r\n          .catch(reject);\r\n    });   \r\n  }\r\n\r\n  allLightsOff() {\r\n    if (this.srvLights)\r\n      return this.srvLights.allLightsOff();\r\n  }\r\n\r\n  _createDeviceInstance(params) {\r\n    return (0,_roto_device_factory__WEBPACK_IMPORTED_MODULE_2__.factoryCreateDeviceInstance)(params, this);\r\n  }\r\n  \r\n  #test_detectServices() {\r\n    let payload = {\r\n        completionCode: \"success\", \r\n        vendorName: \"KAL\", \r\n        services: [ \r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/BarcodeReader/\"}, \r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/Lights/\"}, \r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/Auxiliaries/\"}, \r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/TicketPrinter/\"}, \r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/ReceiptPrinter/\"}, \r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/CCPay/\"},\r\n          {serviceURI: \"ws://rototypedyn.dyndns.org:5846/xfs4iot/v1.0/NfcReader/\"}\r\n        ],\r\n        errorDescription: \"ok\"\r\n      };\r\n    \r\n    this.#newServicesAvailable(payload)\r\n  }\r\n\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tZGV2aWNlLW1hbmFnZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUFpRjtBQUNQO0FBQ047QUFDRDtBQUNLO0FBQ0Q7QUFDUjtBQUNRO0FBQ0U7QUFDakI7QUFDVTtBQUNYO0FBQ3ZEO0FBQ08sb0NBQW9DLDJGQUFpQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw0RUFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxRkFBcUI7QUFDckM7QUFDQTtBQUNBLHlCQUF5QiwrRUFBZ0I7QUFDekM7QUFDQSw4QkFBOEIsdUVBQVk7QUFDMUM7QUFDQSw4QkFBOEIsK0VBQWdCO0FBQzlDO0FBQ0EsOEJBQThCLGlGQUFpQjtBQUMvQztBQUNBLDhCQUE4QixnRUFBUztBQUN2QztBQUNBLDhCQUE4QiwyRUFBYztBQUM1QztBQUNBLDhCQUE4QixnRUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGlGQUEyQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsMkVBQTJFO0FBQ3RGLFdBQVcsb0VBQW9FO0FBQy9FLFdBQVcseUVBQXlFO0FBQ3BGLFdBQVcsMkVBQTJFO0FBQ3RGLFdBQVcsNEVBQTRFO0FBQ3ZGLFdBQVcsbUVBQW1FO0FBQzlFLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi9zY3JpcHQvcm90by1kZXZpY2UtbWFuYWdlci5qcz9mODM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERldmljZU1hbmFnZXJCYXNlIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZGV2aWNlLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBDT05ORUNUT1JfU1RBVFVTIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tbW9kZWwnO1xyXG5pbXBvcnQgeyBmYWN0b3J5Q3JlYXRlRGV2aWNlSW5zdGFuY2UgfSBmcm9tICcuL3JvdG8tZGV2aWNlLWZhY3RvcnknO1xyXG5pbXBvcnQgeyBSb3RvU2VydmljZUNsaWVudCB9IGZyb20gJy4vc2VydmljZXMvcm90by1zZXJ2aWNlLWNsaWVudCc7XHJcbmltcG9ydCB7IGNyZWF0ZVNlcnZpY2VJbnN0YW5jZSB9IGZyb20gJy4vc2VydmljZXMvcm90by1zZXJ2aWNlLWZhY3RvcnknO1xyXG5pbXBvcnQgeyBTcnZCYXJjb2RlUmVhZGVyIH0gIGZyb20gJy4vc2VydmljZXMvcm90by1zcnYtYmFyY29kZS1yZWFkZXInO1xyXG5pbXBvcnQgeyBTcnZORkNSZWFkZXIgfSAgZnJvbSAnLi9zZXJ2aWNlcy9yb3RvLXNydi1uZmMtcmVhZGVyJztcclxuaW1wb3J0IHsgU3J2VGlja2V0UHJpbnRlciB9ICBmcm9tICcuL3NlcnZpY2VzL3JvdG8tc3J2LXRpY2tldC1wcmludGVyJztcclxuaW1wb3J0IHsgU3J2UmVjZWlwdFByaW50ZXIgfSAgZnJvbSAnLi9zZXJ2aWNlcy9yb3RvLXNydi1yZWNlaXB0LXByaW50ZXInO1xyXG5pbXBvcnQgeyBTcnZMaWdodHMgfSAgZnJvbSAnLi9zZXJ2aWNlcy9yb3RvLXNydi1saWdodHMnO1xyXG5pbXBvcnQgeyBTcnZBdXhpbGlhcmllcyB9ICBmcm9tICcuL3NlcnZpY2VzL3JvdG8tc3J2LWF1eGlsaWFyaWVzJztcclxuaW1wb3J0IHsgU3J2Q0NQYXkgfSAgZnJvbSAnLi9zZXJ2aWNlcy9yb3RvLXNydi1jYy1wYXknO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJvdG90eXBlRGV2aWNlTWFuYWdlciBleHRlbmRzIERldmljZU1hbmFnZXJCYXNlIHtcclxuICAjc2VydmljZVVSTDtcclxuICAjc2VydmljZUNsaWVudDtcclxuICAjc2VydmljZXMgPSBbXTtcclxuIFxyXG4gIG9uQmFyY29kZVN0YXR1c0NoYW5nZTtcclxuICBvbk5GQ1N0YXR1c0NoYW5nZTtcclxuICBvblRja1N0YXR1c0NoYW5nZTtcclxuICBvblJlY2VpcHRTdGF0dXNDaGFuZ2U7XHJcbiAgb25MaWdodHNTdGF0dXNDaGFuZ2U7XHJcbiAgb25BdXhpbGlhcmllc1N0YXR1c0NoYW5nZTtcclxuICBvbkNDUGF5U3RhdHVzQ2hhbmdlO1xyXG5cclxuICBzcnZCYXJjb2RlUmVhZGVyO1xyXG4gIHNydk5GQ1JlYWRlcjtcclxuICBzcnZUaWNrZXRQcmludGVyO1xyXG4gIHNydlJlY2VpcHRQcmludGVyO1xyXG4gIHNydkxpZ2h0cztcclxuICBzcnZBdXhpbGlhcmllcztcclxuICBzcnZDQ1BheTtcclxuXHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcihcIlJvdG90eXBlIGNsaWVudFwiKTtcclxuICAgIHRoaXMuI3NlcnZpY2VDbGllbnQgPSBuZXcgUm90b1NlcnZpY2VDbGllbnQodGhpcy5fZGV2aWNlTWFuYWdlck5hbWUpO1xyXG4gICAgdGhpcy4jc2VydmljZUNsaWVudC5vblNvY2tldE9wZW4gPSBlID0+IHRoaXMuI29uU29ja2V0T3BlbihlKTtcclxuICAgIHRoaXMuI3NlcnZpY2VDbGllbnQub25Tb2NrZXRFcnJvciA9IGUgPT4gdGhpcy4jb25Tb2NrZXRFcnJvcihlKTtcclxuICB9XHJcbiAgXHJcbiAgaW5pdCh3b3Jrc3RhdGlvbikgeyBcclxuICAgIHN1cGVyLmluaXQod29ya3N0YXRpb24pO1xyXG5cclxuICAgIGNvbnN0IGZvdW5kID0gd29ya3N0YXRpb24uUGx1Z2luTGlzdC5maW5kKHBsZyA9PiBwbGcuRHJpdmVyVHlwZSA9PSAxMyk7XHJcblxyXG4gICAgbGV0IGNmZztcclxuICAgIGlmICghZm91bmQgfHwgKGZvdW5kLlBsdWdpblNldHRpbmdzID09PSBcInVuZGVmaW5lZFwiKSlcclxuICAgICAgY2ZnID0ge307XHJcbiAgICBlbHNlXHJcbiAgICAgIGNmZyA9IEpTT04ucGFyc2UoZm91bmQuUGx1Z2luU2V0dGluZ3MpO1xyXG4gIFxyXG4gICAgdGhpcy5zZXREZWZhdWx0Q29uZmlnVmFsdWVzKGNmZyk7XHJcbiAgICB0aGlzLiNzZXJ2aWNlVVJMID0gY2ZnLlNlcnZpY2VVUkwgKyBcIjpcIiArIGNmZy5TZXJ2aWNlUG9ydCArIFwiL3hmczRpb3QvdjEuMFwiO1xyXG4gICAgXHJcbiAgICB0aGlzLmNvbm5lY3QoKTtcclxuICB9XHJcbiAgXHJcbiAgc2V0RGVmYXVsdENvbmZpZ1ZhbHVlcyhjZmcpIHtcclxuICAgIGlmICghY2ZnLlNlcnZpY2VVUkwpXHJcbiAgICAgIGNmZy5TZXJ2aWNlVVJMID0gXCJ3czovLzEyNy4wLjAuMVwiO1xyXG4gICAgaWYgKCFjZmcuU2VydmljZVBvcnQpXHJcbiAgICAgIGNmZy5TZXJ2aWNlUG9ydCA9IDU4NDY7XHJcbiAgfVxyXG4gXHJcbiAgY29ubmVjdCgpIHtcclxuICAgIHRoaXMuI3NlcnZpY2VDbGllbnQuY29ubmVjdCh0aGlzLiNzZXJ2aWNlVVJMKTtcclxuICB9XHJcbiAgXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLiNjbG9zZUN1cnJlbnRTZXJ2aWNlcygpO1xyXG4gICAgdGhpcy4jc2VydmljZUNsaWVudC5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgI2Nsb3NlQ3VycmVudFNlcnZpY2VzKCkge1xyXG4gICAgdGhpcy4jc2VydmljZXMuZm9yRWFjaCgoc2VydmljZSkgPT4ge1xyXG4gICAgICBzZXJ2aWNlLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuI3NlcnZpY2VzID0gW107XHJcbiAgfVxyXG4gIFxyXG4gICNvblNvY2tldE9wZW4oKSB7XHJcbiAgICB0aGlzLiNkZXRlY3RTZXJ2aWNlcygpO1xyXG4vLyAgICB0aGlzLnNldFN0YXR1cyhDT05ORUNUT1JfU1RBVFVTLlJFQURZKTtcclxuICB9XHJcbiAgXHJcbiAgI29uU29ja2V0RXJyb3IoKSB7XHJcbiAgXHR0aGlzLnNldEVycm9yKFwiV2ViU29ja2V0IGVycm9yXCIpXHRcclxuICB9XHJcblxyXG4gICNkZXRlY3RTZXJ2aWNlcygpIHtcclxuICAgIGNvbnNvbGUubG9nKCdcXG5bZ2V0IHNlcnZpY2VzXScpO1xyXG5cclxuICAgIGxldCBwYXlsb2FkID0ge1xyXG4gICAgICAgIHRpbWVvdXQ6IDUwMDBcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICB0aGlzLiNzZXJ2aWNlQ2xpZW50LmV4ZWN1dGVDb21tYW5kKFwiU2VydmljZVB1Ymxpc2hlci5HZXRTZXJ2aWNlc1wiLCBwYXlsb2FkKVxyXG4gICAgICAudGhlbihlID0+IHRoaXMuI25ld1NlcnZpY2VzQXZhaWxhYmxlKGUpKVxyXG4gICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuXHJcbi8vICAgIHRoaXMuI3Rlc3RfZGV0ZWN0U2VydmljZXMoKTtcclxuICB9XHJcbiAgXHJcbiAgI25ld1NlcnZpY2VzQXZhaWxhYmxlKHBheWxvYWQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwibmV3IHNlcnZpY2VzIGRldGVjdGVkXCIpXHJcbiAgICB0aGlzLiNjbG9zZUN1cnJlbnRTZXJ2aWNlcygpO1xyXG4gICAgXHJcbiAgICBwYXlsb2FkLnNlcnZpY2VzLmZvckVhY2goKHNlcnZpY2UpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coc2VydmljZS5zZXJ2aWNlVVJJKTsgXHJcbiAgICAgIGxldCBzdmMgPSBjcmVhdGVTZXJ2aWNlSW5zdGFuY2Uoc2VydmljZS5zZXJ2aWNlVVJJKTtcclxuICAgICAgdGhpcy4jc2VydmljZXMucHVzaChzdmMpO1xyXG5cclxuICAgICAgaWYgKHN2YyBpbnN0YW5jZW9mIFNydkJhcmNvZGVSZWFkZXIpXHJcbiAgICAgICAgdGhpcy4jc2V0U3J2QmFyY29kZVJlYWRlcihzdmMpOyAgICAgICAgXHJcbiAgICAgIGVsc2UgaWYgKHN2YyBpbnN0YW5jZW9mIFNydk5GQ1JlYWRlcilcclxuICAgICAgICB0aGlzLiNzZXRTcnZORkNSZWFkZXIoc3ZjKTsgICAgICAgIFxyXG4gICAgICBlbHNlIGlmIChzdmMgaW5zdGFuY2VvZiBTcnZUaWNrZXRQcmludGVyKVxyXG4gICAgICAgIHRoaXMuI3NldFNydlRpY2tldFByaW50ZXIoc3ZjKTsgICAgICAgIFxyXG4gICAgICBlbHNlIGlmIChzdmMgaW5zdGFuY2VvZiBTcnZSZWNlaXB0UHJpbnRlcilcclxuICAgICAgICB0aGlzLiNzZXRTcnZSZWNlaXB0UHJpbnRlcihzdmMpOyAgICAgICBcclxuICAgICAgZWxzZSBpZiAoc3ZjIGluc3RhbmNlb2YgU3J2TGlnaHRzKVxyXG4gICAgICAgIHRoaXMuI3NldFNydkxpZ2h0cyhzdmMpOyAgICAgICBcclxuICAgICAgZWxzZSBpZiAoc3ZjIGluc3RhbmNlb2YgU3J2QXV4aWxpYXJpZXMpXHJcbiAgICAgICAgdGhpcy4jc2V0U3J2QXV4aWxpYXJpZXMoc3ZjKTsgICAgICAgXHJcbiAgICAgIGVsc2UgaWYgKHN2YyBpbnN0YW5jZW9mIFNydkNDUGF5KVxyXG4gICAgICAgIHRoaXMuI3NldFNydkNDUGF5KHN2Yyk7ICAgICAgIFxyXG5cclxuICAgICAgc3ZjLmNvbm5lY3QoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICAjc2V0U3J2QmFyY29kZVJlYWRlcihzdmMpIHtcclxuICAgIHRoaXMuc3J2QmFyY29kZVJlYWRlciA9IHN2YztcclxuICAgIHN2Yy5vblN0YXR1c0NoYW5nZSA9IHRoaXMub25CYXJjb2RlU3RhdHVzQ2hhbmdlO1xyXG4gIH1cclxuICBcclxuICAjc2V0U3J2TkZDUmVhZGVyKHN2Yykge1xyXG4gICAgdGhpcy5zcnZORkNSZWFkZXIgPSBzdmM7XHJcbiAgICBzdmMub25TdGF0dXNDaGFuZ2UgPSB0aGlzLm9uTkZDU3RhdHVzQ2hhbmdlO1xyXG4gIH1cclxuXHJcbiAgI3NldFNydlRpY2tldFByaW50ZXIoc3ZjKSB7XHJcbiAgICB0aGlzLnNydlRpY2tldFByaW50ZXIgPSBzdmM7XHJcbiAgICBzdmMub25TdGF0dXNDaGFuZ2UgPSB0aGlzLm9uVGNrU3RhdHVzQ2hhbmdlO1xyXG4gIH1cclxuXHJcbiAgI3NldFNydlJlY2VpcHRQcmludGVyKHN2Yykge1xyXG4gICAgdGhpcy5zcnZSZWNlaXB0UHJpbnRlciA9IHN2YztcclxuICAgIHN2Yy5vblN0YXR1c0NoYW5nZSA9IHRoaXMub25SZWNlaXB0U3RhdHVzQ2hhbmdlO1xyXG4gIH1cclxuXHJcbiAgI3NldFNydkxpZ2h0cyhzdmMpIHtcclxuICAgIHRoaXMuc3J2TGlnaHRzID0gc3ZjO1xyXG4gICAgc3ZjLm9uU3RhdHVzQ2hhbmdlID0gdGhpcy5vbkxpZ2h0c1N0YXR1c0NoYW5nZTtcclxuICB9XHJcblxyXG4gICNzZXRTcnZBdXhpbGlhcmllcyhzdmMpIHtcclxuICAgIHRoaXMuc3J2QXV4aWxpYXJpZXMgPSBzdmM7XHJcbiAgICBzdmMub25TdGF0dXNDaGFuZ2UgPSB0aGlzLm9uQXV4aWxpYXJpZXNTdGF0dXNDaGFuZ2U7XHJcbiAgfVxyXG5cclxuICAjc2V0U3J2Q0NQYXkoc3ZjKSB7XHJcbiAgICB0aGlzLnNydkNDUGF5ID0gc3ZjO1xyXG4gICAgc3ZjLm9uU3RhdHVzQ2hhbmdlID0gdGhpcy5vbkNDUGF5U3RhdHVzQ2hhbmdlO1xyXG4gIH1cclxuXHJcbiAgbGlnaHRPbihsaWdodE5hbWUsIGZsYXNoUmF0ZSwgY29sb3IpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGlmICghdGhpcy5zcnZMaWdodHMpXHJcbiAgICAgICAgcmVqZWN0KFwiU2VydmljZSBzcnZMaWdodHMgbm90IGF2YWlsYWJsZVwiKVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdGhpcy5zcnZMaWdodHMubGlnaHRPbihsaWdodE5hbWUsIGZsYXNoUmF0ZSwgY29sb3IpXHJcbiAgICAgICAgICAudGhlbihyZXNvbHZlKVxyXG4gICAgICAgICAgLmNhdGNoKHJlamVjdCk7XHJcbiAgICB9KTsgICBcclxuICB9XHJcbiAgXHJcbiAgbGlnaHRPZmYobGlnaHROYW1lKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuc3J2TGlnaHRzKVxyXG4gICAgICAgIHJlamVjdChcIlNlcnZpY2Ugc3J2TGlnaHRzIG5vdCBhdmFpbGFibGVcIilcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMuc3J2TGlnaHRzLmxpZ2h0T2ZmKGxpZ2h0TmFtZSlcclxuICAgICAgICAgIC50aGVuKHJlc29sdmUpXHJcbiAgICAgICAgICAuY2F0Y2gocmVqZWN0KTtcclxuICAgIH0pOyAgIFxyXG4gIH1cclxuXHJcbiAgYWxsTGlnaHRzT2ZmKCkge1xyXG4gICAgaWYgKHRoaXMuc3J2TGlnaHRzKVxyXG4gICAgICByZXR1cm4gdGhpcy5zcnZMaWdodHMuYWxsTGlnaHRzT2ZmKCk7XHJcbiAgfVxyXG5cclxuICBfY3JlYXRlRGV2aWNlSW5zdGFuY2UocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gZmFjdG9yeUNyZWF0ZURldmljZUluc3RhbmNlKHBhcmFtcywgdGhpcyk7XHJcbiAgfVxyXG4gIFxyXG4gICN0ZXN0X2RldGVjdFNlcnZpY2VzKCkge1xyXG4gICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgY29tcGxldGlvbkNvZGU6IFwic3VjY2Vzc1wiLCBcclxuICAgICAgICB2ZW5kb3JOYW1lOiBcIktBTFwiLCBcclxuICAgICAgICBzZXJ2aWNlczogWyBcclxuICAgICAgICAgIHtzZXJ2aWNlVVJJOiBcIndzOi8vcm90b3R5cGVkeW4uZHluZG5zLm9yZzo1ODQ2L3hmczRpb3QvdjEuMC9CYXJjb2RlUmVhZGVyL1wifSwgXHJcbiAgICAgICAgICB7c2VydmljZVVSSTogXCJ3czovL3JvdG90eXBlZHluLmR5bmRucy5vcmc6NTg0Ni94ZnM0aW90L3YxLjAvTGlnaHRzL1wifSwgXHJcbiAgICAgICAgICB7c2VydmljZVVSSTogXCJ3czovL3JvdG90eXBlZHluLmR5bmRucy5vcmc6NTg0Ni94ZnM0aW90L3YxLjAvQXV4aWxpYXJpZXMvXCJ9LCBcclxuICAgICAgICAgIHtzZXJ2aWNlVVJJOiBcIndzOi8vcm90b3R5cGVkeW4uZHluZG5zLm9yZzo1ODQ2L3hmczRpb3QvdjEuMC9UaWNrZXRQcmludGVyL1wifSwgXHJcbiAgICAgICAgICB7c2VydmljZVVSSTogXCJ3czovL3JvdG90eXBlZHluLmR5bmRucy5vcmc6NTg0Ni94ZnM0aW90L3YxLjAvUmVjZWlwdFByaW50ZXIvXCJ9LCBcclxuICAgICAgICAgIHtzZXJ2aWNlVVJJOiBcIndzOi8vcm90b3R5cGVkeW4uZHluZG5zLm9yZzo1ODQ2L3hmczRpb3QvdjEuMC9DQ1BheS9cIn0sXHJcbiAgICAgICAgICB7c2VydmljZVVSSTogXCJ3czovL3JvdG90eXBlZHluLmR5bmRucy5vcmc6NTg0Ni94ZnM0aW90L3YxLjAvTmZjUmVhZGVyL1wifVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgZXJyb3JEZXNjcmlwdGlvbjogXCJva1wiXHJcbiAgICAgIH07XHJcbiAgICBcclxuICAgIHRoaXMuI25ld1NlcnZpY2VzQXZhaWxhYmxlKHBheWxvYWQpXHJcbiAgfVxyXG5cclxufVxyXG5cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/roto-device-manager.js\n");

/***/ }),

/***/ "../script/roto-pay-cc.js":
/*!********************************!*\
  !*** ../script/roto-pay-cc.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"CreditCardPayment\": () => (/* binding */ CreditCardPayment)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_payment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-payment */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-payment.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n/* harmony import */ var _common_script_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @common-script/errors */ \"../../../../../PkgKioskJS/web-modules/common-script/errors.js\");\n/* harmony import */ var _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./services/roto-srv-lights */ \"../script/services/roto-srv-lights.js\");\n\r\n\r\n\r\n\r\n\r\nclass CreditCardPayment extends _common_script_device_manager_dm_payment__WEBPACK_IMPORTED_MODULE_0__.DMPayment {\r\n\t#cfg = {};\r\n\t\r\n  static get classAlias() {\r\n    return \"pay_roto_cc\";\r\n  }\r\n\r\n  constructor(params, connector) {\r\n    super(params);\r\n    this._transactionTimeout = 65000;\r\n    this.rototypeConnector = connector;\r\n   \tthis.rototypeConnector.onCCPayStatusChange = s => this.#deviceStatusChangeEvent(s);\r\n   \t\r\n    this.#cfg = JSON.parse(params.pluginInfo.PluginSettings);\r\n    if (!this.#cfg.TestMode)\r\n      this.#cfg.TestMode = false;\r\n  }\r\n  \r\n  #deviceStatusChangeEvent(svcStatus) {\r\n\t  let deviceOnline = svcStatus.common && ((svcStatus.common.device === \"online\") || (svcStatus.common.device === \"deviceBusy\"));\r\n\t  if (deviceOnline)\r\n\t\t\tthis.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_STATUS.READY);\r\n\t\telse\r\n\t\t\tthis.setError(`Status: ${svcStatus.common.device}`);\r\n  }\r\n\r\n\trefreshStatus() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvCCPay)\r\n\t\t\treturn this.rototypeConnector.srvCCPay.updateStatus();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to refresh status \" + this.pluginName);\r\n\t}\r\n\r\n\treset() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvCCPay)\r\n\t\t\treturn this.rototypeConnector.srvCCPay.reset();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to reset \" + this.pluginName);\r\n\t}\r\n\r\n \tasync performMaintenance() {\r\n\t\tawait this.#closeDay();\r\n\t\tawait this.reset();\r\n\t}\r\n\r\n\t#closeDay() {\r\n    let payload = {\r\n        timeout: 10000\r\n      };      \r\n \t\treturn this.rototypeConnector.srvCCPay.closeDay(payload);\t\t\r\n\t}\r\n\t\r\n  pay(currency, amount, transactionRef, deviceAlias) {\r\n    if (!this.rototypeConnector.srvCCPay) \r\n      throw new Error(\"Unable to find srvCCPay service\");\r\n    else {\r\n      this.rototypeConnector.lightOn(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_NAME.CREDIT_CARD, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.FLASH_RATE.SLOW, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_COLOR.BLUE);\r\n      this.rototypeConnector.lightOn(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_NAME.NFC_CREDIT_CARD, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.FLASH_RATE.SLOW, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_COLOR.BLUE);\r\n\t    let message = {\r\n\t        timeout: this._transactionTimeout - 10000,\r\n\t        currency: \"EUR\",\r\n\t        amount: this.#cfg.TestMode ? 0.01 : amount\r\n\t      };\r\n\t      \r\n   \t\treturn new Promise((resolve, reject) => {\r\n\t\t      this.rototypeConnector.srvCCPay.requestPayment(message)\r\n\t\t        .then(p => this.#cardAuthorized(amount, p, resolve, reject));\r\n\t      });\r\n    }\r\n  }\r\n\r\n  #cardAuthorized(originalAmount, response, resolve, reject) {\r\n    this.rototypeConnector.lightOff(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_NAME.CREDIT_CARD, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.FLASH_RATE.SLOW, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_COLOR.BLUE);\r\n    this.rototypeConnector.lightOff(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_NAME.NFC_CREDIT_CARD, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.FLASH_RATE.SLOW, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_3__.LIGHT_COLOR.BLUE);\r\n\r\n\t  if (!response)\r\n\t    throw new _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.ECCPaymentError(\"Missing payment response\", _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.PAYMENT_ERROR.FAILED, null, null);\r\n\r\n\t\tlet paymentResult = this.#preparePaymentResult(response);\r\n\t\tif (this.#cfg.TestMode)\r\n\t\t\tpaymentResult.AcceptedAmount = originalAmount;\r\n\t\t\r\n\t  if (response.completionCode === \"success\") {\r\n\t    paymentResult.CardData.Status = 2; //Approved\r\n\t    resolve(paymentResult);\t\r\n\t  }\r\n\t  else if (response.completionCode === \"commandErrorCode\") {\r\n\t\t  if (response.errorCode === \"paymentRefused\") {\r\n\t\t    paymentResult.CardData.Status = 3; //Failed\r\n  \t    reject(new _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.ECCPaymentError(response.errorCode, _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.PAYMENT_ERROR.FAILED, paymentResult));\r\n\t\t  }\r\n\t\t  else\r\n\t      reject(new _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.ECCPaymentError(response.errorCode, _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.PAYMENT_ERROR.ABORT));\r\n\t\t}\r\n\t\telse\r\n\t    throw new _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.ECCPaymentError(response.errorDescription, _common_script_errors__WEBPACK_IMPORTED_MODULE_2__.PAYMENT_ERROR.FAILED);\r\n\r\n/*\r\n{\r\n    \"header\": {\r\n        \"name\": \"CCPay.RequestPayment\",\r\n        \"requestId\": 2,\r\n        \"type\": \"completion\"\r\n    },\r\n    \"payload\": {\r\n        \"ccPay\": {\r\n            \"terminalID\": \"10000326\",\r\n            \"acquirerID\": \"88105100003\",\r\n            \"acquirerName\": \"VISA            \",\r\n            \"merchantID\": \"000011150041   \",\r\n            \"cardNumber\": \"************2372   \",\r\n            \"issuerCode\": \"     \",\r\n            \"transactionType\": \"ICC\",\r\n            \"ticketNumber\": \"000000\",\r\n            \"cardType\": \"1\",\r\n            \"systemTraceAuditNumber\": \"000010\",\r\n            \"amount\": \"00000001\",\r\n            \"transactionDateTime\": \"250123161545\",\r\n            \"approvalType\": \"0\",\r\n            \"approvalCode\": \"      \",\r\n            \"refusalActionCode\": \"165\",\r\n            \"emvAuthResponseCode\": \"00\",\r\n            \"receiptHeader\": \"                        \",\r\n            \"receiptRow1\": \"VISA                    \",\r\n            \"receiptRow2\": \"GRAZIE E ARRIVEDERCI    \",\r\n            \"receiptCourtesy\": \"ARRIVEDERCI E GRAZIE    \",\r\n            \"receiptFooter\": \"                        \",\r\n            \"tvr\": \"08C0048000\",\r\n            \"ac\": \"EF88A70E366F0FD2\",\r\n            \"iad\": \"06020A03210000                                                  \",\r\n            \"arc\": \"Z3\",\r\n            \"appllabel\": \"Visa Credit     \",\r\n            \"atc\": \"00BD\",\r\n            \"tcc\": \"380\",\r\n            \"tt\": \"00\",\r\n            \"trCC\": \"978\",\r\n            \"un\": \"DF908276\",\r\n            \"tsi\": \"E800\",\r\n            \"tac\": \"D8F8FCA8000000000000B878FC9800\",\r\n            \"cvmr\": \"420300\",\r\n            \"auc\": \"FF80\",\r\n            \"aip\": \"3C00\",\r\n            \"iac\": \"B878FC88000000000000B878FC9800\",\r\n            \"cid\": \"00\",\r\n            \"ops\": \"0\",\r\n            \"appIPN\": \"                \",\r\n            \"ctq\": \"    \",\r\n            \"aid\": \"A0000000031010                  \"\r\n        },\r\n        \"errorCode\": \"paymentRefused\",\r\n        \"completionCode\": \"commandErrorCode\",\r\n        \"errorDescription\": \"field12: 31 ; field235:                 \"\r\n    }\r\n}\r\n*/\r\n\t}\r\n\t \r\n  void(currency, salePayment, transactionRef, deviceAlias) {\r\n    if (!this.rototypeConnector.srvCCPay) \r\n      throw new Error(\"Unable to find srvCCPay service\");\r\n    else {\r\n\t    let message = {\r\n\t        timeout: this._transactionTimeout - 10000,\r\n\t        currency: \"EUR\",\r\n\t        amount: this.#cfg.TestMode ? 0.01 : salePayment.amount\r\n\t      };\r\n\t      \r\n   \t\treturn new Promise((resolve, reject) => {\r\n\t\t      this.rototypeConnector.srvCCPay.reverseLastPayment(message)\r\n\t\t        .then(p => this.#cardAuthorized(message.amount, p, resolve, reject));\r\n\t      });\r\n    }\r\n\t}\r\n\r\n\t#preparePaymentResult(response) {\r\n\t\tlet result = {\r\n\t\t\tCardData: this.#createCardDataFromResponse(response),\r\n\t\t\tPaymentDataList: this.#createPaymentDataFromResponse(response),\r\n\t\t\tDeviceReceipts: this.#prepareReceipts(response)\r\n\t\t};\r\n\t\t\r\n\t\tif (response && response.ccPay)\r\n\t\t\tresult.AcceptedAmount = response.ccPay.amount / 100;\r\n\t\t\t\r\n\t\treturn result;\r\n\t}\r\n\r\n  #createPaymentDataFromResponse(response) {\r\n\t\tlet paymentDataList;\r\n\t\tif (response && response.ccPay) {\r\n\t\t\tpaymentDataList = [];\r\n\t\t\tpaymentDataList.push({ParamName: \"TerminalId\", ParamValue: response.ccPay.terminalID});\r\n\t\t\tpaymentDataList.push({ParamName: \"MerchantID\", ParamValue: response.ccPay.merchantID});\r\n\t\t\tpaymentDataList.push({ParamName: \"AcquirerID\", ParamValue: response.ccPay.acquirerID});\r\n\t\t\tpaymentDataList.push({ParamName: \"AcquirerName\", ParamValue: response.ccPay.acquirerName});\r\n\t\t\tpaymentDataList.push({ParamName: \"SystemTraceAuditNumber\", ParamValue: response.ccPay.systemTraceAuditNumber});\r\n\t\t\tpaymentDataList.push({ParamName: \"RefusalActionCode\", ParamValue: response.ccPay.refusalActionCode});\r\n\t\t}\r\n\t\treturn paymentDataList;\r\n\t}\r\n\t\r\n  #createCardDataFromResponse(response) {\r\n\t  /*\r\n\t      \"ccPay\": {\r\n            \"terminalID\": \"10000326\",\r\n            \"acquirerID\": \"88105100003\",\r\n            \"acquirerName\": \"VISA            \",\r\n            \"merchantID\": \"000011150041   \",\r\n            \"cardNumber\": \"************2372   \",\r\n            \"issuerCode\": \"     \",\r\n            \"transactionType\": \"ICC\",\r\n            \"ticketNumber\": \"000000\",\r\n            \"cardType\": \"1\",\r\n            \"systemTraceAuditNumber\": \"000010\",\r\n            \"amount\": \"00000000\",\r\n            \"transactionDateTime\": \"250123161545\",\r\n            \"approvalType\": \"0\",\r\n            \"approvalCode\": \"      \",\r\n            \"refusalActionCode\": \"165\",\r\n            \"emvAuthResponseCode\": \"00\",\r\n            \"receiptHeader\": \"                        \",\r\n            \"receiptRow1\": \"VISA                    \",\r\n            \"receiptRow2\": \"GRAZIE E ARRIVEDERCI    \",\r\n            \"receiptCourtesy\": \"ARRIVEDERCI E GRAZIE    \",\r\n            \"receiptFooter\": \"                        \",\r\n            \"tvr\": \"08C0048000\",\r\n            \"ac\": \"EF88A70E366F0FD2\",\r\n            \"iad\": \"06020A03210000                                                  \",\r\n            \"arc\": \"Z3\",\r\n            \"appllabel\": \"Visa Credit     \",\r\n            \"atc\": \"00BD\",\r\n            \"tcc\": \"380\",\r\n            \"tt\": \"00\",\r\n            \"trCC\": \"978\",\r\n            \"un\": \"DF908276\",\r\n            \"tsi\": \"E800\",\r\n            \"tac\": \"D8F8FCA8000000000000B878FC9800\",\r\n            \"cvmr\": \"420300\",\r\n            \"auc\": \"FF80\",\r\n            \"aip\": \"3C00\",\r\n            \"iac\": \"B878FC88000000000000B878FC9800\",\r\n            \"cid\": \"00\",\r\n            \"ops\": \"0\",\r\n            \"appIPN\": \"                \",\r\n            \"ctq\": \"    \",\r\n            \"aid\": \"A0000000031010                  \"\r\n        },\r\n\r\n\t  */\r\n\t\tlet cardData;\r\n\t  if (response && response.ccPay) {\r\n\t\t\tcardData = {};\r\n\t\t\tcardData.CardNumber = response.ccPay.cardNumber;\r\n\t\t  cardData.CardType = response.ccPay.acquirerName.trim();\r\n\t\t  cardData.MaskedCardNumber = response.ccPay.cardNumber;\r\n\t    cardData.ManualAuthCode = response.ccPay.approvalCode.trim();\r\n\t  }\r\n    return cardData;\r\n  }\r\n  \r\n\t#prepareReceipts(response) {\r\n\t\tlet deviceData = {\r\n\t\t\tCustomerReceipt: \"Payment failed\",\r\n\t\t\tMerchantReceipt: \"Payment failed\"\r\n\t\t};\r\n\t\t\r\n\t\tif (response && response.ccPay) {\r\n\t\t\tlet receiptStr = this.#prepareReceipt(response);\r\n\t\t\tdeviceData.CustomerReceipt = receiptStr;\r\n\t\t\tdeviceData.MerchantReceipt = receiptStr;\r\n\t\t}\r\n\t\treturn deviceData;\r\n\t}\r\n\t\r\n\t#prepareReceipt(response) {\r\n\t\tif (response.commandName === \"CCPay.ReverseLastPayment\")\r\n\t\t\treturn this.#prepareCustomerReceiptForRefund(response.ccPay)\r\n\t\telse\r\n\t\t\treturn this.#prepareCustomerReceiptForPayment(response.ccPay);\r\n\t}\r\n\t\r\n\t#prepareCustomerReceiptForPayment(ccPay) {\r\n\t\treturn this.#prepareCustomerReceipt(ccPay, \"ACQUISTO\");\r\n\t}\r\n\t\r\n\t#prepareCustomerReceiptForRefund(ccPay) {\r\n\t\treturn this.#prepareCustomerReceipt(ccPay, \"RIMBORSO\");\r\n\t}\r\n\t\r\n\t#prepareCustomerReceipt(ccPay, operationDescr) {\r\n\t\tlet result = [];\r\n\t\tif (ccPay.refusalActionCode === \"000\")\r\n\t\t\tresult.push(`              ${operationDescr}: ${ccPay.acquirerName}`);\r\n\t\telse\r\n\t\t\tresult.push(`    OPERAZIONE FALLITA: ${ccPay.acquirerName}`);\r\n\t\t\r\n\t\tresult.push(`DATA: ${this.#getDate(ccPay.transactionDateTime)}                        ORA: ${this.#getTime(ccPay.transactionDateTime)}`);\r\n\t\tresult.push(`Eserc.: ${ccPay.merchantID}     A.I.I.C: ${ccPay.acquirerID}`);\r\n\t\tresult.push(`TML: ${ccPay.terminalID}                       CVMR: ${ccPay.cvmr}`);\r\n\t\tresult.push(`AID: ${ccPay.aid.trim()}              TVR: ${ccPay.tvr}`);\r\n\t\tresult.push(`ARC: ${ccPay.arc}      ATC: ${ccPay.atc}      TCC: ${ccPay.tcc}      TT: ${ccPay.tt}`);\r\n\t\tresult.push(`UN: ${ccPay.un}         APPL.: ${ccPay.appllabel}`);\r\n\t\tresult.push(`PAN: ${ccPay.cardNumber}            STAN: ${ccPay.systemTraceAuditNumber}`);\r\n\t\tresult.push(`                   AUT: ${ccPay.approvalCode}`);\r\n\r\n\t\treturn result.join(\"\\n\");\r\n\t}\r\n\r\n\t#getDate(dateTime) {\r\n\t\tlet day = dateTime.substring(0, 2);\r\n\t\tlet month = dateTime.substring(2, 4);\r\n\t\tlet year = dateTime.substring(4, 6);\r\n\t\treturn `${day}/${month}/${year}`\r\n\t}\r\n\t\r\n\t#getTime(dateTime) {\r\n\t\tlet hour = dateTime.substring(6, 8);\r\n\t\tlet min = dateTime.substring(8, 10); \r\n\t\treturn `${hour}:${min}`\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tcGF5LWNjLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFFO0FBQ0U7QUFDQTtBQUNVO0FBQ2pGO0FBQ08sZ0NBQWdDLCtFQUFTO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUZBQW1CO0FBQzNDO0FBQ0EsNEJBQTRCLHdCQUF3QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDZFQUFzQixFQUFFLHNFQUFlLEVBQUUsdUVBQWdCO0FBQzlGLHFDQUFxQyxpRkFBMEIsRUFBRSxzRUFBZSxFQUFFLHVFQUFnQjtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNkVBQXNCLEVBQUUsc0VBQWUsRUFBRSx1RUFBZ0I7QUFDN0Ysb0NBQW9DLGlGQUEwQixFQUFFLHNFQUFlLEVBQUUsdUVBQWdCO0FBQ2pHO0FBQ0E7QUFDQSxlQUFlLGtFQUFlLDZCQUE2Qix1RUFBb0I7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDLGtCQUFrQixrRUFBZSxxQkFBcUIsdUVBQW9CO0FBQzFFO0FBQ0E7QUFDQSxrQkFBa0Isa0VBQWUscUJBQXFCLHNFQUFtQjtBQUN6RTtBQUNBO0FBQ0EsZUFBZSxrRUFBZSw0QkFBNEIsdUVBQW9CO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwrREFBK0Q7QUFDeEYseUJBQXlCLCtEQUErRDtBQUN4Rix5QkFBeUIsK0RBQStEO0FBQ3hGLHlCQUF5QixtRUFBbUU7QUFDNUYseUJBQXlCLHVGQUF1RjtBQUNoSCx5QkFBeUIsNkVBQTZFO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxlQUFlLElBQUksbUJBQW1CO0FBQ3RFO0FBQ0EsMENBQTBDLG1CQUFtQjtBQUM3RDtBQUNBLHVCQUF1QixpRUFBaUUsT0FBTyx5Q0FBeUM7QUFDeEkseUJBQXlCLHNCQUFzQixXQUFXLGlCQUFpQjtBQUMzRSxzQkFBc0Isd0NBQXdDLFFBQVEsV0FBVztBQUNqRixzQkFBc0IsK0JBQStCLE9BQU8sVUFBVTtBQUN0RSxzQkFBc0IsZ0JBQWdCLE9BQU8sZ0JBQWdCLE9BQU8sZ0JBQWdCLE1BQU0sU0FBUztBQUNuRyxxQkFBcUIsa0JBQWtCLFNBQVMsZ0JBQWdCO0FBQ2hFLHNCQUFzQiw2QkFBNkIsUUFBUSw2QkFBNkI7QUFDeEYseUNBQXlDLG1CQUFtQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxJQUFJLEdBQUcsTUFBTSxHQUFHLEtBQUs7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksS0FBSyxHQUFHLElBQUk7QUFDeEI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uL3NjcmlwdC9yb3RvLXBheS1jYy5qcz9jMjg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERNUGF5bWVudCB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLXBheW1lbnQnO1xyXG5pbXBvcnQgeyBERVZJQ0VfU1RBVFVTIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvZGV2aWNlLW1hbmFnZXIvZG0tbW9kZWwnO1xyXG5pbXBvcnQgeyBFQ0NQYXltZW50RXJyb3IsIFBBWU1FTlRfRVJST1IgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9lcnJvcnMnO1xyXG5pbXBvcnQgeyBMSUdIVF9OQU1FLCBGTEFTSF9SQVRFLCBMSUdIVF9DT0xPUiB9IGZyb20gJy4vc2VydmljZXMvcm90by1zcnYtbGlnaHRzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDcmVkaXRDYXJkUGF5bWVudCBleHRlbmRzIERNUGF5bWVudCB7XHJcblx0I2NmZyA9IHt9O1xyXG5cdFxyXG4gIHN0YXRpYyBnZXQgY2xhc3NBbGlhcygpIHtcclxuICAgIHJldHVybiBcInBheV9yb3RvX2NjXCI7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihwYXJhbXMsIGNvbm5lY3Rvcikge1xyXG4gICAgc3VwZXIocGFyYW1zKTtcclxuICAgIHRoaXMuX3RyYW5zYWN0aW9uVGltZW91dCA9IDY1MDAwO1xyXG4gICAgdGhpcy5yb3RvdHlwZUNvbm5lY3RvciA9IGNvbm5lY3RvcjtcclxuICAgXHR0aGlzLnJvdG90eXBlQ29ubmVjdG9yLm9uQ0NQYXlTdGF0dXNDaGFuZ2UgPSBzID0+IHRoaXMuI2RldmljZVN0YXR1c0NoYW5nZUV2ZW50KHMpO1xyXG4gICBcdFxyXG4gICAgdGhpcy4jY2ZnID0gSlNPTi5wYXJzZShwYXJhbXMucGx1Z2luSW5mby5QbHVnaW5TZXR0aW5ncyk7XHJcbiAgICBpZiAoIXRoaXMuI2NmZy5UZXN0TW9kZSlcclxuICAgICAgdGhpcy4jY2ZnLlRlc3RNb2RlID0gZmFsc2U7XHJcbiAgfVxyXG4gIFxyXG4gICNkZXZpY2VTdGF0dXNDaGFuZ2VFdmVudChzdmNTdGF0dXMpIHtcclxuXHQgIGxldCBkZXZpY2VPbmxpbmUgPSBzdmNTdGF0dXMuY29tbW9uICYmICgoc3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2UgPT09IFwib25saW5lXCIpIHx8IChzdmNTdGF0dXMuY29tbW9uLmRldmljZSA9PT0gXCJkZXZpY2VCdXN5XCIpKTtcclxuXHQgIGlmIChkZXZpY2VPbmxpbmUpXHJcblx0XHRcdHRoaXMuc2V0RGV2aWNlU3RhdHVzKERFVklDRV9TVEFUVVMuUkVBRFkpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnNldEVycm9yKGBTdGF0dXM6ICR7c3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2V9YCk7XHJcbiAgfVxyXG5cclxuXHRyZWZyZXNoU3RhdHVzKCkge1xyXG5cdFx0aWYgKHRoaXMucm90b3R5cGVDb25uZWN0b3IgJiYgdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZDQ1BheSlcclxuXHRcdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkudXBkYXRlU3RhdHVzKCk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChcIkZhaWxlZCB0byByZWZyZXNoIHN0YXR1cyBcIiArIHRoaXMucGx1Z2luTmFtZSk7XHJcblx0fVxyXG5cclxuXHRyZXNldCgpIHtcclxuXHRcdGlmICh0aGlzLnJvdG90eXBlQ29ubmVjdG9yICYmIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkpXHJcblx0XHRcdHJldHVybiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydkNDUGF5LnJlc2V0KCk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChcIkZhaWxlZCB0byByZXNldCBcIiArIHRoaXMucGx1Z2luTmFtZSk7XHJcblx0fVxyXG5cclxuIFx0YXN5bmMgcGVyZm9ybU1haW50ZW5hbmNlKCkge1xyXG5cdFx0YXdhaXQgdGhpcy4jY2xvc2VEYXkoKTtcclxuXHRcdGF3YWl0IHRoaXMucmVzZXQoKTtcclxuXHR9XHJcblxyXG5cdCNjbG9zZURheSgpIHtcclxuICAgIGxldCBwYXlsb2FkID0ge1xyXG4gICAgICAgIHRpbWVvdXQ6IDEwMDAwXHJcbiAgICAgIH07ICAgICAgXHJcbiBcdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkuY2xvc2VEYXkocGF5bG9hZCk7XHRcdFxyXG5cdH1cclxuXHRcclxuICBwYXkoY3VycmVuY3ksIGFtb3VudCwgdHJhbnNhY3Rpb25SZWYsIGRldmljZUFsaWFzKSB7XHJcbiAgICBpZiAoIXRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkpIFxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZmluZCBzcnZDQ1BheSBzZXJ2aWNlXCIpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPbihMSUdIVF9OQU1FLkNSRURJVF9DQVJELCBGTEFTSF9SQVRFLlNMT1csIExJR0hUX0NPTE9SLkJMVUUpO1xyXG4gICAgICB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLmxpZ2h0T24oTElHSFRfTkFNRS5ORkNfQ1JFRElUX0NBUkQsIEZMQVNIX1JBVEUuU0xPVywgTElHSFRfQ09MT1IuQkxVRSk7XHJcblx0ICAgIGxldCBtZXNzYWdlID0ge1xyXG5cdCAgICAgICAgdGltZW91dDogdGhpcy5fdHJhbnNhY3Rpb25UaW1lb3V0IC0gMTAwMDAsXHJcblx0ICAgICAgICBjdXJyZW5jeTogXCJFVVJcIixcclxuXHQgICAgICAgIGFtb3VudDogdGhpcy4jY2ZnLlRlc3RNb2RlID8gMC4wMSA6IGFtb3VudFxyXG5cdCAgICAgIH07XHJcblx0ICAgICAgXHJcbiAgIFx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0ICAgICAgdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZDQ1BheS5yZXF1ZXN0UGF5bWVudChtZXNzYWdlKVxyXG5cdFx0ICAgICAgICAudGhlbihwID0+IHRoaXMuI2NhcmRBdXRob3JpemVkKGFtb3VudCwgcCwgcmVzb2x2ZSwgcmVqZWN0KSk7XHJcblx0ICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAjY2FyZEF1dGhvcml6ZWQob3JpZ2luYWxBbW91bnQsIHJlc3BvbnNlLCByZXNvbHZlLCByZWplY3QpIHtcclxuICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPZmYoTElHSFRfTkFNRS5DUkVESVRfQ0FSRCwgRkxBU0hfUkFURS5TTE9XLCBMSUdIVF9DT0xPUi5CTFVFKTtcclxuICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPZmYoTElHSFRfTkFNRS5ORkNfQ1JFRElUX0NBUkQsIEZMQVNIX1JBVEUuU0xPVywgTElHSFRfQ09MT1IuQkxVRSk7XHJcblxyXG5cdCAgaWYgKCFyZXNwb25zZSlcclxuXHQgICAgdGhyb3cgbmV3IEVDQ1BheW1lbnRFcnJvcihcIk1pc3NpbmcgcGF5bWVudCByZXNwb25zZVwiLCBQQVlNRU5UX0VSUk9SLkZBSUxFRCwgbnVsbCwgbnVsbCk7XHJcblxyXG5cdFx0bGV0IHBheW1lbnRSZXN1bHQgPSB0aGlzLiNwcmVwYXJlUGF5bWVudFJlc3VsdChyZXNwb25zZSk7XHJcblx0XHRpZiAodGhpcy4jY2ZnLlRlc3RNb2RlKVxyXG5cdFx0XHRwYXltZW50UmVzdWx0LkFjY2VwdGVkQW1vdW50ID0gb3JpZ2luYWxBbW91bnQ7XHJcblx0XHRcclxuXHQgIGlmIChyZXNwb25zZS5jb21wbGV0aW9uQ29kZSA9PT0gXCJzdWNjZXNzXCIpIHtcclxuXHQgICAgcGF5bWVudFJlc3VsdC5DYXJkRGF0YS5TdGF0dXMgPSAyOyAvL0FwcHJvdmVkXHJcblx0ICAgIHJlc29sdmUocGF5bWVudFJlc3VsdCk7XHRcclxuXHQgIH1cclxuXHQgIGVsc2UgaWYgKHJlc3BvbnNlLmNvbXBsZXRpb25Db2RlID09PSBcImNvbW1hbmRFcnJvckNvZGVcIikge1xyXG5cdFx0ICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlID09PSBcInBheW1lbnRSZWZ1c2VkXCIpIHtcclxuXHRcdCAgICBwYXltZW50UmVzdWx0LkNhcmREYXRhLlN0YXR1cyA9IDM7IC8vRmFpbGVkXHJcbiAgXHQgICAgcmVqZWN0KG5ldyBFQ0NQYXltZW50RXJyb3IocmVzcG9uc2UuZXJyb3JDb2RlLCBQQVlNRU5UX0VSUk9SLkZBSUxFRCwgcGF5bWVudFJlc3VsdCkpO1xyXG5cdFx0ICB9XHJcblx0XHQgIGVsc2VcclxuXHQgICAgICByZWplY3QobmV3IEVDQ1BheW1lbnRFcnJvcihyZXNwb25zZS5lcnJvckNvZGUsIFBBWU1FTlRfRVJST1IuQUJPUlQpKTtcclxuXHRcdH1cclxuXHRcdGVsc2VcclxuXHQgICAgdGhyb3cgbmV3IEVDQ1BheW1lbnRFcnJvcihyZXNwb25zZS5lcnJvckRlc2NyaXB0aW9uLCBQQVlNRU5UX0VSUk9SLkZBSUxFRCk7XHJcblxyXG4vKlxyXG57XHJcbiAgICBcImhlYWRlclwiOiB7XHJcbiAgICAgICAgXCJuYW1lXCI6IFwiQ0NQYXkuUmVxdWVzdFBheW1lbnRcIixcclxuICAgICAgICBcInJlcXVlc3RJZFwiOiAyLFxyXG4gICAgICAgIFwidHlwZVwiOiBcImNvbXBsZXRpb25cIlxyXG4gICAgfSxcclxuICAgIFwicGF5bG9hZFwiOiB7XHJcbiAgICAgICAgXCJjY1BheVwiOiB7XHJcbiAgICAgICAgICAgIFwidGVybWluYWxJRFwiOiBcIjEwMDAwMzI2XCIsXHJcbiAgICAgICAgICAgIFwiYWNxdWlyZXJJRFwiOiBcIjg4MTA1MTAwMDAzXCIsXHJcbiAgICAgICAgICAgIFwiYWNxdWlyZXJOYW1lXCI6IFwiVklTQSAgICAgICAgICAgIFwiLFxyXG4gICAgICAgICAgICBcIm1lcmNoYW50SURcIjogXCIwMDAwMTExNTAwNDEgICBcIixcclxuICAgICAgICAgICAgXCJjYXJkTnVtYmVyXCI6IFwiKioqKioqKioqKioqMjM3MiAgIFwiLFxyXG4gICAgICAgICAgICBcImlzc3VlckNvZGVcIjogXCIgICAgIFwiLFxyXG4gICAgICAgICAgICBcInRyYW5zYWN0aW9uVHlwZVwiOiBcIklDQ1wiLFxyXG4gICAgICAgICAgICBcInRpY2tldE51bWJlclwiOiBcIjAwMDAwMFwiLFxyXG4gICAgICAgICAgICBcImNhcmRUeXBlXCI6IFwiMVwiLFxyXG4gICAgICAgICAgICBcInN5c3RlbVRyYWNlQXVkaXROdW1iZXJcIjogXCIwMDAwMTBcIixcclxuICAgICAgICAgICAgXCJhbW91bnRcIjogXCIwMDAwMDAwMVwiLFxyXG4gICAgICAgICAgICBcInRyYW5zYWN0aW9uRGF0ZVRpbWVcIjogXCIyNTAxMjMxNjE1NDVcIixcclxuICAgICAgICAgICAgXCJhcHByb3ZhbFR5cGVcIjogXCIwXCIsXHJcbiAgICAgICAgICAgIFwiYXBwcm92YWxDb2RlXCI6IFwiICAgICAgXCIsXHJcbiAgICAgICAgICAgIFwicmVmdXNhbEFjdGlvbkNvZGVcIjogXCIxNjVcIixcclxuICAgICAgICAgICAgXCJlbXZBdXRoUmVzcG9uc2VDb2RlXCI6IFwiMDBcIixcclxuICAgICAgICAgICAgXCJyZWNlaXB0SGVhZGVyXCI6IFwiICAgICAgICAgICAgICAgICAgICAgICAgXCIsXHJcbiAgICAgICAgICAgIFwicmVjZWlwdFJvdzFcIjogXCJWSVNBICAgICAgICAgICAgICAgICAgICBcIixcclxuICAgICAgICAgICAgXCJyZWNlaXB0Um93MlwiOiBcIkdSQVpJRSBFIEFSUklWRURFUkNJICAgIFwiLFxyXG4gICAgICAgICAgICBcInJlY2VpcHRDb3VydGVzeVwiOiBcIkFSUklWRURFUkNJIEUgR1JBWklFICAgIFwiLFxyXG4gICAgICAgICAgICBcInJlY2VpcHRGb290ZXJcIjogXCIgICAgICAgICAgICAgICAgICAgICAgICBcIixcclxuICAgICAgICAgICAgXCJ0dnJcIjogXCIwOEMwMDQ4MDAwXCIsXHJcbiAgICAgICAgICAgIFwiYWNcIjogXCJFRjg4QTcwRTM2NkYwRkQyXCIsXHJcbiAgICAgICAgICAgIFwiaWFkXCI6IFwiMDYwMjBBMDMyMTAwMDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLFxyXG4gICAgICAgICAgICBcImFyY1wiOiBcIlozXCIsXHJcbiAgICAgICAgICAgIFwiYXBwbGxhYmVsXCI6IFwiVmlzYSBDcmVkaXQgICAgIFwiLFxyXG4gICAgICAgICAgICBcImF0Y1wiOiBcIjAwQkRcIixcclxuICAgICAgICAgICAgXCJ0Y2NcIjogXCIzODBcIixcclxuICAgICAgICAgICAgXCJ0dFwiOiBcIjAwXCIsXHJcbiAgICAgICAgICAgIFwidHJDQ1wiOiBcIjk3OFwiLFxyXG4gICAgICAgICAgICBcInVuXCI6IFwiREY5MDgyNzZcIixcclxuICAgICAgICAgICAgXCJ0c2lcIjogXCJFODAwXCIsXHJcbiAgICAgICAgICAgIFwidGFjXCI6IFwiRDhGOEZDQTgwMDAwMDAwMDAwMDBCODc4RkM5ODAwXCIsXHJcbiAgICAgICAgICAgIFwiY3ZtclwiOiBcIjQyMDMwMFwiLFxyXG4gICAgICAgICAgICBcImF1Y1wiOiBcIkZGODBcIixcclxuICAgICAgICAgICAgXCJhaXBcIjogXCIzQzAwXCIsXHJcbiAgICAgICAgICAgIFwiaWFjXCI6IFwiQjg3OEZDODgwMDAwMDAwMDAwMDBCODc4RkM5ODAwXCIsXHJcbiAgICAgICAgICAgIFwiY2lkXCI6IFwiMDBcIixcclxuICAgICAgICAgICAgXCJvcHNcIjogXCIwXCIsXHJcbiAgICAgICAgICAgIFwiYXBwSVBOXCI6IFwiICAgICAgICAgICAgICAgIFwiLFxyXG4gICAgICAgICAgICBcImN0cVwiOiBcIiAgICBcIixcclxuICAgICAgICAgICAgXCJhaWRcIjogXCJBMDAwMDAwMDAzMTAxMCAgICAgICAgICAgICAgICAgIFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImVycm9yQ29kZVwiOiBcInBheW1lbnRSZWZ1c2VkXCIsXHJcbiAgICAgICAgXCJjb21wbGV0aW9uQ29kZVwiOiBcImNvbW1hbmRFcnJvckNvZGVcIixcclxuICAgICAgICBcImVycm9yRGVzY3JpcHRpb25cIjogXCJmaWVsZDEyOiAzMSA7IGZpZWxkMjM1OiAgICAgICAgICAgICAgICAgXCJcclxuICAgIH1cclxufVxyXG4qL1xyXG5cdH1cclxuXHQgXHJcbiAgdm9pZChjdXJyZW5jeSwgc2FsZVBheW1lbnQsIHRyYW5zYWN0aW9uUmVmLCBkZXZpY2VBbGlhcykge1xyXG4gICAgaWYgKCF0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydkNDUGF5KSBcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGZpbmQgc3J2Q0NQYXkgc2VydmljZVwiKTtcclxuICAgIGVsc2Uge1xyXG5cdCAgICBsZXQgbWVzc2FnZSA9IHtcclxuXHQgICAgICAgIHRpbWVvdXQ6IHRoaXMuX3RyYW5zYWN0aW9uVGltZW91dCAtIDEwMDAwLFxyXG5cdCAgICAgICAgY3VycmVuY3k6IFwiRVVSXCIsXHJcblx0ICAgICAgICBhbW91bnQ6IHRoaXMuI2NmZy5UZXN0TW9kZSA/IDAuMDEgOiBzYWxlUGF5bWVudC5hbW91bnRcclxuXHQgICAgICB9O1xyXG5cdCAgICAgIFxyXG4gICBcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHRcdCAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkucmV2ZXJzZUxhc3RQYXltZW50KG1lc3NhZ2UpXHJcblx0XHQgICAgICAgIC50aGVuKHAgPT4gdGhpcy4jY2FyZEF1dGhvcml6ZWQobWVzc2FnZS5hbW91bnQsIHAsIHJlc29sdmUsIHJlamVjdCkpO1xyXG5cdCAgICAgIH0pO1xyXG4gICAgfVxyXG5cdH1cclxuXHJcblx0I3ByZXBhcmVQYXltZW50UmVzdWx0KHJlc3BvbnNlKSB7XHJcblx0XHRsZXQgcmVzdWx0ID0ge1xyXG5cdFx0XHRDYXJkRGF0YTogdGhpcy4jY3JlYXRlQ2FyZERhdGFGcm9tUmVzcG9uc2UocmVzcG9uc2UpLFxyXG5cdFx0XHRQYXltZW50RGF0YUxpc3Q6IHRoaXMuI2NyZWF0ZVBheW1lbnREYXRhRnJvbVJlc3BvbnNlKHJlc3BvbnNlKSxcclxuXHRcdFx0RGV2aWNlUmVjZWlwdHM6IHRoaXMuI3ByZXBhcmVSZWNlaXB0cyhyZXNwb25zZSlcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jY1BheSlcclxuXHRcdFx0cmVzdWx0LkFjY2VwdGVkQW1vdW50ID0gcmVzcG9uc2UuY2NQYXkuYW1vdW50IC8gMTAwO1xyXG5cdFx0XHRcclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuICAjY3JlYXRlUGF5bWVudERhdGFGcm9tUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuXHRcdGxldCBwYXltZW50RGF0YUxpc3Q7XHJcblx0XHRpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2UuY2NQYXkpIHtcclxuXHRcdFx0cGF5bWVudERhdGFMaXN0ID0gW107XHJcblx0XHRcdHBheW1lbnREYXRhTGlzdC5wdXNoKHtQYXJhbU5hbWU6IFwiVGVybWluYWxJZFwiLCBQYXJhbVZhbHVlOiByZXNwb25zZS5jY1BheS50ZXJtaW5hbElEfSk7XHJcblx0XHRcdHBheW1lbnREYXRhTGlzdC5wdXNoKHtQYXJhbU5hbWU6IFwiTWVyY2hhbnRJRFwiLCBQYXJhbVZhbHVlOiByZXNwb25zZS5jY1BheS5tZXJjaGFudElEfSk7XHJcblx0XHRcdHBheW1lbnREYXRhTGlzdC5wdXNoKHtQYXJhbU5hbWU6IFwiQWNxdWlyZXJJRFwiLCBQYXJhbVZhbHVlOiByZXNwb25zZS5jY1BheS5hY3F1aXJlcklEfSk7XHJcblx0XHRcdHBheW1lbnREYXRhTGlzdC5wdXNoKHtQYXJhbU5hbWU6IFwiQWNxdWlyZXJOYW1lXCIsIFBhcmFtVmFsdWU6IHJlc3BvbnNlLmNjUGF5LmFjcXVpcmVyTmFtZX0pO1xyXG5cdFx0XHRwYXltZW50RGF0YUxpc3QucHVzaCh7UGFyYW1OYW1lOiBcIlN5c3RlbVRyYWNlQXVkaXROdW1iZXJcIiwgUGFyYW1WYWx1ZTogcmVzcG9uc2UuY2NQYXkuc3lzdGVtVHJhY2VBdWRpdE51bWJlcn0pO1xyXG5cdFx0XHRwYXltZW50RGF0YUxpc3QucHVzaCh7UGFyYW1OYW1lOiBcIlJlZnVzYWxBY3Rpb25Db2RlXCIsIFBhcmFtVmFsdWU6IHJlc3BvbnNlLmNjUGF5LnJlZnVzYWxBY3Rpb25Db2RlfSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcGF5bWVudERhdGFMaXN0O1xyXG5cdH1cclxuXHRcclxuICAjY3JlYXRlQ2FyZERhdGFGcm9tUmVzcG9uc2UocmVzcG9uc2UpIHtcclxuXHQgIC8qXHJcblx0ICAgICAgXCJjY1BheVwiOiB7XHJcbiAgICAgICAgICAgIFwidGVybWluYWxJRFwiOiBcIjEwMDAwMzI2XCIsXHJcbiAgICAgICAgICAgIFwiYWNxdWlyZXJJRFwiOiBcIjg4MTA1MTAwMDAzXCIsXHJcbiAgICAgICAgICAgIFwiYWNxdWlyZXJOYW1lXCI6IFwiVklTQSAgICAgICAgICAgIFwiLFxyXG4gICAgICAgICAgICBcIm1lcmNoYW50SURcIjogXCIwMDAwMTExNTAwNDEgICBcIixcclxuICAgICAgICAgICAgXCJjYXJkTnVtYmVyXCI6IFwiKioqKioqKioqKioqMjM3MiAgIFwiLFxyXG4gICAgICAgICAgICBcImlzc3VlckNvZGVcIjogXCIgICAgIFwiLFxyXG4gICAgICAgICAgICBcInRyYW5zYWN0aW9uVHlwZVwiOiBcIklDQ1wiLFxyXG4gICAgICAgICAgICBcInRpY2tldE51bWJlclwiOiBcIjAwMDAwMFwiLFxyXG4gICAgICAgICAgICBcImNhcmRUeXBlXCI6IFwiMVwiLFxyXG4gICAgICAgICAgICBcInN5c3RlbVRyYWNlQXVkaXROdW1iZXJcIjogXCIwMDAwMTBcIixcclxuICAgICAgICAgICAgXCJhbW91bnRcIjogXCIwMDAwMDAwMFwiLFxyXG4gICAgICAgICAgICBcInRyYW5zYWN0aW9uRGF0ZVRpbWVcIjogXCIyNTAxMjMxNjE1NDVcIixcclxuICAgICAgICAgICAgXCJhcHByb3ZhbFR5cGVcIjogXCIwXCIsXHJcbiAgICAgICAgICAgIFwiYXBwcm92YWxDb2RlXCI6IFwiICAgICAgXCIsXHJcbiAgICAgICAgICAgIFwicmVmdXNhbEFjdGlvbkNvZGVcIjogXCIxNjVcIixcclxuICAgICAgICAgICAgXCJlbXZBdXRoUmVzcG9uc2VDb2RlXCI6IFwiMDBcIixcclxuICAgICAgICAgICAgXCJyZWNlaXB0SGVhZGVyXCI6IFwiICAgICAgICAgICAgICAgICAgICAgICAgXCIsXHJcbiAgICAgICAgICAgIFwicmVjZWlwdFJvdzFcIjogXCJWSVNBICAgICAgICAgICAgICAgICAgICBcIixcclxuICAgICAgICAgICAgXCJyZWNlaXB0Um93MlwiOiBcIkdSQVpJRSBFIEFSUklWRURFUkNJICAgIFwiLFxyXG4gICAgICAgICAgICBcInJlY2VpcHRDb3VydGVzeVwiOiBcIkFSUklWRURFUkNJIEUgR1JBWklFICAgIFwiLFxyXG4gICAgICAgICAgICBcInJlY2VpcHRGb290ZXJcIjogXCIgICAgICAgICAgICAgICAgICAgICAgICBcIixcclxuICAgICAgICAgICAgXCJ0dnJcIjogXCIwOEMwMDQ4MDAwXCIsXHJcbiAgICAgICAgICAgIFwiYWNcIjogXCJFRjg4QTcwRTM2NkYwRkQyXCIsXHJcbiAgICAgICAgICAgIFwiaWFkXCI6IFwiMDYwMjBBMDMyMTAwMDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiLFxyXG4gICAgICAgICAgICBcImFyY1wiOiBcIlozXCIsXHJcbiAgICAgICAgICAgIFwiYXBwbGxhYmVsXCI6IFwiVmlzYSBDcmVkaXQgICAgIFwiLFxyXG4gICAgICAgICAgICBcImF0Y1wiOiBcIjAwQkRcIixcclxuICAgICAgICAgICAgXCJ0Y2NcIjogXCIzODBcIixcclxuICAgICAgICAgICAgXCJ0dFwiOiBcIjAwXCIsXHJcbiAgICAgICAgICAgIFwidHJDQ1wiOiBcIjk3OFwiLFxyXG4gICAgICAgICAgICBcInVuXCI6IFwiREY5MDgyNzZcIixcclxuICAgICAgICAgICAgXCJ0c2lcIjogXCJFODAwXCIsXHJcbiAgICAgICAgICAgIFwidGFjXCI6IFwiRDhGOEZDQTgwMDAwMDAwMDAwMDBCODc4RkM5ODAwXCIsXHJcbiAgICAgICAgICAgIFwiY3ZtclwiOiBcIjQyMDMwMFwiLFxyXG4gICAgICAgICAgICBcImF1Y1wiOiBcIkZGODBcIixcclxuICAgICAgICAgICAgXCJhaXBcIjogXCIzQzAwXCIsXHJcbiAgICAgICAgICAgIFwiaWFjXCI6IFwiQjg3OEZDODgwMDAwMDAwMDAwMDBCODc4RkM5ODAwXCIsXHJcbiAgICAgICAgICAgIFwiY2lkXCI6IFwiMDBcIixcclxuICAgICAgICAgICAgXCJvcHNcIjogXCIwXCIsXHJcbiAgICAgICAgICAgIFwiYXBwSVBOXCI6IFwiICAgICAgICAgICAgICAgIFwiLFxyXG4gICAgICAgICAgICBcImN0cVwiOiBcIiAgICBcIixcclxuICAgICAgICAgICAgXCJhaWRcIjogXCJBMDAwMDAwMDAzMTAxMCAgICAgICAgICAgICAgICAgIFwiXHJcbiAgICAgICAgfSxcclxuXHJcblx0ICAqL1xyXG5cdFx0bGV0IGNhcmREYXRhO1xyXG5cdCAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmNjUGF5KSB7XHJcblx0XHRcdGNhcmREYXRhID0ge307XHJcblx0XHRcdGNhcmREYXRhLkNhcmROdW1iZXIgPSByZXNwb25zZS5jY1BheS5jYXJkTnVtYmVyO1xyXG5cdFx0ICBjYXJkRGF0YS5DYXJkVHlwZSA9IHJlc3BvbnNlLmNjUGF5LmFjcXVpcmVyTmFtZS50cmltKCk7XHJcblx0XHQgIGNhcmREYXRhLk1hc2tlZENhcmROdW1iZXIgPSByZXNwb25zZS5jY1BheS5jYXJkTnVtYmVyO1xyXG5cdCAgICBjYXJkRGF0YS5NYW51YWxBdXRoQ29kZSA9IHJlc3BvbnNlLmNjUGF5LmFwcHJvdmFsQ29kZS50cmltKCk7XHJcblx0ICB9XHJcbiAgICByZXR1cm4gY2FyZERhdGE7XHJcbiAgfVxyXG4gIFxyXG5cdCNwcmVwYXJlUmVjZWlwdHMocmVzcG9uc2UpIHtcclxuXHRcdGxldCBkZXZpY2VEYXRhID0ge1xyXG5cdFx0XHRDdXN0b21lclJlY2VpcHQ6IFwiUGF5bWVudCBmYWlsZWRcIixcclxuXHRcdFx0TWVyY2hhbnRSZWNlaXB0OiBcIlBheW1lbnQgZmFpbGVkXCJcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5jY1BheSkge1xyXG5cdFx0XHRsZXQgcmVjZWlwdFN0ciA9IHRoaXMuI3ByZXBhcmVSZWNlaXB0KHJlc3BvbnNlKTtcclxuXHRcdFx0ZGV2aWNlRGF0YS5DdXN0b21lclJlY2VpcHQgPSByZWNlaXB0U3RyO1xyXG5cdFx0XHRkZXZpY2VEYXRhLk1lcmNoYW50UmVjZWlwdCA9IHJlY2VpcHRTdHI7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZGV2aWNlRGF0YTtcclxuXHR9XHJcblx0XHJcblx0I3ByZXBhcmVSZWNlaXB0KHJlc3BvbnNlKSB7XHJcblx0XHRpZiAocmVzcG9uc2UuY29tbWFuZE5hbWUgPT09IFwiQ0NQYXkuUmV2ZXJzZUxhc3RQYXltZW50XCIpXHJcblx0XHRcdHJldHVybiB0aGlzLiNwcmVwYXJlQ3VzdG9tZXJSZWNlaXB0Rm9yUmVmdW5kKHJlc3BvbnNlLmNjUGF5KVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gdGhpcy4jcHJlcGFyZUN1c3RvbWVyUmVjZWlwdEZvclBheW1lbnQocmVzcG9uc2UuY2NQYXkpO1xyXG5cdH1cclxuXHRcclxuXHQjcHJlcGFyZUN1c3RvbWVyUmVjZWlwdEZvclBheW1lbnQoY2NQYXkpIHtcclxuXHRcdHJldHVybiB0aGlzLiNwcmVwYXJlQ3VzdG9tZXJSZWNlaXB0KGNjUGF5LCBcIkFDUVVJU1RPXCIpO1xyXG5cdH1cclxuXHRcclxuXHQjcHJlcGFyZUN1c3RvbWVyUmVjZWlwdEZvclJlZnVuZChjY1BheSkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI3ByZXBhcmVDdXN0b21lclJlY2VpcHQoY2NQYXksIFwiUklNQk9SU09cIik7XHJcblx0fVxyXG5cdFxyXG5cdCNwcmVwYXJlQ3VzdG9tZXJSZWNlaXB0KGNjUGF5LCBvcGVyYXRpb25EZXNjcikge1xyXG5cdFx0bGV0IHJlc3VsdCA9IFtdO1xyXG5cdFx0aWYgKGNjUGF5LnJlZnVzYWxBY3Rpb25Db2RlID09PSBcIjAwMFwiKVxyXG5cdFx0XHRyZXN1bHQucHVzaChgICAgICAgICAgICAgICAke29wZXJhdGlvbkRlc2NyfTogJHtjY1BheS5hY3F1aXJlck5hbWV9YCk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHJlc3VsdC5wdXNoKGAgICAgT1BFUkFaSU9ORSBGQUxMSVRBOiAke2NjUGF5LmFjcXVpcmVyTmFtZX1gKTtcclxuXHRcdFxyXG5cdFx0cmVzdWx0LnB1c2goYERBVEE6ICR7dGhpcy4jZ2V0RGF0ZShjY1BheS50cmFuc2FjdGlvbkRhdGVUaW1lKX0gICAgICAgICAgICAgICAgICAgICAgICBPUkE6ICR7dGhpcy4jZ2V0VGltZShjY1BheS50cmFuc2FjdGlvbkRhdGVUaW1lKX1gKTtcclxuXHRcdHJlc3VsdC5wdXNoKGBFc2VyYy46ICR7Y2NQYXkubWVyY2hhbnRJRH0gICAgIEEuSS5JLkM6ICR7Y2NQYXkuYWNxdWlyZXJJRH1gKTtcclxuXHRcdHJlc3VsdC5wdXNoKGBUTUw6ICR7Y2NQYXkudGVybWluYWxJRH0gICAgICAgICAgICAgICAgICAgICAgIENWTVI6ICR7Y2NQYXkuY3Ztcn1gKTtcclxuXHRcdHJlc3VsdC5wdXNoKGBBSUQ6ICR7Y2NQYXkuYWlkLnRyaW0oKX0gICAgICAgICAgICAgIFRWUjogJHtjY1BheS50dnJ9YCk7XHJcblx0XHRyZXN1bHQucHVzaChgQVJDOiAke2NjUGF5LmFyY30gICAgICBBVEM6ICR7Y2NQYXkuYXRjfSAgICAgIFRDQzogJHtjY1BheS50Y2N9ICAgICAgVFQ6ICR7Y2NQYXkudHR9YCk7XHJcblx0XHRyZXN1bHQucHVzaChgVU46ICR7Y2NQYXkudW59ICAgICAgICAgQVBQTC46ICR7Y2NQYXkuYXBwbGxhYmVsfWApO1xyXG5cdFx0cmVzdWx0LnB1c2goYFBBTjogJHtjY1BheS5jYXJkTnVtYmVyfSAgICAgICAgICAgIFNUQU46ICR7Y2NQYXkuc3lzdGVtVHJhY2VBdWRpdE51bWJlcn1gKTtcclxuXHRcdHJlc3VsdC5wdXNoKGAgICAgICAgICAgICAgICAgICAgQVVUOiAke2NjUGF5LmFwcHJvdmFsQ29kZX1gKTtcclxuXHJcblx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcXG5cIik7XHJcblx0fVxyXG5cclxuXHQjZ2V0RGF0ZShkYXRlVGltZSkge1xyXG5cdFx0bGV0IGRheSA9IGRhdGVUaW1lLnN1YnN0cmluZygwLCAyKTtcclxuXHRcdGxldCBtb250aCA9IGRhdGVUaW1lLnN1YnN0cmluZygyLCA0KTtcclxuXHRcdGxldCB5ZWFyID0gZGF0ZVRpbWUuc3Vic3RyaW5nKDQsIDYpO1xyXG5cdFx0cmV0dXJuIGAke2RheX0vJHttb250aH0vJHt5ZWFyfWBcclxuXHR9XHJcblx0XHJcblx0I2dldFRpbWUoZGF0ZVRpbWUpIHtcclxuXHRcdGxldCBob3VyID0gZGF0ZVRpbWUuc3Vic3RyaW5nKDYsIDgpO1xyXG5cdFx0bGV0IG1pbiA9IGRhdGVUaW1lLnN1YnN0cmluZyg4LCAxMCk7IFxyXG5cdFx0cmV0dXJuIGAke2hvdXJ9OiR7bWlufWBcclxuXHR9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../script/roto-pay-cc.js\n");

/***/ }),

/***/ "../script/roto-prn-receipt.js":
/*!*************************************!*\
  !*** ../script/roto-prn-receipt.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"ReceiptPrinter\": () => (/* binding */ ReceiptPrinter)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_printer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-printer */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-printer.js\");\n/* harmony import */ var _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./services/roto-srv-lights */ \"../script/services/roto-srv-lights.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n/* harmony import */ var _roto_receipt_fields_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./roto-receipt-fields-utils */ \"../script/roto-receipt-fields-utils.js\");\n\r\n\r\n\r\n\r\n\r\nclass ReceiptPrinter extends _common_script_device_manager_dm_printer__WEBPACK_IMPORTED_MODULE_0__.DMPrinter {\r\n  #initialized;\r\n  #ReceiptDefinitionName = \"VGSRototypeReceipt\";\r\n  \r\n  static get classAlias() {\r\n    return \"prn_roto_receipt\";\r\n  }\r\n\r\n  constructor(plufginInfo, connector) {\r\n    super(plufginInfo);\r\n    this.rototypeConnector = connector;\r\n    this.#initialized = false;\r\n   \tthis.rototypeConnector.onReceiptStatusChange = s => this.#printerStatusChangeEvent(s);\r\n  }\r\n    \r\n  #printerStatusChangeEvent(svcStatus) {\r\n\t  let deviceOnline = svcStatus.common && ((svcStatus.common.device === \"online\") || (svcStatus.common.device === \"deviceBusy\"));\r\n\t\tif (deviceOnline)\r\n\t\t\tthis.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_2__.DEVICE_STATUS.READY);\r\n\t\telse\r\n\t\t\tthis.setError(`Status: ${svcStatus.common.device}, Paper: ${svcStatus.printer.paper}`);\r\n  }\r\n  \r\n  async #initializePrinter() {\r\n    const VGSDefinitionMedia = `XFSMEDIA \"${this.#ReceiptDefinitionName}\"\r\n    BEGIN\r\n        UNIT MM, 1, 1\r\n        SIZE 80, 0\r\n    END`\r\n\r\n    if (!this.#initialized && (this.rototypeConnector.srvReceiptPrinter)) {\r\n      await this.rototypeConnector.srvReceiptPrinter.loadDefinition(VGSDefinitionMedia)\r\n          .then(() => this.#initialized = true)\r\n          .catch(e => console.log(e));     \r\n    }\r\n    this.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_2__.DEVICE_STATUS.READY);\r\n  }\r\n  \r\n\trefreshStatus() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvCCPay)\r\n\t\t\treturn this.rototypeConnector.srvReceiptPrinter.updateStatus();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to refresh status \" + this.pluginName);\r\n\t}\r\n\r\n\treset() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvReceiptPrinter)\r\n\t\t\treturn this.rototypeConnector.srvReceiptPrinter.reset();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to reset \" + this.pluginName);\r\n\t}\r\n\r\n \tasync performMaintenance() {\r\n\t\tawait this.reset();\r\n\t}\r\n\r\n  async processReceipt(receiptPrintTemplate) {\r\n    await this.#initializePrinter();\r\n\r\n    if (!this.rototypeConnector.srvReceiptPrinter) \r\n      reject(\"unable to find srvReceiptPrinter service\");\r\n    else if (!this.#initialized)\r\n      reject(\"Printer not initialized\");\r\n    else {\r\n      this.rototypeConnector.lightOn(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.LIGHT_NAME.RECEIPT_PRINTER, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.FLASH_RATE.CONTINUOUS, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.LIGHT_COLOR.BLUE);\r\n\t\t\tlet fields = (0,_roto_receipt_fields_utils__WEBPACK_IMPORTED_MODULE_3__.getReceiptFields)(receiptPrintTemplate);\r\n\t\t\t\r\n\t\t\treturn this.#loadPrinterDefinition(fields)\r\n\t\t\t\t\t.then(() => this.#printForm(fields))\r\n\t\t\t\t\t.then(() => this.rototypeConnector.lightOn(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.LIGHT_NAME.RECEIPT_PRINTER, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.FLASH_RATE.SLOW, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.LIGHT_COLOR.GREEN))\r\n\t\t\t\t\t.catch(e => this.#handlePrintError(e));\r\n\t\t}\r\n\t}\r\n\t\t\r\n\t#handlePrintError(error) {\r\n\t\tthis.rototypeConnector.lightOn(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.LIGHT_NAME.RECEIPT_PRINTER, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.FLASH_RATE.QUICK, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_1__.LIGHT_COLOR.RED);\r\n\t\tconsole.log(error);\t\t\r\n\t\tthrow error;\r\n\t}\r\n\t\r\n\t#loadPrinterDefinition(fields) {\r\n\t\tlet definition = this.#prepareDefinition(fields);\r\n\t\treturn this.rototypeConnector.srvReceiptPrinter.loadDefinition(definition)\r\n\t\t\t\t.then(payload => { \r\n\t\t\t\t\t\tif (payload.completionCode !== \"success\")\r\n\t\t\t\t\t\t\tthrow new Error(payload.errorDescription ? payload.errorDescription : payload.errorCode)\r\n\t\t\t\t\t});\r\n\t}\r\n\t\r\n\t#printForm(fields) {\r\n\t\tlet message = this.#createPrintFormPayload(fields.filter(f => f.xfsField));\r\n\t\treturn this.rototypeConnector.srvReceiptPrinter.printForm(message)\r\n\t\t\t\t.then(payload => { \r\n\t\t\t\t\t\tif (payload.completionCode !== \"success\")\r\n\t\t\t\t\t\t\tthrow new Error(payload.errorDescription ? payload.errorDescription : payload.errorCode)\r\n\t\t\t\t\t});\r\n\t}\r\n\t\r\n\t#createPrintFormPayload(fields) {\r\n    return {\r\n        timeout: 10000, \r\n        formName: this.#ReceiptDefinitionName,\r\n        mediaName: this.#ReceiptDefinitionName,\r\n        alignment: \"formDefinition\",\r\n        fields: this.#createFieldsForPayload(fields),\r\n        mediaControl: {\r\n          expel: true\r\n        }\r\n      };\r\n\t}\r\n\t\r\n\t#createFieldsForPayload(fields) {\r\n\t\tlet result = {};\r\n\t  for (let field of fields) {\r\n\t\t  result[field.fieldName] = field.fieldValue;\r\n\t\t}\t\t\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\t#prepareDefinition(fields) {\r\n\t\tlet definition = this.#getDefinitionHeader();\r\n\t  for (let field of fields.filter(f => f.xfsField)) {\r\n\t\t\tdefinition += \"\\n\" + field.xfsField;\r\n\t  }\r\n\t\t\t\r\n\t\tdefinition += \"\\nEND\";\r\n\r\n\t\treturn definition;\r\n\t}\r\n\t\r\n\t#getDefinitionHeader() {\r\n\t\treturn `XFSFORM \"${this.#ReceiptDefinitionName}\"\r\n\t    BEGIN\r\n\t        UNIT MM, 1, 1\r\n\t        SIZE 80, 400\r\n\t        VERSION 1, 0, \"21/7/2022\", \"VGS Rototype Receipt\"`;\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tcHJuLXJlY2VpcHQuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBcUU7QUFDWTtBQUNWO0FBQ1I7QUFDL0Q7QUFDTyw2QkFBNkIsK0VBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix1RkFBbUI7QUFDM0M7QUFDQSw0QkFBNEIsd0JBQXdCLFdBQVcsd0JBQXdCO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyw0QkFBNEI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUZBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLGlGQUEwQixFQUFFLDRFQUFxQixFQUFFLHVFQUFnQjtBQUN4RyxnQkFBZ0IsNEVBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxpRkFBMEIsRUFBRSxzRUFBZSxFQUFFLHdFQUFpQjtBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlGQUEwQixFQUFFLHVFQUFnQixFQUFFLHNFQUFlO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw0QkFBNEI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3JvdG8tcHJuLXJlY2VpcHQuanM/NTA2OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBETVByaW50ZXIgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1wcmludGVyJztcclxuaW1wb3J0IHsgTElHSFRfTkFNRSwgRkxBU0hfUkFURSwgTElHSFRfQ09MT1IgfSBmcm9tICcuL3NlcnZpY2VzL3JvdG8tc3J2LWxpZ2h0cyc7XHJcbmltcG9ydCB7IERFVklDRV9TVEFUVVMgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1tb2RlbCc7XHJcbmltcG9ydCB7IGdldFJlY2VpcHRGaWVsZHMgfSBmcm9tICcuL3JvdG8tcmVjZWlwdC1maWVsZHMtdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlY2VpcHRQcmludGVyIGV4dGVuZHMgRE1QcmludGVyIHtcclxuICAjaW5pdGlhbGl6ZWQ7XHJcbiAgI1JlY2VpcHREZWZpbml0aW9uTmFtZSA9IFwiVkdTUm90b3R5cGVSZWNlaXB0XCI7XHJcbiAgXHJcbiAgc3RhdGljIGdldCBjbGFzc0FsaWFzKCkge1xyXG4gICAgcmV0dXJuIFwicHJuX3JvdG9fcmVjZWlwdFwiO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IocGx1ZmdpbkluZm8sIGNvbm5lY3Rvcikge1xyXG4gICAgc3VwZXIocGx1ZmdpbkluZm8pO1xyXG4gICAgdGhpcy5yb3RvdHlwZUNvbm5lY3RvciA9IGNvbm5lY3RvcjtcclxuICAgIHRoaXMuI2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgIFx0dGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5vblJlY2VpcHRTdGF0dXNDaGFuZ2UgPSBzID0+IHRoaXMuI3ByaW50ZXJTdGF0dXNDaGFuZ2VFdmVudChzKTtcclxuICB9XHJcbiAgICBcclxuICAjcHJpbnRlclN0YXR1c0NoYW5nZUV2ZW50KHN2Y1N0YXR1cykge1xyXG5cdCAgbGV0IGRldmljZU9ubGluZSA9IHN2Y1N0YXR1cy5jb21tb24gJiYgKChzdmNTdGF0dXMuY29tbW9uLmRldmljZSA9PT0gXCJvbmxpbmVcIikgfHwgKHN2Y1N0YXR1cy5jb21tb24uZGV2aWNlID09PSBcImRldmljZUJ1c3lcIikpO1xyXG5cdFx0aWYgKGRldmljZU9ubGluZSlcclxuXHRcdFx0dGhpcy5zZXREZXZpY2VTdGF0dXMoREVWSUNFX1NUQVRVUy5SRUFEWSk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHRoaXMuc2V0RXJyb3IoYFN0YXR1czogJHtzdmNTdGF0dXMuY29tbW9uLmRldmljZX0sIFBhcGVyOiAke3N2Y1N0YXR1cy5wcmludGVyLnBhcGVyfWApO1xyXG4gIH1cclxuICBcclxuICBhc3luYyAjaW5pdGlhbGl6ZVByaW50ZXIoKSB7XHJcbiAgICBjb25zdCBWR1NEZWZpbml0aW9uTWVkaWEgPSBgWEZTTUVESUEgXCIke3RoaXMuI1JlY2VpcHREZWZpbml0aW9uTmFtZX1cIlxyXG4gICAgQkVHSU5cclxuICAgICAgICBVTklUIE1NLCAxLCAxXHJcbiAgICAgICAgU0laRSA4MCwgMFxyXG4gICAgRU5EYFxyXG5cclxuICAgIGlmICghdGhpcy4jaW5pdGlhbGl6ZWQgJiYgKHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2UmVjZWlwdFByaW50ZXIpKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2UmVjZWlwdFByaW50ZXIubG9hZERlZmluaXRpb24oVkdTRGVmaW5pdGlvbk1lZGlhKVxyXG4gICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4jaW5pdGlhbGl6ZWQgPSB0cnVlKVxyXG4gICAgICAgICAgLmNhdGNoKGUgPT4gY29uc29sZS5sb2coZSkpOyAgICAgXHJcbiAgICB9XHJcbiAgICB0aGlzLnNldERldmljZVN0YXR1cyhERVZJQ0VfU1RBVFVTLlJFQURZKTtcclxuICB9XHJcbiAgXHJcblx0cmVmcmVzaFN0YXR1cygpIHtcclxuXHRcdGlmICh0aGlzLnJvdG90eXBlQ29ubmVjdG9yICYmIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkpXHJcblx0XHRcdHJldHVybiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydlJlY2VpcHRQcmludGVyLnVwZGF0ZVN0YXR1cygpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJGYWlsZWQgdG8gcmVmcmVzaCBzdGF0dXMgXCIgKyB0aGlzLnBsdWdpbk5hbWUpO1xyXG5cdH1cclxuXHJcblx0cmVzZXQoKSB7XHJcblx0XHRpZiAodGhpcy5yb3RvdHlwZUNvbm5lY3RvciAmJiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydlJlY2VpcHRQcmludGVyKVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZSZWNlaXB0UHJpbnRlci5yZXNldCgpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJGYWlsZWQgdG8gcmVzZXQgXCIgKyB0aGlzLnBsdWdpbk5hbWUpO1xyXG5cdH1cclxuXHJcbiBcdGFzeW5jIHBlcmZvcm1NYWludGVuYW5jZSgpIHtcclxuXHRcdGF3YWl0IHRoaXMucmVzZXQoKTtcclxuXHR9XHJcblxyXG4gIGFzeW5jIHByb2Nlc3NSZWNlaXB0KHJlY2VpcHRQcmludFRlbXBsYXRlKSB7XHJcbiAgICBhd2FpdCB0aGlzLiNpbml0aWFsaXplUHJpbnRlcigpO1xyXG5cclxuICAgIGlmICghdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZSZWNlaXB0UHJpbnRlcikgXHJcbiAgICAgIHJlamVjdChcInVuYWJsZSB0byBmaW5kIHNydlJlY2VpcHRQcmludGVyIHNlcnZpY2VcIik7XHJcbiAgICBlbHNlIGlmICghdGhpcy4jaW5pdGlhbGl6ZWQpXHJcbiAgICAgIHJlamVjdChcIlByaW50ZXIgbm90IGluaXRpYWxpemVkXCIpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPbihMSUdIVF9OQU1FLlJFQ0VJUFRfUFJJTlRFUiwgRkxBU0hfUkFURS5DT05USU5VT1VTLCBMSUdIVF9DT0xPUi5CTFVFKTtcclxuXHRcdFx0bGV0IGZpZWxkcyA9IGdldFJlY2VpcHRGaWVsZHMocmVjZWlwdFByaW50VGVtcGxhdGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHRoaXMuI2xvYWRQcmludGVyRGVmaW5pdGlvbihmaWVsZHMpXHJcblx0XHRcdFx0XHQudGhlbigoKSA9PiB0aGlzLiNwcmludEZvcm0oZmllbGRzKSlcclxuXHRcdFx0XHRcdC50aGVuKCgpID0+IHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPbihMSUdIVF9OQU1FLlJFQ0VJUFRfUFJJTlRFUiwgRkxBU0hfUkFURS5TTE9XLCBMSUdIVF9DT0xPUi5HUkVFTikpXHJcblx0XHRcdFx0XHQuY2F0Y2goZSA9PiB0aGlzLiNoYW5kbGVQcmludEVycm9yKGUpKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHRcclxuXHQjaGFuZGxlUHJpbnRFcnJvcihlcnJvcikge1xyXG5cdFx0dGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5saWdodE9uKExJR0hUX05BTUUuUkVDRUlQVF9QUklOVEVSLCBGTEFTSF9SQVRFLlFVSUNLLCBMSUdIVF9DT0xPUi5SRUQpO1xyXG5cdFx0Y29uc29sZS5sb2coZXJyb3IpO1x0XHRcclxuXHRcdHRocm93IGVycm9yO1xyXG5cdH1cclxuXHRcclxuXHQjbG9hZFByaW50ZXJEZWZpbml0aW9uKGZpZWxkcykge1xyXG5cdFx0bGV0IGRlZmluaXRpb24gPSB0aGlzLiNwcmVwYXJlRGVmaW5pdGlvbihmaWVsZHMpO1xyXG5cdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2UmVjZWlwdFByaW50ZXIubG9hZERlZmluaXRpb24oZGVmaW5pdGlvbilcclxuXHRcdFx0XHQudGhlbihwYXlsb2FkID0+IHsgXHJcblx0XHRcdFx0XHRcdGlmIChwYXlsb2FkLmNvbXBsZXRpb25Db2RlICE9PSBcInN1Y2Nlc3NcIilcclxuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IocGF5bG9hZC5lcnJvckRlc2NyaXB0aW9uID8gcGF5bG9hZC5lcnJvckRlc2NyaXB0aW9uIDogcGF5bG9hZC5lcnJvckNvZGUpXHJcblx0XHRcdFx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0I3ByaW50Rm9ybShmaWVsZHMpIHtcclxuXHRcdGxldCBtZXNzYWdlID0gdGhpcy4jY3JlYXRlUHJpbnRGb3JtUGF5bG9hZChmaWVsZHMuZmlsdGVyKGYgPT4gZi54ZnNGaWVsZCkpO1xyXG5cdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2UmVjZWlwdFByaW50ZXIucHJpbnRGb3JtKG1lc3NhZ2UpXHJcblx0XHRcdFx0LnRoZW4ocGF5bG9hZCA9PiB7IFxyXG5cdFx0XHRcdFx0XHRpZiAocGF5bG9hZC5jb21wbGV0aW9uQ29kZSAhPT0gXCJzdWNjZXNzXCIpXHJcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKHBheWxvYWQuZXJyb3JEZXNjcmlwdGlvbiA/IHBheWxvYWQuZXJyb3JEZXNjcmlwdGlvbiA6IHBheWxvYWQuZXJyb3JDb2RlKVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdCNjcmVhdGVQcmludEZvcm1QYXlsb2FkKGZpZWxkcykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0aW1lb3V0OiAxMDAwMCwgXHJcbiAgICAgICAgZm9ybU5hbWU6IHRoaXMuI1JlY2VpcHREZWZpbml0aW9uTmFtZSxcclxuICAgICAgICBtZWRpYU5hbWU6IHRoaXMuI1JlY2VpcHREZWZpbml0aW9uTmFtZSxcclxuICAgICAgICBhbGlnbm1lbnQ6IFwiZm9ybURlZmluaXRpb25cIixcclxuICAgICAgICBmaWVsZHM6IHRoaXMuI2NyZWF0ZUZpZWxkc0ZvclBheWxvYWQoZmllbGRzKSxcclxuICAgICAgICBtZWRpYUNvbnRyb2w6IHtcclxuICAgICAgICAgIGV4cGVsOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cdH1cclxuXHRcclxuXHQjY3JlYXRlRmllbGRzRm9yUGF5bG9hZChmaWVsZHMpIHtcclxuXHRcdGxldCByZXN1bHQgPSB7fTtcclxuXHQgIGZvciAobGV0IGZpZWxkIG9mIGZpZWxkcykge1xyXG5cdFx0ICByZXN1bHRbZmllbGQuZmllbGROYW1lXSA9IGZpZWxkLmZpZWxkVmFsdWU7XHJcblx0XHR9XHRcdFxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9XHJcblx0XHJcblx0I3ByZXBhcmVEZWZpbml0aW9uKGZpZWxkcykge1xyXG5cdFx0bGV0IGRlZmluaXRpb24gPSB0aGlzLiNnZXREZWZpbml0aW9uSGVhZGVyKCk7XHJcblx0ICBmb3IgKGxldCBmaWVsZCBvZiBmaWVsZHMuZmlsdGVyKGYgPT4gZi54ZnNGaWVsZCkpIHtcclxuXHRcdFx0ZGVmaW5pdGlvbiArPSBcIlxcblwiICsgZmllbGQueGZzRmllbGQ7XHJcblx0ICB9XHJcblx0XHRcdFxyXG5cdFx0ZGVmaW5pdGlvbiArPSBcIlxcbkVORFwiO1xyXG5cclxuXHRcdHJldHVybiBkZWZpbml0aW9uO1xyXG5cdH1cclxuXHRcclxuXHQjZ2V0RGVmaW5pdGlvbkhlYWRlcigpIHtcclxuXHRcdHJldHVybiBgWEZTRk9STSBcIiR7dGhpcy4jUmVjZWlwdERlZmluaXRpb25OYW1lfVwiXHJcblx0ICAgIEJFR0lOXHJcblx0ICAgICAgICBVTklUIE1NLCAxLCAxXHJcblx0ICAgICAgICBTSVpFIDgwLCA0MDBcclxuXHQgICAgICAgIFZFUlNJT04gMSwgMCwgXCIyMS83LzIwMjJcIiwgXCJWR1MgUm90b3R5cGUgUmVjZWlwdFwiYDtcclxuXHR9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../script/roto-prn-receipt.js\n");

/***/ }),

/***/ "../script/roto-prn-ticket.js":
/*!************************************!*\
  !*** ../script/roto-prn-ticket.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"TicketPrinter\": () => (/* binding */ TicketPrinter)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_printer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-printer */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-printer.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\n\r\nclass TicketPrinter extends _common_script_device_manager_dm_printer__WEBPACK_IMPORTED_MODULE_0__.DMPrinter {\r\n  rototypeConnector;\r\n  \r\n  static get classAlias() {\r\n    return \"prn_roto_ticket\";\r\n  }\r\n  \r\n  constructor(plufginInfo, connector) {\r\n    super(plufginInfo);\r\n    this.rototypeConnector = connector;\r\n   \tthis.rototypeConnector.onTckStatusChange = s => this.#printerStatusChangeEvent(s);\r\n  }\r\n    \r\n  #printerStatusChangeEvent(svcStatus) {\r\n\t  let deviceOnline = svcStatus.common && ((svcStatus.common.device === \"online\") || (svcStatus.common.device === \"deviceBusy\"));\r\n\t  if (deviceOnline)\r\n\t\t\tthis.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_STATUS.READY);\r\n\t\telse\r\n\t\t\tthis.setError(`Status: ${svcStatus.common.device}, Paper: ${svcStatus.printer.paper}`);\r\n  }\r\n  \r\n\trefreshStatus() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvCCPay)\r\n\t\t\treturn this.rototypeConnector.srvTicketPrinter.updateStatus();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to refresh status \" + this.pluginName);\r\n\t}\r\n\r\n\treset() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvTicketPrinter)\r\n\t\t\treturn this.rototypeConnector.srvTicketPrinter.reset();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to reset \" + this.pluginName);\r\n\t}\r\n\r\n \tasync performMaintenance() {\r\n\t\tawait this.reset();\r\n\t}\r\n\r\n  processDoc(doc) {\r\n    return new Promise((resolve, reject) => {\r\n      if (!this.rototypeConnector.srvTicketPrinter) \r\n        reject(new Error(\"unable to find srvTicketPrinter service\"));\r\n      else {\r\n        this.rototypeConnector.lightOn(\"ticketprinter\", \"continuous\", \"blue\");\r\n        \r\n        this.rototypeConnector.srvTicketPrinter.printRaw(doc, false)\r\n          .then(p => _onCompletion(this.rototypeConnector, p))\r\n          .catch(e => console.log(e));\r\n      \r\n        function _onCompletion(connector, payload) {\r\n          if (payload.completionCode === \"success\") {\r\n            connector.lightOn(\"ticketprinter\", \"medium\", \"green\");\r\n            resolve(payload.data);\r\n          }\r\n          else {\r\n            connector.lightOn(\"ticketprinter\", \"quick\", \"red\");\r\n            reject(new Error(payload.errorDescription ? payload.errorDescription : payload.errorCode));\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tcHJuLXRpY2tldC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUU7QUFDRTtBQUN2RTtBQUNPLDRCQUE0QiwrRUFBUztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUZBQW1CO0FBQzNDO0FBQ0EsNEJBQTRCLHdCQUF3QixXQUFXLHdCQUF3QjtBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uL3NjcmlwdC9yb3RvLXBybi10aWNrZXQuanM/YmRiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBETVByaW50ZXIgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1wcmludGVyJztcclxuaW1wb3J0IHsgREVWSUNFX1NUQVRVUyB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLW1vZGVsJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUaWNrZXRQcmludGVyIGV4dGVuZHMgRE1QcmludGVyIHtcclxuICByb3RvdHlwZUNvbm5lY3RvcjtcclxuICBcclxuICBzdGF0aWMgZ2V0IGNsYXNzQWxpYXMoKSB7XHJcbiAgICByZXR1cm4gXCJwcm5fcm90b190aWNrZXRcIjtcclxuICB9XHJcbiAgXHJcbiAgY29uc3RydWN0b3IocGx1ZmdpbkluZm8sIGNvbm5lY3Rvcikge1xyXG4gICAgc3VwZXIocGx1ZmdpbkluZm8pO1xyXG4gICAgdGhpcy5yb3RvdHlwZUNvbm5lY3RvciA9IGNvbm5lY3RvcjtcclxuICAgXHR0aGlzLnJvdG90eXBlQ29ubmVjdG9yLm9uVGNrU3RhdHVzQ2hhbmdlID0gcyA9PiB0aGlzLiNwcmludGVyU3RhdHVzQ2hhbmdlRXZlbnQocyk7XHJcbiAgfVxyXG4gICAgXHJcbiAgI3ByaW50ZXJTdGF0dXNDaGFuZ2VFdmVudChzdmNTdGF0dXMpIHtcclxuXHQgIGxldCBkZXZpY2VPbmxpbmUgPSBzdmNTdGF0dXMuY29tbW9uICYmICgoc3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2UgPT09IFwib25saW5lXCIpIHx8IChzdmNTdGF0dXMuY29tbW9uLmRldmljZSA9PT0gXCJkZXZpY2VCdXN5XCIpKTtcclxuXHQgIGlmIChkZXZpY2VPbmxpbmUpXHJcblx0XHRcdHRoaXMuc2V0RGV2aWNlU3RhdHVzKERFVklDRV9TVEFUVVMuUkVBRFkpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnNldEVycm9yKGBTdGF0dXM6ICR7c3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2V9LCBQYXBlcjogJHtzdmNTdGF0dXMucHJpbnRlci5wYXBlcn1gKTtcclxuICB9XHJcbiAgXHJcblx0cmVmcmVzaFN0YXR1cygpIHtcclxuXHRcdGlmICh0aGlzLnJvdG90eXBlQ29ubmVjdG9yICYmIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2Q0NQYXkpXHJcblx0XHRcdHJldHVybiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydlRpY2tldFByaW50ZXIudXBkYXRlU3RhdHVzKCk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChcIkZhaWxlZCB0byByZWZyZXNoIHN0YXR1cyBcIiArIHRoaXMucGx1Z2luTmFtZSk7XHJcblx0fVxyXG5cclxuXHRyZXNldCgpIHtcclxuXHRcdGlmICh0aGlzLnJvdG90eXBlQ29ubmVjdG9yICYmIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2VGlja2V0UHJpbnRlcilcclxuXHRcdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2VGlja2V0UHJpbnRlci5yZXNldCgpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJGYWlsZWQgdG8gcmVzZXQgXCIgKyB0aGlzLnBsdWdpbk5hbWUpO1xyXG5cdH1cclxuXHJcbiBcdGFzeW5jIHBlcmZvcm1NYWludGVuYW5jZSgpIHtcclxuXHRcdGF3YWl0IHRoaXMucmVzZXQoKTtcclxuXHR9XHJcblxyXG4gIHByb2Nlc3NEb2MoZG9jKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2VGlja2V0UHJpbnRlcikgXHJcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcInVuYWJsZSB0byBmaW5kIHNydlRpY2tldFByaW50ZXIgc2VydmljZVwiKSk7XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPbihcInRpY2tldHByaW50ZXJcIiwgXCJjb250aW51b3VzXCIsIFwiYmx1ZVwiKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydlRpY2tldFByaW50ZXIucHJpbnRSYXcoZG9jLCBmYWxzZSlcclxuICAgICAgICAgIC50aGVuKHAgPT4gX29uQ29tcGxldGlvbih0aGlzLnJvdG90eXBlQ29ubmVjdG9yLCBwKSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUubG9nKGUpKTtcclxuICAgICAgXHJcbiAgICAgICAgZnVuY3Rpb24gX29uQ29tcGxldGlvbihjb25uZWN0b3IsIHBheWxvYWQpIHtcclxuICAgICAgICAgIGlmIChwYXlsb2FkLmNvbXBsZXRpb25Db2RlID09PSBcInN1Y2Nlc3NcIikge1xyXG4gICAgICAgICAgICBjb25uZWN0b3IubGlnaHRPbihcInRpY2tldHByaW50ZXJcIiwgXCJtZWRpdW1cIiwgXCJncmVlblwiKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShwYXlsb2FkLmRhdGEpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbm5lY3Rvci5saWdodE9uKFwidGlja2V0cHJpbnRlclwiLCBcInF1aWNrXCIsIFwicmVkXCIpO1xyXG4gICAgICAgICAgICByZWplY3QobmV3IEVycm9yKHBheWxvYWQuZXJyb3JEZXNjcmlwdGlvbiA/IHBheWxvYWQuZXJyb3JEZXNjcmlwdGlvbiA6IHBheWxvYWQuZXJyb3JDb2RlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../script/roto-prn-ticket.js\n");

/***/ }),

/***/ "../script/roto-rdr-barcode.js":
/*!*************************************!*\
  !*** ../script/roto-rdr-barcode.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"BarcodeReader\": () => (/* binding */ BarcodeReader)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_reader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-reader */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-reader.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n\r\n\r\n\r\nclass BarcodeReader extends _common_script_device_manager_dm_reader__WEBPACK_IMPORTED_MODULE_0__.DMReader {\r\n  rototypeConnector;\r\n  \r\n  static get classAlias() {\r\n    return \"rdr_roto_barcode\";\r\n  }\r\n\r\n  constructor(plufginInfo, connector) {\r\n    super(plufginInfo);\r\n    this.rototypeConnector = connector;\r\n   \tthis.rototypeConnector.onBarcodeStatusChange = s => this.#barcodeStatusChangeEvent(s);\r\n  }\r\n    \r\n  #barcodeStatusChangeEvent(svcStatus) {\r\n\t  let deviceOnline = svcStatus.common && ((svcStatus.common.device === \"online\") || (svcStatus.common.device === \"deviceBusy\"));\r\n\t  if (deviceOnline)\r\n\t\t\tthis.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_STATUS.READY);\r\n\t\telse\r\n\t\t\tthis.setError(`Status: ${svcStatus.common.device}, Scanner: ${svcStatus.barcodeReader.scanner}`);\r\n  }\r\n  \r\n\trefreshStatus() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvCCPay)\r\n\t\t\treturn this.rototypeConnector.srvBarcodeReader.updateStatus();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to refresh status \" + this.pluginName);\r\n\t}\r\n\r\n\treset() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvBarcodeReader)\r\n\t\t\treturn this.rototypeConnector.srvBarcodeReader.reset();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to reset \" + this.pluginName);\r\n\t}\r\n\r\n \tasync performMaintenance() {\r\n\t\tawait this.reset();\r\n\t}\r\n\r\n  startRead() {\r\n    if (!this.rototypeConnector.srvBarcodeReader) \r\n      reject(\"unable to find srvBarcodeReader service\");\r\n    else {\r\n      this.rototypeConnector.lightOn(\"barcodereader\", \"medium\", \"blue\");\r\n      this.rototypeConnector.srvBarcodeReader.startRead()\r\n          .then(r => this._processMediaRead(r))\r\n          .catch(e => console.log(e));\r\n    }\r\n  }\r\n  \r\n  _processMediaRead(read) {\r\n    let mediaRead = {};   \r\n    mediaRead.MediaCode = read.barcodeData;\r\n    mediaRead.MediaCodeList = [{\r\n      MediaCode: read.barcodeData,\r\n      MediaCodeType: 0\r\n      }];\r\n    this._triggerMediaRead(mediaRead);\r\n  }\r\n  \r\n  stopRead() {\r\n    if (!this.rototypeConnector.srvBarcodeReader) \r\n      reject(\"unable to find srvBarcodeReader service\");\r\n    else {\r\n      this.rototypeConnector.lightOff(\"barcodereader\");\r\n      this.rototypeConnector.srvBarcodeReader.stopRead();\r\n    }\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tcmRyLWJhcmNvZGUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1FO0FBQ0k7QUFDdkU7QUFDTyw0QkFBNEIsNkVBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHVGQUFtQjtBQUMzQztBQUNBLDRCQUE0Qix3QkFBd0IsYUFBYSxnQ0FBZ0M7QUFDakc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3JvdG8tcmRyLWJhcmNvZGUuanM/Mjc5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBETVJlYWRlciB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLXJlYWRlcic7XHJcbmltcG9ydCB7IERFVklDRV9TVEFUVVMgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1tb2RlbCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQmFyY29kZVJlYWRlciBleHRlbmRzIERNUmVhZGVyIHtcclxuICByb3RvdHlwZUNvbm5lY3RvcjtcclxuICBcclxuICBzdGF0aWMgZ2V0IGNsYXNzQWxpYXMoKSB7XHJcbiAgICByZXR1cm4gXCJyZHJfcm90b19iYXJjb2RlXCI7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3RvcihwbHVmZ2luSW5mbywgY29ubmVjdG9yKSB7XHJcbiAgICBzdXBlcihwbHVmZ2luSW5mbyk7XHJcbiAgICB0aGlzLnJvdG90eXBlQ29ubmVjdG9yID0gY29ubmVjdG9yO1xyXG4gICBcdHRoaXMucm90b3R5cGVDb25uZWN0b3Iub25CYXJjb2RlU3RhdHVzQ2hhbmdlID0gcyA9PiB0aGlzLiNiYXJjb2RlU3RhdHVzQ2hhbmdlRXZlbnQocyk7XHJcbiAgfVxyXG4gICAgXHJcbiAgI2JhcmNvZGVTdGF0dXNDaGFuZ2VFdmVudChzdmNTdGF0dXMpIHtcclxuXHQgIGxldCBkZXZpY2VPbmxpbmUgPSBzdmNTdGF0dXMuY29tbW9uICYmICgoc3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2UgPT09IFwib25saW5lXCIpIHx8IChzdmNTdGF0dXMuY29tbW9uLmRldmljZSA9PT0gXCJkZXZpY2VCdXN5XCIpKTtcclxuXHQgIGlmIChkZXZpY2VPbmxpbmUpXHJcblx0XHRcdHRoaXMuc2V0RGV2aWNlU3RhdHVzKERFVklDRV9TVEFUVVMuUkVBRFkpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnNldEVycm9yKGBTdGF0dXM6ICR7c3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2V9LCBTY2FubmVyOiAke3N2Y1N0YXR1cy5iYXJjb2RlUmVhZGVyLnNjYW5uZXJ9YCk7XHJcbiAgfVxyXG4gIFxyXG5cdHJlZnJlc2hTdGF0dXMoKSB7XHJcblx0XHRpZiAodGhpcy5yb3RvdHlwZUNvbm5lY3RvciAmJiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydkNDUGF5KVxyXG5cdFx0XHRyZXR1cm4gdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZCYXJjb2RlUmVhZGVyLnVwZGF0ZVN0YXR1cygpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJGYWlsZWQgdG8gcmVmcmVzaCBzdGF0dXMgXCIgKyB0aGlzLnBsdWdpbk5hbWUpO1xyXG5cdH1cclxuXHJcblx0cmVzZXQoKSB7XHJcblx0XHRpZiAodGhpcy5yb3RvdHlwZUNvbm5lY3RvciAmJiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydkJhcmNvZGVSZWFkZXIpXHJcblx0XHRcdHJldHVybiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydkJhcmNvZGVSZWFkZXIucmVzZXQoKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0cmV0dXJuIFByb21pc2UucmVqZWN0KFwiRmFpbGVkIHRvIHJlc2V0IFwiICsgdGhpcy5wbHVnaW5OYW1lKTtcclxuXHR9XHJcblxyXG4gXHRhc3luYyBwZXJmb3JtTWFpbnRlbmFuY2UoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnJlc2V0KCk7XHJcblx0fVxyXG5cclxuICBzdGFydFJlYWQoKSB7XHJcbiAgICBpZiAoIXRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2QmFyY29kZVJlYWRlcikgXHJcbiAgICAgIHJlamVjdChcInVuYWJsZSB0byBmaW5kIHNydkJhcmNvZGVSZWFkZXIgc2VydmljZVwiKTtcclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLmxpZ2h0T24oXCJiYXJjb2RlcmVhZGVyXCIsIFwibWVkaXVtXCIsIFwiYmx1ZVwiKTtcclxuICAgICAgdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZCYXJjb2RlUmVhZGVyLnN0YXJ0UmVhZCgpXHJcbiAgICAgICAgICAudGhlbihyID0+IHRoaXMuX3Byb2Nlc3NNZWRpYVJlYWQocikpXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmxvZyhlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIF9wcm9jZXNzTWVkaWFSZWFkKHJlYWQpIHtcclxuICAgIGxldCBtZWRpYVJlYWQgPSB7fTsgICBcclxuICAgIG1lZGlhUmVhZC5NZWRpYUNvZGUgPSByZWFkLmJhcmNvZGVEYXRhO1xyXG4gICAgbWVkaWFSZWFkLk1lZGlhQ29kZUxpc3QgPSBbe1xyXG4gICAgICBNZWRpYUNvZGU6IHJlYWQuYmFyY29kZURhdGEsXHJcbiAgICAgIE1lZGlhQ29kZVR5cGU6IDBcclxuICAgICAgfV07XHJcbiAgICB0aGlzLl90cmlnZ2VyTWVkaWFSZWFkKG1lZGlhUmVhZCk7XHJcbiAgfVxyXG4gIFxyXG4gIHN0b3BSZWFkKCkge1xyXG4gICAgaWYgKCF0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydkJhcmNvZGVSZWFkZXIpIFxyXG4gICAgICByZWplY3QoXCJ1bmFibGUgdG8gZmluZCBzcnZCYXJjb2RlUmVhZGVyIHNlcnZpY2VcIik7XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5saWdodE9mZihcImJhcmNvZGVyZWFkZXJcIik7XHJcbiAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2QmFyY29kZVJlYWRlci5zdG9wUmVhZCgpO1xyXG4gICAgfVxyXG4gIH1cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../script/roto-rdr-barcode.js\n");

/***/ }),

/***/ "../script/roto-rdr-nfc.js":
/*!*********************************!*\
  !*** ../script/roto-rdr-nfc.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NfcReader\": () => (/* binding */ NfcReader)\n/* harmony export */ });\n/* harmony import */ var _common_script_device_manager_dm_reader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/device-manager/dm-reader */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-reader.js\");\n/* harmony import */ var _common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/device-manager/dm-model */ \"../../../../../PkgKioskJS/web-modules/common-script/device-manager/dm-model.js\");\n/* harmony import */ var _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./services/roto-srv-lights */ \"../script/services/roto-srv-lights.js\");\n\r\n\r\n\r\n\r\nclass NfcReader extends _common_script_device_manager_dm_reader__WEBPACK_IMPORTED_MODULE_0__.DMReader {\r\n  rototypeConnector;\r\n  \r\n  static get classAlias() {\r\n    return \"rdr_roto_nfc\";\r\n  }\r\n\r\n  constructor(plufginInfo, connector) {\r\n    super(plufginInfo);\r\n    this.rototypeConnector = connector;\r\n   \tthis.rototypeConnector.onNFCStatusChange = s => this.#nfcStatusChangeEvent(s);\r\n  }\r\n  \r\n  #nfcStatusChangeEvent(svcStatus) {\r\n\t  let deviceOnline = svcStatus.common && ((svcStatus.common.device === \"online\") || (svcStatus.common.device === \"deviceBusy\"));\r\n\t  if (deviceOnline)\r\n\t\t\tthis.setDeviceStatus(_common_script_device_manager_dm_model__WEBPACK_IMPORTED_MODULE_1__.DEVICE_STATUS.READY);\r\n\t\telse\r\n\t\t\tthis.setError(`Status: ${svcStatus.common.device}, Scanner: ${svcStatus.barcodeReader.scanner}`);\r\n  }\r\n\r\n\trefreshStatus() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvCCPay)\r\n\t\t\treturn this.rototypeConnector.srvNFCReader.updateStatus();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to refresh status \" + this.pluginName);\r\n\t}\r\n\r\n\treset() {\r\n\t\tif (this.rototypeConnector && this.rototypeConnector.srvNFCReader)\r\n\t\t\treturn this.rototypeConnector.srvNFCReader.reset();\r\n\t\telse\r\n\t\t\treturn Promise.reject(\"Failed to reset \" + this.pluginName);\r\n\t}\r\n\r\n \tasync performMaintenance() {\r\n\t\tawait this.reset();\r\n\t}\r\n\r\n  startRead() {\r\n    if (!this.rototypeConnector.srvNFCReader) \r\n      reject(\"unable to find srvNFCReader service\");\r\n    else {\r\n      this.rototypeConnector.lightOn(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_2__.LIGHT_NAME.NFC_READER, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_2__.FLASH_RATE.SLOW, _services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_2__.LIGHT_COLOR.BLUE);\r\n      this.rototypeConnector.srvNFCReader.startRead()\r\n          .then(r => this._processMediaRead(r))\r\n          .catch(e => console.log(e));\r\n    }\r\n  }\r\n  \r\n  stopRead() {\r\n    if (!this.rototypeConnector.srvNFCReader) \r\n      reject(\"unable to find srvNFCReader service\");\r\n    else {\r\n      this.rototypeConnector.lightOff(_services_roto_srv_lights__WEBPACK_IMPORTED_MODULE_2__.LIGHT_NAME.NFC_READER);\r\n      this.rototypeConnector.srvNFCReader.stopRead();\r\n    }\r\n  }\r\n  \r\n  _processMediaRead(read) {\r\n    let mediaRead = {};   \r\n    mediaRead.MediaCode = read.barcodeData;\r\n    mediaRead.MediaCodeList = [{\r\n      MediaCode: read.barcodeData,\r\n      MediaCodeType: 2\r\n      }];\r\n    this._triggerMediaRead(mediaRead);\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tcmRyLW5mYy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQW1FO0FBQ0k7QUFDVTtBQUNqRjtBQUNPLHdCQUF3Qiw2RUFBUTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsdUZBQW1CO0FBQzNDO0FBQ0EsNEJBQTRCLHdCQUF3QixhQUFhLGdDQUFnQztBQUNqRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsNEVBQXFCLEVBQUUsc0VBQWUsRUFBRSx1RUFBZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsNEVBQXFCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uL3NjcmlwdC9yb3RvLXJkci1uZmMuanM/YTFkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBETVJlYWRlciB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L2RldmljZS1tYW5hZ2VyL2RtLXJlYWRlcic7XHJcbmltcG9ydCB7IERFVklDRV9TVEFUVVMgfSBmcm9tICdAY29tbW9uLXNjcmlwdC9kZXZpY2UtbWFuYWdlci9kbS1tb2RlbCc7XHJcbmltcG9ydCB7IExJR0hUX05BTUUsIEZMQVNIX1JBVEUsIExJR0hUX0NPTE9SIH0gZnJvbSAnLi9zZXJ2aWNlcy9yb3RvLXNydi1saWdodHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5mY1JlYWRlciBleHRlbmRzIERNUmVhZGVyIHtcclxuICByb3RvdHlwZUNvbm5lY3RvcjtcclxuICBcclxuICBzdGF0aWMgZ2V0IGNsYXNzQWxpYXMoKSB7XHJcbiAgICByZXR1cm4gXCJyZHJfcm90b19uZmNcIjtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHBsdWZnaW5JbmZvLCBjb25uZWN0b3IpIHtcclxuICAgIHN1cGVyKHBsdWZnaW5JbmZvKTtcclxuICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IgPSBjb25uZWN0b3I7XHJcbiAgIFx0dGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5vbk5GQ1N0YXR1c0NoYW5nZSA9IHMgPT4gdGhpcy4jbmZjU3RhdHVzQ2hhbmdlRXZlbnQocyk7XHJcbiAgfVxyXG4gIFxyXG4gICNuZmNTdGF0dXNDaGFuZ2VFdmVudChzdmNTdGF0dXMpIHtcclxuXHQgIGxldCBkZXZpY2VPbmxpbmUgPSBzdmNTdGF0dXMuY29tbW9uICYmICgoc3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2UgPT09IFwib25saW5lXCIpIHx8IChzdmNTdGF0dXMuY29tbW9uLmRldmljZSA9PT0gXCJkZXZpY2VCdXN5XCIpKTtcclxuXHQgIGlmIChkZXZpY2VPbmxpbmUpXHJcblx0XHRcdHRoaXMuc2V0RGV2aWNlU3RhdHVzKERFVklDRV9TVEFUVVMuUkVBRFkpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0aGlzLnNldEVycm9yKGBTdGF0dXM6ICR7c3ZjU3RhdHVzLmNvbW1vbi5kZXZpY2V9LCBTY2FubmVyOiAke3N2Y1N0YXR1cy5iYXJjb2RlUmVhZGVyLnNjYW5uZXJ9YCk7XHJcbiAgfVxyXG5cclxuXHRyZWZyZXNoU3RhdHVzKCkge1xyXG5cdFx0aWYgKHRoaXMucm90b3R5cGVDb25uZWN0b3IgJiYgdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZDQ1BheSlcclxuXHRcdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2TkZDUmVhZGVyLnVwZGF0ZVN0YXR1cygpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJGYWlsZWQgdG8gcmVmcmVzaCBzdGF0dXMgXCIgKyB0aGlzLnBsdWdpbk5hbWUpO1xyXG5cdH1cclxuXHJcblx0cmVzZXQoKSB7XHJcblx0XHRpZiAodGhpcy5yb3RvdHlwZUNvbm5lY3RvciAmJiB0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydk5GQ1JlYWRlcilcclxuXHRcdFx0cmV0dXJuIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2TkZDUmVhZGVyLnJlc2V0KCk7XHJcblx0XHRlbHNlXHJcblx0XHRcdHJldHVybiBQcm9taXNlLnJlamVjdChcIkZhaWxlZCB0byByZXNldCBcIiArIHRoaXMucGx1Z2luTmFtZSk7XHJcblx0fVxyXG5cclxuIFx0YXN5bmMgcGVyZm9ybU1haW50ZW5hbmNlKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5yZXNldCgpO1xyXG5cdH1cclxuXHJcbiAgc3RhcnRSZWFkKCkge1xyXG4gICAgaWYgKCF0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydk5GQ1JlYWRlcikgXHJcbiAgICAgIHJlamVjdChcInVuYWJsZSB0byBmaW5kIHNydk5GQ1JlYWRlciBzZXJ2aWNlXCIpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPbihMSUdIVF9OQU1FLk5GQ19SRUFERVIsIEZMQVNIX1JBVEUuU0xPVywgTElHSFRfQ09MT1IuQkxVRSk7XHJcbiAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3Iuc3J2TkZDUmVhZGVyLnN0YXJ0UmVhZCgpXHJcbiAgICAgICAgICAudGhlbihyID0+IHRoaXMuX3Byb2Nlc3NNZWRpYVJlYWQocikpXHJcbiAgICAgICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmxvZyhlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHN0b3BSZWFkKCkge1xyXG4gICAgaWYgKCF0aGlzLnJvdG90eXBlQ29ubmVjdG9yLnNydk5GQ1JlYWRlcikgXHJcbiAgICAgIHJlamVjdChcInVuYWJsZSB0byBmaW5kIHNydk5GQ1JlYWRlciBzZXJ2aWNlXCIpO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIHRoaXMucm90b3R5cGVDb25uZWN0b3IubGlnaHRPZmYoTElHSFRfTkFNRS5ORkNfUkVBREVSKTtcclxuICAgICAgdGhpcy5yb3RvdHlwZUNvbm5lY3Rvci5zcnZORkNSZWFkZXIuc3RvcFJlYWQoKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgX3Byb2Nlc3NNZWRpYVJlYWQocmVhZCkge1xyXG4gICAgbGV0IG1lZGlhUmVhZCA9IHt9OyAgIFxyXG4gICAgbWVkaWFSZWFkLk1lZGlhQ29kZSA9IHJlYWQuYmFyY29kZURhdGE7XHJcbiAgICBtZWRpYVJlYWQuTWVkaWFDb2RlTGlzdCA9IFt7XHJcbiAgICAgIE1lZGlhQ29kZTogcmVhZC5iYXJjb2RlRGF0YSxcclxuICAgICAgTWVkaWFDb2RlVHlwZTogMlxyXG4gICAgICB9XTtcclxuICAgIHRoaXMuX3RyaWdnZXJNZWRpYVJlYWQobWVkaWFSZWFkKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../script/roto-rdr-nfc.js\n");

/***/ }),

/***/ "../script/roto-receipt-fields-utils.js":
/*!**********************************************!*\
  !*** ../script/roto-receipt-fields-utils.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getReceiptFields\": () => (/* binding */ getReceiptFields)\n/* harmony export */ });\nlet currentFont;\r\n\r\nconst DEFAULT_FONT = {\r\n\t\tfontName: 'CONSOLAS',\r\n\t\tfontStyle: 'NORMAL',\r\n\t\tfontSize: 22\r\n  }\r\n\r\nconst DEFAULT_IMAGE_HEIGHT = 10;\r\nconst DEFAULT_WIDTH = 76;\r\nconst DEFAULT_ALIGN = \"CENTER\";\r\n\r\nfunction getReceiptFields(receiptPrintTemplate) {\r\n\tsetCurrentFontToDefault();\r\n\tlet result = [];\r\n\t\r\n\tlet previousFieldName = null;\r\n\treceiptPrintTemplate.ControlsList.forEach((control, index) => {\r\n\t\tlet follows = previousFieldName ? `FOLLOWS \"${previousFieldName}\"` : \"\";\r\n\t\tif (control.Type.toLowerCase() === \"text\") {\r\n\t\t\tlet fieldName = \"Text\" + index;\r\n\t\t\tlet fieldValue = control.Text.Data;\r\n      let xfsField = prepareXFSFieldForText(fieldName, follows);\r\n\t\t\tpreviousFieldName = fieldName;\r\n\t\t\tresult.push({\r\n\t\t\t\tfieldName: fieldName,\r\n\t\t\t\txfsField: xfsField,\r\n\t\t\t\tfieldValue: fieldValue\r\n\t\t\t});\r\n\t\t}\r\n\t\telse if (control.Type.toLowerCase() === \"macro\") {\r\n\t\t\tlet fieldName = control.Macro.MacroName + index;\r\n\t\t\tlet field = createFieldFromMacro(fieldName, control.Macro, follows);\r\n\t\t\tif (field) {\r\n\t\t\t\tresult.push(field);\r\n\t\t\t\tif (field.xfsField)\r\n\t\t\t\t\tpreviousFieldName = fieldName;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\treturn result;\r\n}\r\n\r\nfunction setCurrentFontToDefault() {\r\n\tcurrentFont = DEFAULT_FONT;\r\n}\r\n\r\nfunction createFieldFromMacro(fieldName, macro, follows) {\r\n\tlet xfsField = null;\r\n\tlet fieldValue = null;\r\n\tif ((macro.MacroName.toUpperCase() === \"BARCODE\") || (macro.MacroName.toUpperCase() === \"QRCODE\")) {\r\n\t\tfieldValue = macro.ParamList.data ? macro.ParamList.data : null;\r\n\t\tlet barcodeType = (macro.MacroName.toUpperCase() === \"QRCODE\") ? \"QR\" : \"CODE128\";\r\n    xfsField = prepareXFSFieldForBarcode(fieldName, barcodeType, follows);\t\r\n\t}\r\n\telse if (macro.MacroName.toUpperCase() === \"FONT\") {\r\n\t\tcurrentFont = {\r\n\t\t\tfontName: macro.ParamList.fontname || DEFAULT_FONT.fontName,\r\n\t\t\tfontStyle: macro.ParamList.fontstyle || DEFAULT_FONT.fontStyle,\r\n\t\t\tfontSize: macro.ParamList.fontsize || DEFAULT_FONT.fontSize\r\n\t\t}\r\n\t}\r\n\telse if (macro.MacroName.toUpperCase() === \"REPOSITORY\") {\r\n\t\tlet paramHeight  = macro.ParamList.height || DEFAULT_IMAGE_HEIGHT;\r\n\t\tlet paramWidth  = macro.ParamList.width || DEFAULT_WIDTH;\r\n\t\tlet paramAlign  = macro.ParamList.align || DEFAULT_ALIGN;\r\n\t\tfieldValue = macro.ParamList.data || null;\r\n    xfsField = prepareXFSFieldForImage(fieldName, paramWidth, paramHeight, paramAlign.toUpperCase(), follows);\t\r\n\t}\r\n\telse\r\n\t\treturn null;\r\n\t\r\n\treturn {\r\n\t\t\tfieldName: fieldName,\r\n\t\t\txfsField: xfsField,\r\n\t\t\tfieldValue: fieldValue\r\n\t\t};\r\n}\r\n\t\r\nfunction prepareXFSFieldForText(fieldName, follows) {\r\n\treturn `XFSFIELD \"${fieldName}\"\r\n      BEGIN\r\n          ${follows}\r\n          VERTICAL TOPCOMPACT\r\n          POSITION 0, 0\r\n          SIZE ${DEFAULT_WIDTH}, 400\r\n          HORIZONTAL LEFT\r\n          CLASS OPTIONAL\r\n          TYPE TEXT\r\n          FONT \"${currentFont.fontName}\"\r\n          STYLE ${currentFont.fontStyle}\r\n          POINTSIZE ${currentFont.fontSize}\r\n          OVERFLOW TRUNCATE\r\n          INITIALVALUE \"${fieldName}\"\r\n      END`;\r\n}\r\n\t\r\nfunction prepareXFSFieldForBarcode(fieldName, barcodeType, follows) {\r\n\tlet size = `${DEFAULT_WIDTH}, 10`;\r\n\tif (barcodeType === \"QR\")\r\n\t\tsize = \"20, 20\";\r\n\t\r\n\treturn `XFSFIELD \"${fieldName}\"\r\n        BEGIN\r\n            ${follows}\r\n            VERTICAL CENTERCOMPACT\r\n            POSITION 0, 0\r\n            SIZE ${size}\r\n            HORIZONTAL CENTER\r\n            TYPE BARCODE\r\n            FONT \"${barcodeType}\"\r\n            CLASS OPTIONAL\r\n        END`;\t\r\n}\r\n\t\r\nfunction prepareXFSFieldForImage(fieldName, width, height, align, follows) {\r\n\treturn `XFSFIELD \"${fieldName}\"\r\n        BEGIN\r\n            ${follows}\r\n            VERTICAL CENTERCOMPACT\r\n            POSITION 0, 0\r\n            SIZE ${width}, ${height}\r\n            HORIZONTAL ${align}\r\n            CLASS OPTIONAL\r\n            TYPE GRAPHIC\r\n            SCALING MAINTAINASPECT\r\n            FORMAT \"PNG\"\r\n        END`;\t\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG8tcmVjZWlwdC1maWVsZHMtdXRpbHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxrQkFBa0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsVUFBVTtBQUMvQjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsaUJBQWlCLGNBQWM7QUFDL0I7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QyxrQkFBa0I7QUFDbEIsc0JBQXNCO0FBQ3RCO0FBQ0EsMEJBQTBCLFVBQVU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGNBQWM7QUFDN0I7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFVBQVU7QUFDL0I7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixVQUFVO0FBQy9CO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxtQkFBbUIsTUFBTSxJQUFJO0FBQzdCLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi9zY3JpcHQvcm90by1yZWNlaXB0LWZpZWxkcy11dGlscy5qcz8zZjE1Il0sInNvdXJjZXNDb250ZW50IjpbImxldCBjdXJyZW50Rm9udDtcclxuXHJcbmNvbnN0IERFRkFVTFRfRk9OVCA9IHtcclxuXHRcdGZvbnROYW1lOiAnQ09OU09MQVMnLFxyXG5cdFx0Zm9udFN0eWxlOiAnTk9STUFMJyxcclxuXHRcdGZvbnRTaXplOiAyMlxyXG4gIH1cclxuXHJcbmNvbnN0IERFRkFVTFRfSU1BR0VfSEVJR0hUID0gMTA7XHJcbmNvbnN0IERFRkFVTFRfV0lEVEggPSA3NjtcclxuY29uc3QgREVGQVVMVF9BTElHTiA9IFwiQ0VOVEVSXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmVjZWlwdEZpZWxkcyhyZWNlaXB0UHJpbnRUZW1wbGF0ZSkge1xyXG5cdHNldEN1cnJlbnRGb250VG9EZWZhdWx0KCk7XHJcblx0bGV0IHJlc3VsdCA9IFtdO1xyXG5cdFxyXG5cdGxldCBwcmV2aW91c0ZpZWxkTmFtZSA9IG51bGw7XHJcblx0cmVjZWlwdFByaW50VGVtcGxhdGUuQ29udHJvbHNMaXN0LmZvckVhY2goKGNvbnRyb2wsIGluZGV4KSA9PiB7XHJcblx0XHRsZXQgZm9sbG93cyA9IHByZXZpb3VzRmllbGROYW1lID8gYEZPTExPV1MgXCIke3ByZXZpb3VzRmllbGROYW1lfVwiYCA6IFwiXCI7XHJcblx0XHRpZiAoY29udHJvbC5UeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiKSB7XHJcblx0XHRcdGxldCBmaWVsZE5hbWUgPSBcIlRleHRcIiArIGluZGV4O1xyXG5cdFx0XHRsZXQgZmllbGRWYWx1ZSA9IGNvbnRyb2wuVGV4dC5EYXRhO1xyXG4gICAgICBsZXQgeGZzRmllbGQgPSBwcmVwYXJlWEZTRmllbGRGb3JUZXh0KGZpZWxkTmFtZSwgZm9sbG93cyk7XHJcblx0XHRcdHByZXZpb3VzRmllbGROYW1lID0gZmllbGROYW1lO1xyXG5cdFx0XHRyZXN1bHQucHVzaCh7XHJcblx0XHRcdFx0ZmllbGROYW1lOiBmaWVsZE5hbWUsXHJcblx0XHRcdFx0eGZzRmllbGQ6IHhmc0ZpZWxkLFxyXG5cdFx0XHRcdGZpZWxkVmFsdWU6IGZpZWxkVmFsdWVcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChjb250cm9sLlR5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJtYWNyb1wiKSB7XHJcblx0XHRcdGxldCBmaWVsZE5hbWUgPSBjb250cm9sLk1hY3JvLk1hY3JvTmFtZSArIGluZGV4O1xyXG5cdFx0XHRsZXQgZmllbGQgPSBjcmVhdGVGaWVsZEZyb21NYWNybyhmaWVsZE5hbWUsIGNvbnRyb2wuTWFjcm8sIGZvbGxvd3MpO1xyXG5cdFx0XHRpZiAoZmllbGQpIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChmaWVsZCk7XHJcblx0XHRcdFx0aWYgKGZpZWxkLnhmc0ZpZWxkKVxyXG5cdFx0XHRcdFx0cHJldmlvdXNGaWVsZE5hbWUgPSBmaWVsZE5hbWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHRcclxuXHRyZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRDdXJyZW50Rm9udFRvRGVmYXVsdCgpIHtcclxuXHRjdXJyZW50Rm9udCA9IERFRkFVTFRfRk9OVDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRmllbGRGcm9tTWFjcm8oZmllbGROYW1lLCBtYWNybywgZm9sbG93cykge1xyXG5cdGxldCB4ZnNGaWVsZCA9IG51bGw7XHJcblx0bGV0IGZpZWxkVmFsdWUgPSBudWxsO1xyXG5cdGlmICgobWFjcm8uTWFjcm9OYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiQkFSQ09ERVwiKSB8fCAobWFjcm8uTWFjcm9OYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUVJDT0RFXCIpKSB7XHJcblx0XHRmaWVsZFZhbHVlID0gbWFjcm8uUGFyYW1MaXN0LmRhdGEgPyBtYWNyby5QYXJhbUxpc3QuZGF0YSA6IG51bGw7XHJcblx0XHRsZXQgYmFyY29kZVR5cGUgPSAobWFjcm8uTWFjcm9OYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiUVJDT0RFXCIpID8gXCJRUlwiIDogXCJDT0RFMTI4XCI7XHJcbiAgICB4ZnNGaWVsZCA9IHByZXBhcmVYRlNGaWVsZEZvckJhcmNvZGUoZmllbGROYW1lLCBiYXJjb2RlVHlwZSwgZm9sbG93cyk7XHRcclxuXHR9XHJcblx0ZWxzZSBpZiAobWFjcm8uTWFjcm9OYW1lLnRvVXBwZXJDYXNlKCkgPT09IFwiRk9OVFwiKSB7XHJcblx0XHRjdXJyZW50Rm9udCA9IHtcclxuXHRcdFx0Zm9udE5hbWU6IG1hY3JvLlBhcmFtTGlzdC5mb250bmFtZSB8fCBERUZBVUxUX0ZPTlQuZm9udE5hbWUsXHJcblx0XHRcdGZvbnRTdHlsZTogbWFjcm8uUGFyYW1MaXN0LmZvbnRzdHlsZSB8fCBERUZBVUxUX0ZPTlQuZm9udFN0eWxlLFxyXG5cdFx0XHRmb250U2l6ZTogbWFjcm8uUGFyYW1MaXN0LmZvbnRzaXplIHx8IERFRkFVTFRfRk9OVC5mb250U2l6ZVxyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmIChtYWNyby5NYWNyb05hbWUudG9VcHBlckNhc2UoKSA9PT0gXCJSRVBPU0lUT1JZXCIpIHtcclxuXHRcdGxldCBwYXJhbUhlaWdodCAgPSBtYWNyby5QYXJhbUxpc3QuaGVpZ2h0IHx8IERFRkFVTFRfSU1BR0VfSEVJR0hUO1xyXG5cdFx0bGV0IHBhcmFtV2lkdGggID0gbWFjcm8uUGFyYW1MaXN0LndpZHRoIHx8IERFRkFVTFRfV0lEVEg7XHJcblx0XHRsZXQgcGFyYW1BbGlnbiAgPSBtYWNyby5QYXJhbUxpc3QuYWxpZ24gfHwgREVGQVVMVF9BTElHTjtcclxuXHRcdGZpZWxkVmFsdWUgPSBtYWNyby5QYXJhbUxpc3QuZGF0YSB8fCBudWxsO1xyXG4gICAgeGZzRmllbGQgPSBwcmVwYXJlWEZTRmllbGRGb3JJbWFnZShmaWVsZE5hbWUsIHBhcmFtV2lkdGgsIHBhcmFtSGVpZ2h0LCBwYXJhbUFsaWduLnRvVXBwZXJDYXNlKCksIGZvbGxvd3MpO1x0XHJcblx0fVxyXG5cdGVsc2VcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdFxyXG5cdHJldHVybiB7XHJcblx0XHRcdGZpZWxkTmFtZTogZmllbGROYW1lLFxyXG5cdFx0XHR4ZnNGaWVsZDogeGZzRmllbGQsXHJcblx0XHRcdGZpZWxkVmFsdWU6IGZpZWxkVmFsdWVcclxuXHRcdH07XHJcbn1cclxuXHRcclxuZnVuY3Rpb24gcHJlcGFyZVhGU0ZpZWxkRm9yVGV4dChmaWVsZE5hbWUsIGZvbGxvd3MpIHtcclxuXHRyZXR1cm4gYFhGU0ZJRUxEIFwiJHtmaWVsZE5hbWV9XCJcclxuICAgICAgQkVHSU5cclxuICAgICAgICAgICR7Zm9sbG93c31cclxuICAgICAgICAgIFZFUlRJQ0FMIFRPUENPTVBBQ1RcclxuICAgICAgICAgIFBPU0lUSU9OIDAsIDBcclxuICAgICAgICAgIFNJWkUgJHtERUZBVUxUX1dJRFRIfSwgNDAwXHJcbiAgICAgICAgICBIT1JJWk9OVEFMIExFRlRcclxuICAgICAgICAgIENMQVNTIE9QVElPTkFMXHJcbiAgICAgICAgICBUWVBFIFRFWFRcclxuICAgICAgICAgIEZPTlQgXCIke2N1cnJlbnRGb250LmZvbnROYW1lfVwiXHJcbiAgICAgICAgICBTVFlMRSAke2N1cnJlbnRGb250LmZvbnRTdHlsZX1cclxuICAgICAgICAgIFBPSU5UU0laRSAke2N1cnJlbnRGb250LmZvbnRTaXplfVxyXG4gICAgICAgICAgT1ZFUkZMT1cgVFJVTkNBVEVcclxuICAgICAgICAgIElOSVRJQUxWQUxVRSBcIiR7ZmllbGROYW1lfVwiXHJcbiAgICAgIEVORGA7XHJcbn1cclxuXHRcclxuZnVuY3Rpb24gcHJlcGFyZVhGU0ZpZWxkRm9yQmFyY29kZShmaWVsZE5hbWUsIGJhcmNvZGVUeXBlLCBmb2xsb3dzKSB7XHJcblx0bGV0IHNpemUgPSBgJHtERUZBVUxUX1dJRFRIfSwgMTBgO1xyXG5cdGlmIChiYXJjb2RlVHlwZSA9PT0gXCJRUlwiKVxyXG5cdFx0c2l6ZSA9IFwiMjAsIDIwXCI7XHJcblx0XHJcblx0cmV0dXJuIGBYRlNGSUVMRCBcIiR7ZmllbGROYW1lfVwiXHJcbiAgICAgICAgQkVHSU5cclxuICAgICAgICAgICAgJHtmb2xsb3dzfVxyXG4gICAgICAgICAgICBWRVJUSUNBTCBDRU5URVJDT01QQUNUXHJcbiAgICAgICAgICAgIFBPU0lUSU9OIDAsIDBcclxuICAgICAgICAgICAgU0laRSAke3NpemV9XHJcbiAgICAgICAgICAgIEhPUklaT05UQUwgQ0VOVEVSXHJcbiAgICAgICAgICAgIFRZUEUgQkFSQ09ERVxyXG4gICAgICAgICAgICBGT05UIFwiJHtiYXJjb2RlVHlwZX1cIlxyXG4gICAgICAgICAgICBDTEFTUyBPUFRJT05BTFxyXG4gICAgICAgIEVORGA7XHRcclxufVxyXG5cdFxyXG5mdW5jdGlvbiBwcmVwYXJlWEZTRmllbGRGb3JJbWFnZShmaWVsZE5hbWUsIHdpZHRoLCBoZWlnaHQsIGFsaWduLCBmb2xsb3dzKSB7XHJcblx0cmV0dXJuIGBYRlNGSUVMRCBcIiR7ZmllbGROYW1lfVwiXHJcbiAgICAgICAgQkVHSU5cclxuICAgICAgICAgICAgJHtmb2xsb3dzfVxyXG4gICAgICAgICAgICBWRVJUSUNBTCBDRU5URVJDT01QQUNUXHJcbiAgICAgICAgICAgIFBPU0lUSU9OIDAsIDBcclxuICAgICAgICAgICAgU0laRSAke3dpZHRofSwgJHtoZWlnaHR9XHJcbiAgICAgICAgICAgIEhPUklaT05UQUwgJHthbGlnbn1cclxuICAgICAgICAgICAgQ0xBU1MgT1BUSU9OQUxcclxuICAgICAgICAgICAgVFlQRSBHUkFQSElDXHJcbiAgICAgICAgICAgIFNDQUxJTkcgTUFJTlRBSU5BU1BFQ1RcclxuICAgICAgICAgICAgRk9STUFUIFwiUE5HXCJcclxuICAgICAgICBFTkRgO1x0XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/roto-receipt-fields-utils.js\n");

/***/ }),

/***/ "../script/rototype-main.js":
/*!**********************************!*\
  !*** ../script/rototype-main.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _roto_device_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-device-manager.js */ \"../script/roto-device-manager.js\");\n\r\n\r\nwindow.DEVICE_MANAGER = new _roto_device_manager_js__WEBPACK_IMPORTED_MODULE_0__.RototypeDeviceManager();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3JvdG90eXBlLW1haW4uanMuanMiLCJtYXBwaW5ncyI6Ijs7QUFBaUU7QUFDakU7QUFDQSw0QkFBNEIsMEVBQXFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3JvdG90eXBlLW1haW4uanM/NWRmZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3RvdHlwZURldmljZU1hbmFnZXIgfSBmcm9tICcuL3JvdG8tZGV2aWNlLW1hbmFnZXIuanMnO1xyXG5cclxud2luZG93LkRFVklDRV9NQU5BR0VSID0gbmV3IFJvdG90eXBlRGV2aWNlTWFuYWdlcigpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../script/rototype-main.js\n");

/***/ }),

/***/ "../script/services/roto-service-client.js":
/*!*************************************************!*\
  !*** ../script/services/roto-service-client.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RotoServiceClient\": () => (/* binding */ RotoServiceClient)\n/* harmony export */ });\n/* harmony import */ var _common_script_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @common-script/utils */ \"../../../../../PkgKioskJS/web-modules/common-script/utils.js\");\n\r\n\r\nclass RotoServiceClient {\r\n  #serverURL;\r\n  #socket;\r\n\t#lastRequestId;\r\n\t#serviceName;\r\n\t#closing = false;\r\n\t#awaitingCommands;\r\n\t#eventHandlers;\r\n\t\r\n\tonSocketOpen;\r\n\tonSocketClose;\r\n\tonSocketError;\r\n\t\r\n\tconstructor(serviceName) {\r\n    this.#serviceName = serviceName;\r\n\t\tthis.#lastRequestId = 0;\r\n    this.#awaitingCommands = new Map();\r\n    this.#eventHandlers = new Map();\r\n    \r\n    setTimeout(() => {\r\n        this.#clearExpiredCommands();\r\n      }, 5000);\r\n\t}\r\n\r\n\tget isConnected() {\r\n\t\treturn this.#socket && this.#socket.readyState === WebSocket.OPEN;\r\n\t}\r\n\t\r\n  connect(server_url) {\r\n\t\tthis.#serverURL = server_url;\r\n    this.#socket = new WebSocket(server_url);\r\n\t\t\r\n\t\tthis.#socket.onopen = event => this.#onOpen(event);\r\n\t\tthis.#socket.onclose = event => this.#onClose(event);\r\n\t\tthis.#socket.onerror = event => this.#onError(event);\r\n\t\tthis.#socket.onmessage = event => this.#onMessage(event);\r\n  }\r\n\r\n  close() {\r\n    this.#closing = true;\r\n    if (this.#socket)\r\n      this.#socket.close()\r\n  }\r\n\r\n\t#onOpen(event) {\r\n\t\tconsole.log(`\\n[(${this.#serviceName}) open] Connected`);\r\n\t\tthis.#dispatchOnSocketOpen(event);\r\n\t}\r\n\t\r\n\t#onClose(event) {\r\n\t\tif (event.wasClean) {\r\n\t\t\tconsole.log(`\\n(${this.#serviceName}) [close] Connection closed succesfully, code=${event.code} reason=${event.reason}`);\r\n\t\t} \r\n\t\telse {\t\t\r\n\t\t\t// e.g. processo del server terminato o connessione già\r\n\t\t\t// in questo caso event.code solitamente è 1006\r\n\t\t\tconsole.log(`\\n(${this.#serviceName}) [close] Connection closed.`);\r\n\t\t}\r\n    this.#dispatchOnSocketClose(event);\r\n    \r\n    if (!this.#closing)\r\n      this.#reconnectClient();\r\n\t}\r\n\t\r\n  #reconnectClient() {\r\n    setTimeout(() => this.connect(this.#serverURL), 10000);\r\n  }\r\n\r\n  #onError(event) {\r\n\t  if (event)\r\n    \tconsole.error(`\\n(${this.#serviceName}) [error] ${event}`);\r\n    this.#dispatchOnSocketError(event)\r\n  }\r\n\r\n  #onMessage(event) {\r\n    console.log(`\\n(${this.#serviceName}) [message] Receiving data from server:`);\r\n    let json = JSON.parse(event.data);\r\n    console.log(_common_script_utils__WEBPACK_IMPORTED_MODULE_0__.Utils.beautifyJSONString(json));\r\n    this.#processMessage(json);\r\n  }\r\n  \r\n  #dispatchOnSocketOpen(event) {\r\n    if (this.onSocketOpen)\r\n      this.onSocketOpen(event);\r\n  }\r\n\r\n  #dispatchOnSocketClose(event) {\r\n    if (this.onSocketClose)\r\n      this.onSocketClose(event);\r\n  }\r\n  \r\n  #dispatchOnSocketError(error) {\r\n    if (this.onSocketError)\r\n      this.onSocketError(error);\r\n  }\r\n  \r\n  #processMessage(msg) { \r\n    if (!msg.header) \r\n      console.error('Missing message header');\r\n    else if (msg.header.type === \"event\")\r\n      this.#processEvent(msg);\r\n    else if (msg.header.type === \"acknowledge\")\r\n      this.#processCommandAcknowledge(msg);\r\n    else if (msg.header.type === \"completion\")\r\n      this.#processCommandCompletion(msg);\r\n    else if (msg.header.type === \"unsolicited\")\r\n      this.#processUnsolicited(msg);\r\n    else\r\n      throw new Error(\"Unexpected command header type: \" + msg.header.type);\r\n  }\t\r\n  \r\n  #processEvent(msg) {\r\n    let handler = this.#eventHandlers.get(msg.header.name);\r\n    if (handler)\r\n      handler(msg.payload);\r\n    else\r\n      console.error(\"Handler not found for event \" + msg.header.name);  \r\n  }\r\n  \r\n  #processCommandAcknowledge(msg) {\r\n    let awaitingCommand = this.#awaitingCommands.get(msg.header.requestId);\r\n    if (awaitingCommand)\r\n      awaitingCommand.onAck(msg);\r\n  }\r\n  \r\n  #processCommandCompletion(msg) {\r\n    let awaitingCommand = this.#awaitingCommands.get(msg.header.requestId);\r\n    if (awaitingCommand) {\r\n      awaitingCommand.onCompletion(msg);\r\n      this.deleteAwaitingCommand(msg.header.requestId);\r\n    }\r\n  }\r\n  \r\n  #processUnsolicited(msg) {\r\n    console.log(\"Unsolicited message received: \" + msg);  \r\n  }\r\n\r\n\texecuteCommand(name, payload) {\r\n    let requestId = this.#newRequestId();\r\n    let result = new Promise((resolve) => {\r\n      function onAck(msg) {\r\n        // per adesso lo ignoriamo\r\n      }\r\n      \r\n      function onCompletion(msg) {\r\n\t\t  \tif (msg.payload)\r\n\t\t  \t\tmsg.payload.commandName = name;\r\n        resolve(msg.payload);\r\n      }\r\n      \r\n      this.#registerAwaitingCommand(requestId, name, onAck, onCompletion); \r\n      \r\n      this.#sendMessage({\r\n        \"header\": {\r\n          \"type\": \"command\",\r\n          \"name\": name,\r\n          \"requestId\": requestId\r\n        },\r\n        \"payload\": payload\r\n      });\r\n    });\r\n    \r\n    result.requestId = requestId;\r\n    return result;\r\n  }\r\n  \r\n  #sendMessage(msg) {\r\n    console.log(`\\n(${this.#serviceName}) [message] Sending message:`);\r\n    console.log(_common_script_utils__WEBPACK_IMPORTED_MODULE_0__.Utils.beautifyJSONString(msg));\r\n    this.#socket.send(JSON.stringify(msg));        \r\n  }\r\n  \r\n  #newRequestId() {\r\n    if (this.#lastRequestId >= 2147483647)\r\n      this.#lastRequestId = 0;\r\n      \r\n    this.#lastRequestId++;\r\n    return this.#lastRequestId;\r\n  }\r\n\t\r\n\t#registerAwaitingCommand(requestId, name, onAck, onCompletion) {\r\n    this.#awaitingCommands.set(requestId, {\"name\":name, \"onAck\":onAck, \"onCompletion\":onCompletion, \"timestamp\":(new Date()).getTime()});\r\n  }\r\n  \r\n  deleteAwaitingCommand(requestId) {\r\n    this.#awaitingCommands.delete(requestId);\r\n  }\r\n\r\n  #clearExpiredCommands() {\r\n    this.#awaitingCommands.forEach((command, id) => {\r\n        const millis = Date.now() - command.timestamp;\r\n        if (millis > 60000) {\r\n          this.#awaitingCommands.delete(id);\r\n          console.error(`Command ${command.name} with id ${id} was removed because was queued for ${millis} ms`);\r\n        }       \r\n      });\r\n    \r\n    setTimeout(() => {\r\n        this.#clearExpiredCommands();\r\n      }, 5000);    \r\n  }\r\n  \r\n  registerEventHandler(eventName, handlerFunc) {\r\n    this.#eventHandlers.set(eventName, handlerFunc);\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc2VydmljZS1jbGllbnQuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkM7QUFDN0M7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrQkFBa0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixrQkFBa0IsZ0RBQWdELFlBQVksU0FBUyxhQUFhO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixrQkFBa0IsWUFBWSxNQUFNO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtCQUFrQjtBQUN4QztBQUNBLGdCQUFnQiwwRUFBd0I7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixrQkFBa0I7QUFDeEMsZ0JBQWdCLDBFQUF3QjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsNEZBQTRGO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsY0FBYyxVQUFVLElBQUkscUNBQXFDLFFBQVE7QUFDNUc7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uL3NjcmlwdC9zZXJ2aWNlcy9yb3RvLXNlcnZpY2UtY2xpZW50LmpzPzA2MDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXRpbHMgfSBmcm9tICdAY29tbW9uLXNjcmlwdC91dGlscyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUm90b1NlcnZpY2VDbGllbnQge1xyXG4gICNzZXJ2ZXJVUkw7XHJcbiAgI3NvY2tldDtcclxuXHQjbGFzdFJlcXVlc3RJZDtcclxuXHQjc2VydmljZU5hbWU7XHJcblx0I2Nsb3NpbmcgPSBmYWxzZTtcclxuXHQjYXdhaXRpbmdDb21tYW5kcztcclxuXHQjZXZlbnRIYW5kbGVycztcclxuXHRcclxuXHRvblNvY2tldE9wZW47XHJcblx0b25Tb2NrZXRDbG9zZTtcclxuXHRvblNvY2tldEVycm9yO1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKHNlcnZpY2VOYW1lKSB7XHJcbiAgICB0aGlzLiNzZXJ2aWNlTmFtZSA9IHNlcnZpY2VOYW1lO1xyXG5cdFx0dGhpcy4jbGFzdFJlcXVlc3RJZCA9IDA7XHJcbiAgICB0aGlzLiNhd2FpdGluZ0NvbW1hbmRzID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy4jZXZlbnRIYW5kbGVycyA9IG5ldyBNYXAoKTtcclxuICAgIFxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy4jY2xlYXJFeHBpcmVkQ29tbWFuZHMoKTtcclxuICAgICAgfSwgNTAwMCk7XHJcblx0fVxyXG5cclxuXHRnZXQgaXNDb25uZWN0ZWQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy4jc29ja2V0ICYmIHRoaXMuI3NvY2tldC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTjtcclxuXHR9XHJcblx0XHJcbiAgY29ubmVjdChzZXJ2ZXJfdXJsKSB7XHJcblx0XHR0aGlzLiNzZXJ2ZXJVUkwgPSBzZXJ2ZXJfdXJsO1xyXG4gICAgdGhpcy4jc29ja2V0ID0gbmV3IFdlYlNvY2tldChzZXJ2ZXJfdXJsKTtcclxuXHRcdFxyXG5cdFx0dGhpcy4jc29ja2V0Lm9ub3BlbiA9IGV2ZW50ID0+IHRoaXMuI29uT3BlbihldmVudCk7XHJcblx0XHR0aGlzLiNzb2NrZXQub25jbG9zZSA9IGV2ZW50ID0+IHRoaXMuI29uQ2xvc2UoZXZlbnQpO1xyXG5cdFx0dGhpcy4jc29ja2V0Lm9uZXJyb3IgPSBldmVudCA9PiB0aGlzLiNvbkVycm9yKGV2ZW50KTtcclxuXHRcdHRoaXMuI3NvY2tldC5vbm1lc3NhZ2UgPSBldmVudCA9PiB0aGlzLiNvbk1lc3NhZ2UoZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLiNjbG9zaW5nID0gdHJ1ZTtcclxuICAgIGlmICh0aGlzLiNzb2NrZXQpXHJcbiAgICAgIHRoaXMuI3NvY2tldC5jbG9zZSgpXHJcbiAgfVxyXG5cclxuXHQjb25PcGVuKGV2ZW50KSB7XHJcblx0XHRjb25zb2xlLmxvZyhgXFxuWygke3RoaXMuI3NlcnZpY2VOYW1lfSkgb3Blbl0gQ29ubmVjdGVkYCk7XHJcblx0XHR0aGlzLiNkaXNwYXRjaE9uU29ja2V0T3BlbihldmVudCk7XHJcblx0fVxyXG5cdFxyXG5cdCNvbkNsb3NlKGV2ZW50KSB7XHJcblx0XHRpZiAoZXZlbnQud2FzQ2xlYW4pIHtcclxuXHRcdFx0Y29uc29sZS5sb2coYFxcbigke3RoaXMuI3NlcnZpY2VOYW1lfSkgW2Nsb3NlXSBDb25uZWN0aW9uIGNsb3NlZCBzdWNjZXNmdWxseSwgY29kZT0ke2V2ZW50LmNvZGV9IHJlYXNvbj0ke2V2ZW50LnJlYXNvbn1gKTtcclxuXHRcdH0gXHJcblx0XHRlbHNlIHtcdFx0XHJcblx0XHRcdC8vIGUuZy4gcHJvY2Vzc28gZGVsIHNlcnZlciB0ZXJtaW5hdG8gbyBjb25uZXNzaW9uZSBnacOgXHJcblx0XHRcdC8vIGluIHF1ZXN0byBjYXNvIGV2ZW50LmNvZGUgc29saXRhbWVudGUgw6ggMTAwNlxyXG5cdFx0XHRjb25zb2xlLmxvZyhgXFxuKCR7dGhpcy4jc2VydmljZU5hbWV9KSBbY2xvc2VdIENvbm5lY3Rpb24gY2xvc2VkLmApO1xyXG5cdFx0fVxyXG4gICAgdGhpcy4jZGlzcGF0Y2hPblNvY2tldENsb3NlKGV2ZW50KTtcclxuICAgIFxyXG4gICAgaWYgKCF0aGlzLiNjbG9zaW5nKVxyXG4gICAgICB0aGlzLiNyZWNvbm5lY3RDbGllbnQoKTtcclxuXHR9XHJcblx0XHJcbiAgI3JlY29ubmVjdENsaWVudCgpIHtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jb25uZWN0KHRoaXMuI3NlcnZlclVSTCksIDEwMDAwKTtcclxuICB9XHJcblxyXG4gICNvbkVycm9yKGV2ZW50KSB7XHJcblx0ICBpZiAoZXZlbnQpXHJcbiAgICBcdGNvbnNvbGUuZXJyb3IoYFxcbigke3RoaXMuI3NlcnZpY2VOYW1lfSkgW2Vycm9yXSAke2V2ZW50fWApO1xyXG4gICAgdGhpcy4jZGlzcGF0Y2hPblNvY2tldEVycm9yKGV2ZW50KVxyXG4gIH1cclxuXHJcbiAgI29uTWVzc2FnZShldmVudCkge1xyXG4gICAgY29uc29sZS5sb2coYFxcbigke3RoaXMuI3NlcnZpY2VOYW1lfSkgW21lc3NhZ2VdIFJlY2VpdmluZyBkYXRhIGZyb20gc2VydmVyOmApO1xyXG4gICAgbGV0IGpzb24gPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xyXG4gICAgY29uc29sZS5sb2coVXRpbHMuYmVhdXRpZnlKU09OU3RyaW5nKGpzb24pKTtcclxuICAgIHRoaXMuI3Byb2Nlc3NNZXNzYWdlKGpzb24pO1xyXG4gIH1cclxuICBcclxuICAjZGlzcGF0Y2hPblNvY2tldE9wZW4oZXZlbnQpIHtcclxuICAgIGlmICh0aGlzLm9uU29ja2V0T3BlbilcclxuICAgICAgdGhpcy5vblNvY2tldE9wZW4oZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgI2Rpc3BhdGNoT25Tb2NrZXRDbG9zZShldmVudCkge1xyXG4gICAgaWYgKHRoaXMub25Tb2NrZXRDbG9zZSlcclxuICAgICAgdGhpcy5vblNvY2tldENsb3NlKGV2ZW50KTtcclxuICB9XHJcbiAgXHJcbiAgI2Rpc3BhdGNoT25Tb2NrZXRFcnJvcihlcnJvcikge1xyXG4gICAgaWYgKHRoaXMub25Tb2NrZXRFcnJvcilcclxuICAgICAgdGhpcy5vblNvY2tldEVycm9yKGVycm9yKTtcclxuICB9XHJcbiAgXHJcbiAgI3Byb2Nlc3NNZXNzYWdlKG1zZykgeyBcclxuICAgIGlmICghbXNnLmhlYWRlcikgXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3NpbmcgbWVzc2FnZSBoZWFkZXInKTtcclxuICAgIGVsc2UgaWYgKG1zZy5oZWFkZXIudHlwZSA9PT0gXCJldmVudFwiKVxyXG4gICAgICB0aGlzLiNwcm9jZXNzRXZlbnQobXNnKTtcclxuICAgIGVsc2UgaWYgKG1zZy5oZWFkZXIudHlwZSA9PT0gXCJhY2tub3dsZWRnZVwiKVxyXG4gICAgICB0aGlzLiNwcm9jZXNzQ29tbWFuZEFja25vd2xlZGdlKG1zZyk7XHJcbiAgICBlbHNlIGlmIChtc2cuaGVhZGVyLnR5cGUgPT09IFwiY29tcGxldGlvblwiKVxyXG4gICAgICB0aGlzLiNwcm9jZXNzQ29tbWFuZENvbXBsZXRpb24obXNnKTtcclxuICAgIGVsc2UgaWYgKG1zZy5oZWFkZXIudHlwZSA9PT0gXCJ1bnNvbGljaXRlZFwiKVxyXG4gICAgICB0aGlzLiNwcm9jZXNzVW5zb2xpY2l0ZWQobXNnKTtcclxuICAgIGVsc2VcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBjb21tYW5kIGhlYWRlciB0eXBlOiBcIiArIG1zZy5oZWFkZXIudHlwZSk7XHJcbiAgfVx0XHJcbiAgXHJcbiAgI3Byb2Nlc3NFdmVudChtc2cpIHtcclxuICAgIGxldCBoYW5kbGVyID0gdGhpcy4jZXZlbnRIYW5kbGVycy5nZXQobXNnLmhlYWRlci5uYW1lKTtcclxuICAgIGlmIChoYW5kbGVyKVxyXG4gICAgICBoYW5kbGVyKG1zZy5wYXlsb2FkKTtcclxuICAgIGVsc2VcclxuICAgICAgY29uc29sZS5lcnJvcihcIkhhbmRsZXIgbm90IGZvdW5kIGZvciBldmVudCBcIiArIG1zZy5oZWFkZXIubmFtZSk7ICBcclxuICB9XHJcbiAgXHJcbiAgI3Byb2Nlc3NDb21tYW5kQWNrbm93bGVkZ2UobXNnKSB7XHJcbiAgICBsZXQgYXdhaXRpbmdDb21tYW5kID0gdGhpcy4jYXdhaXRpbmdDb21tYW5kcy5nZXQobXNnLmhlYWRlci5yZXF1ZXN0SWQpO1xyXG4gICAgaWYgKGF3YWl0aW5nQ29tbWFuZClcclxuICAgICAgYXdhaXRpbmdDb21tYW5kLm9uQWNrKG1zZyk7XHJcbiAgfVxyXG4gIFxyXG4gICNwcm9jZXNzQ29tbWFuZENvbXBsZXRpb24obXNnKSB7XHJcbiAgICBsZXQgYXdhaXRpbmdDb21tYW5kID0gdGhpcy4jYXdhaXRpbmdDb21tYW5kcy5nZXQobXNnLmhlYWRlci5yZXF1ZXN0SWQpO1xyXG4gICAgaWYgKGF3YWl0aW5nQ29tbWFuZCkge1xyXG4gICAgICBhd2FpdGluZ0NvbW1hbmQub25Db21wbGV0aW9uKG1zZyk7XHJcbiAgICAgIHRoaXMuZGVsZXRlQXdhaXRpbmdDb21tYW5kKG1zZy5oZWFkZXIucmVxdWVzdElkKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgI3Byb2Nlc3NVbnNvbGljaXRlZChtc2cpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiVW5zb2xpY2l0ZWQgbWVzc2FnZSByZWNlaXZlZDogXCIgKyBtc2cpOyAgXHJcbiAgfVxyXG5cclxuXHRleGVjdXRlQ29tbWFuZChuYW1lLCBwYXlsb2FkKSB7XHJcbiAgICBsZXQgcmVxdWVzdElkID0gdGhpcy4jbmV3UmVxdWVzdElkKCk7XHJcbiAgICBsZXQgcmVzdWx0ID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgZnVuY3Rpb24gb25BY2sobXNnKSB7XHJcbiAgICAgICAgLy8gcGVyIGFkZXNzbyBsbyBpZ25vcmlhbW9cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgZnVuY3Rpb24gb25Db21wbGV0aW9uKG1zZykge1xyXG5cdFx0ICBcdGlmIChtc2cucGF5bG9hZClcclxuXHRcdCAgXHRcdG1zZy5wYXlsb2FkLmNvbW1hbmROYW1lID0gbmFtZTtcclxuICAgICAgICByZXNvbHZlKG1zZy5wYXlsb2FkKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy4jcmVnaXN0ZXJBd2FpdGluZ0NvbW1hbmQocmVxdWVzdElkLCBuYW1lLCBvbkFjaywgb25Db21wbGV0aW9uKTsgXHJcbiAgICAgIFxyXG4gICAgICB0aGlzLiNzZW5kTWVzc2FnZSh7XHJcbiAgICAgICAgXCJoZWFkZXJcIjoge1xyXG4gICAgICAgICAgXCJ0eXBlXCI6IFwiY29tbWFuZFwiLFxyXG4gICAgICAgICAgXCJuYW1lXCI6IG5hbWUsXHJcbiAgICAgICAgICBcInJlcXVlc3RJZFwiOiByZXF1ZXN0SWRcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwicGF5bG9hZFwiOiBwYXlsb2FkXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIHJlc3VsdC5yZXF1ZXN0SWQgPSByZXF1ZXN0SWQ7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBcclxuICAjc2VuZE1lc3NhZ2UobXNnKSB7XHJcbiAgICBjb25zb2xlLmxvZyhgXFxuKCR7dGhpcy4jc2VydmljZU5hbWV9KSBbbWVzc2FnZV0gU2VuZGluZyBtZXNzYWdlOmApO1xyXG4gICAgY29uc29sZS5sb2coVXRpbHMuYmVhdXRpZnlKU09OU3RyaW5nKG1zZykpO1xyXG4gICAgdGhpcy4jc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7ICAgICAgICBcclxuICB9XHJcbiAgXHJcbiAgI25ld1JlcXVlc3RJZCgpIHtcclxuICAgIGlmICh0aGlzLiNsYXN0UmVxdWVzdElkID49IDIxNDc0ODM2NDcpXHJcbiAgICAgIHRoaXMuI2xhc3RSZXF1ZXN0SWQgPSAwO1xyXG4gICAgICBcclxuICAgIHRoaXMuI2xhc3RSZXF1ZXN0SWQrKztcclxuICAgIHJldHVybiB0aGlzLiNsYXN0UmVxdWVzdElkO1xyXG4gIH1cclxuXHRcclxuXHQjcmVnaXN0ZXJBd2FpdGluZ0NvbW1hbmQocmVxdWVzdElkLCBuYW1lLCBvbkFjaywgb25Db21wbGV0aW9uKSB7XHJcbiAgICB0aGlzLiNhd2FpdGluZ0NvbW1hbmRzLnNldChyZXF1ZXN0SWQsIHtcIm5hbWVcIjpuYW1lLCBcIm9uQWNrXCI6b25BY2ssIFwib25Db21wbGV0aW9uXCI6b25Db21wbGV0aW9uLCBcInRpbWVzdGFtcFwiOihuZXcgRGF0ZSgpKS5nZXRUaW1lKCl9KTtcclxuICB9XHJcbiAgXHJcbiAgZGVsZXRlQXdhaXRpbmdDb21tYW5kKHJlcXVlc3RJZCkge1xyXG4gICAgdGhpcy4jYXdhaXRpbmdDb21tYW5kcy5kZWxldGUocmVxdWVzdElkKTtcclxuICB9XHJcblxyXG4gICNjbGVhckV4cGlyZWRDb21tYW5kcygpIHtcclxuICAgIHRoaXMuI2F3YWl0aW5nQ29tbWFuZHMuZm9yRWFjaCgoY29tbWFuZCwgaWQpID0+IHtcclxuICAgICAgICBjb25zdCBtaWxsaXMgPSBEYXRlLm5vdygpIC0gY29tbWFuZC50aW1lc3RhbXA7XHJcbiAgICAgICAgaWYgKG1pbGxpcyA+IDYwMDAwKSB7XHJcbiAgICAgICAgICB0aGlzLiNhd2FpdGluZ0NvbW1hbmRzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb21tYW5kICR7Y29tbWFuZC5uYW1lfSB3aXRoIGlkICR7aWR9IHdhcyByZW1vdmVkIGJlY2F1c2Ugd2FzIHF1ZXVlZCBmb3IgJHttaWxsaXN9IG1zYCk7XHJcbiAgICAgICAgfSAgICAgICBcclxuICAgICAgfSk7XHJcbiAgICBcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuI2NsZWFyRXhwaXJlZENvbW1hbmRzKCk7XHJcbiAgICAgIH0sIDUwMDApOyAgICBcclxuICB9XHJcbiAgXHJcbiAgcmVnaXN0ZXJFdmVudEhhbmRsZXIoZXZlbnROYW1lLCBoYW5kbGVyRnVuYykge1xyXG4gICAgdGhpcy4jZXZlbnRIYW5kbGVycy5zZXQoZXZlbnROYW1lLCBoYW5kbGVyRnVuYyk7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/services/roto-service-client.js\n");

/***/ }),

/***/ "../script/services/roto-service-factory.js":
/*!**************************************************!*\
  !*** ../script/services/roto-service-factory.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createServiceInstance\": () => (/* binding */ createServiceInstance)\n/* harmony export */ });\n/* harmony import */ var _roto_srv_barcode_reader__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-srv-barcode-reader */ \"../script/services/roto-srv-barcode-reader.js\");\n/* harmony import */ var _roto_srv_nfc_reader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./roto-srv-nfc-reader */ \"../script/services/roto-srv-nfc-reader.js\");\n/* harmony import */ var _roto_srv_ticket_printer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./roto-srv-ticket-printer */ \"../script/services/roto-srv-ticket-printer.js\");\n/* harmony import */ var _roto_srv_receipt_printer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./roto-srv-receipt-printer */ \"../script/services/roto-srv-receipt-printer.js\");\n/* harmony import */ var _roto_srv_lights__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./roto-srv-lights */ \"../script/services/roto-srv-lights.js\");\n/* harmony import */ var _roto_srv_auxiliaries__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./roto-srv-auxiliaries */ \"../script/services/roto-srv-auxiliaries.js\");\n/* harmony import */ var _roto_srv_cc_pay__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./roto-srv-cc-pay */ \"../script/services/roto-srv-cc-pay.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst SERVICE_CLASSES = new Map();\r\n\r\nfunction createServiceInstance(serviceURI) {\r\n\tlet name = _getServiceNameFromURI(serviceURI);\r\n  let clazz = SERVICE_CLASSES.get(name);\r\n  \r\n  if (clazz == null)\r\n    throw new Error(\"Unknown service: \" + name);\r\n  else\r\n    return new clazz(serviceURI);\r\n}\r\n\r\nfunction _getServiceNameFromURI(serviceURI) {\r\n  serviceURI = serviceURI.replace(/\\/+$/, '');\r\n  let tokens = serviceURI.split(\"/\");\r\n  return tokens[tokens.length - 1].toLowerCase();\r\n}\r\n\r\nfunction _registerServiceClass(name, clazz) {\r\n  SERVICE_CLASSES.set(name, clazz);\r\n}\r\n\r\n_registerServiceClass(_roto_srv_barcode_reader__WEBPACK_IMPORTED_MODULE_0__.SrvBarcodeReader.serviceName, _roto_srv_barcode_reader__WEBPACK_IMPORTED_MODULE_0__.SrvBarcodeReader);\r\n_registerServiceClass(_roto_srv_nfc_reader__WEBPACK_IMPORTED_MODULE_1__.SrvNFCReader.serviceName, _roto_srv_nfc_reader__WEBPACK_IMPORTED_MODULE_1__.SrvNFCReader);\r\n_registerServiceClass(_roto_srv_ticket_printer__WEBPACK_IMPORTED_MODULE_2__.SrvTicketPrinter.serviceName, _roto_srv_ticket_printer__WEBPACK_IMPORTED_MODULE_2__.SrvTicketPrinter);\r\n_registerServiceClass(_roto_srv_receipt_printer__WEBPACK_IMPORTED_MODULE_3__.SrvReceiptPrinter.serviceName, _roto_srv_receipt_printer__WEBPACK_IMPORTED_MODULE_3__.SrvReceiptPrinter);\r\n_registerServiceClass(_roto_srv_lights__WEBPACK_IMPORTED_MODULE_4__.SrvLights.serviceName, _roto_srv_lights__WEBPACK_IMPORTED_MODULE_4__.SrvLights);\r\n_registerServiceClass(_roto_srv_auxiliaries__WEBPACK_IMPORTED_MODULE_5__.SrvAuxiliaries.serviceName, _roto_srv_auxiliaries__WEBPACK_IMPORTED_MODULE_5__.SrvAuxiliaries);\r\n_registerServiceClass(_roto_srv_cc_pay__WEBPACK_IMPORTED_MODULE_6__.SrvCCPay.serviceName, _roto_srv_cc_pay__WEBPACK_IMPORTED_MODULE_6__.SrvCCPay);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc2VydmljZS1mYWN0b3J5LmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQThEO0FBQ1I7QUFDUTtBQUNFO0FBQ2pCO0FBQ1U7QUFDWDtBQUM5QztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGtGQUE0QixFQUFFLHNFQUFnQjtBQUNwRSxzQkFBc0IsMEVBQXdCLEVBQUUsOERBQVk7QUFDNUQsc0JBQXNCLGtGQUE0QixFQUFFLHNFQUFnQjtBQUNwRSxzQkFBc0Isb0ZBQTZCLEVBQUUsd0VBQWlCO0FBQ3RFLHNCQUFzQixtRUFBcUIsRUFBRSx1REFBUztBQUN0RCxzQkFBc0IsNkVBQTBCLEVBQUUsaUVBQWM7QUFDaEUsc0JBQXNCLGtFQUFvQixFQUFFLHNEQUFRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc2VydmljZS1mYWN0b3J5LmpzP2I3NDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3J2QmFyY29kZVJlYWRlciB9ICBmcm9tICcuL3JvdG8tc3J2LWJhcmNvZGUtcmVhZGVyJztcclxuaW1wb3J0IHsgU3J2TkZDUmVhZGVyIH0gIGZyb20gJy4vcm90by1zcnYtbmZjLXJlYWRlcic7XHJcbmltcG9ydCB7IFNydlRpY2tldFByaW50ZXIgfSAgZnJvbSAnLi9yb3RvLXNydi10aWNrZXQtcHJpbnRlcic7XHJcbmltcG9ydCB7IFNydlJlY2VpcHRQcmludGVyIH0gIGZyb20gJy4vcm90by1zcnYtcmVjZWlwdC1wcmludGVyJztcclxuaW1wb3J0IHsgU3J2TGlnaHRzIH0gIGZyb20gJy4vcm90by1zcnYtbGlnaHRzJztcclxuaW1wb3J0IHsgU3J2QXV4aWxpYXJpZXMgfSAgZnJvbSAnLi9yb3RvLXNydi1hdXhpbGlhcmllcyc7XHJcbmltcG9ydCB7IFNydkNDUGF5IH0gIGZyb20gJy4vcm90by1zcnYtY2MtcGF5JztcclxuXHJcbmNvbnN0IFNFUlZJQ0VfQ0xBU1NFUyA9IG5ldyBNYXAoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2aWNlSW5zdGFuY2Uoc2VydmljZVVSSSkge1xyXG5cdGxldCBuYW1lID0gX2dldFNlcnZpY2VOYW1lRnJvbVVSSShzZXJ2aWNlVVJJKTtcclxuICBsZXQgY2xhenogPSBTRVJWSUNFX0NMQVNTRVMuZ2V0KG5hbWUpO1xyXG4gIFxyXG4gIGlmIChjbGF6eiA9PSBudWxsKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBzZXJ2aWNlOiBcIiArIG5hbWUpO1xyXG4gIGVsc2VcclxuICAgIHJldHVybiBuZXcgY2xhenooc2VydmljZVVSSSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9nZXRTZXJ2aWNlTmFtZUZyb21VUkkoc2VydmljZVVSSSkge1xyXG4gIHNlcnZpY2VVUkkgPSBzZXJ2aWNlVVJJLnJlcGxhY2UoL1xcLyskLywgJycpO1xyXG4gIGxldCB0b2tlbnMgPSBzZXJ2aWNlVVJJLnNwbGl0KFwiL1wiKTtcclxuICByZXR1cm4gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXS50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfcmVnaXN0ZXJTZXJ2aWNlQ2xhc3MobmFtZSwgY2xhenopIHtcclxuICBTRVJWSUNFX0NMQVNTRVMuc2V0KG5hbWUsIGNsYXp6KTtcclxufVxyXG5cclxuX3JlZ2lzdGVyU2VydmljZUNsYXNzKFNydkJhcmNvZGVSZWFkZXIuc2VydmljZU5hbWUsIFNydkJhcmNvZGVSZWFkZXIpO1xyXG5fcmVnaXN0ZXJTZXJ2aWNlQ2xhc3MoU3J2TkZDUmVhZGVyLnNlcnZpY2VOYW1lLCBTcnZORkNSZWFkZXIpO1xyXG5fcmVnaXN0ZXJTZXJ2aWNlQ2xhc3MoU3J2VGlja2V0UHJpbnRlci5zZXJ2aWNlTmFtZSwgU3J2VGlja2V0UHJpbnRlcik7XHJcbl9yZWdpc3RlclNlcnZpY2VDbGFzcyhTcnZSZWNlaXB0UHJpbnRlci5zZXJ2aWNlTmFtZSwgU3J2UmVjZWlwdFByaW50ZXIpO1xyXG5fcmVnaXN0ZXJTZXJ2aWNlQ2xhc3MoU3J2TGlnaHRzLnNlcnZpY2VOYW1lLCBTcnZMaWdodHMpO1xyXG5fcmVnaXN0ZXJTZXJ2aWNlQ2xhc3MoU3J2QXV4aWxpYXJpZXMuc2VydmljZU5hbWUsIFNydkF1eGlsaWFyaWVzKTtcclxuX3JlZ2lzdGVyU2VydmljZUNsYXNzKFNydkNDUGF5LnNlcnZpY2VOYW1lLCBTcnZDQ1BheSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/services/roto-service-factory.js\n");

/***/ }),

/***/ "../script/services/roto-service.js":
/*!******************************************!*\
  !*** ../script/services/roto-service.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RotoService\": () => (/* binding */ RotoService)\n/* harmony export */ });\n/* harmony import */ var _roto_service_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service-client */ \"../script/services/roto-service-client.js\");\n\r\n\r\nclass RotoService {\r\n\t#serviceURI;\r\n\t#serviceName;\r\n\t#serviceDescr;\r\n  #serviceClient;\t\r\n\t#commonStatus;\r\n\t#lastError;\r\n\t\r\n\tonStatusChange;\r\n\tonReset;\r\n\r\n\tconstructor(name, descr, serviceURI) {\r\n\t\tthis.#serviceURI = serviceURI;\r\n\t\tthis.#serviceName = name;\r\n\t\tthis.#serviceDescr = descr;\r\n    this.#commonStatus = {};\r\n    \r\n    this.#serviceClient = new _roto_service_client__WEBPACK_IMPORTED_MODULE_0__.RotoServiceClient(this.serviceName);\r\n    this.#serviceClient.onSocketOpen = e => this.#onSocketOpen(e);\r\n    this.#serviceClient.onSocketError = e => this.#onSocketError(e);\r\n    \r\n    this.#serviceClient.registerEventHandler(\"Common.StatusChangedEvent\", s => this.#statusChangedEventHandler(s));\r\n    this.#serviceClient.registerEventHandler(\"Common.ErrorEvent\", e => this.#setError(e));\r\n\t}\r\n\t\r\n\tget serviceName() {\r\n\t\treturn this.#serviceName;\r\n\t}\r\n\t\r\n\tget serviceDescr() {\r\n\t\treturn this.#serviceDescr;\r\n\t}\r\n\r\n\tget serviceClient() {\r\n\t\treturn this.#serviceClient;\r\n\t}\r\n\t\r\n\tgetSeviceCommandRoot() {}\r\n\r\n\tgetStatus() {\r\n\t\tlet status = {\r\n\t\t\tcommon: {\r\n\t\t\t\tdevice: this.#commonStatus.device,\r\n\t\t\t\tdevicePosition: this.#commonStatus.devicePosition,\r\n\t\t\t\tpowerSaveRecoveryTime: this.#commonStatus.powerSaveRecoveryTime,\r\n\t\t\t\tantiFraudModule: this.#commonStatus.antiFraudModule,\r\n\t\t\t\texchange: this.#commonStatus.exchange,\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.appendServiceSpecificStatus(status);\r\n\t\treturn status;\r\n\t}\r\n\t\r\n\tconnect() {\r\n    this.#serviceClient.connect(this.#serviceURI);\r\n  }\r\n\t\r\n\t#setStatus(newStatus) {\r\n\t\tlet statusChanged = false;\r\n\t\t\r\n\t\tif (newStatus.common) {\r\n\t\t\tif (newStatus.common.device && (newStatus.common.device !== this.#commonStatus.device)) {\r\n\t\t\t\tthis.#commonStatus.device = newStatus.common.device;\r\n\t\t\t\tstatusChanged = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tstatusChanged = this.updateServiceSpecificStatus(newStatus) || statusChanged;\r\n\t\tif (statusChanged)\r\n\t\t\tthis.#triggerStatusChangeEvent();\r\n\t}\r\n\r\n\t#setError(error) {\r\n\t\tif (this.#lastError !== error) {\r\n\t\t\tthis.#lastError = error;\r\n\t\t\tthis.#triggerErrorEvent(this.#lastError);\r\n\t\t}\r\n\t}\r\n\t\r\n  #statusChangedEventHandler(payload) {\r\n    this.#setStatus({common: payload});\r\n  }\r\n\r\n\treset() {\r\n\t\tlet payload = {\r\n\t\t\t\ttimeout: 5000\r\n  \t\t};\r\n\r\n\t  return this.#serviceClient.executeCommand(this.getSeviceCommandRoot() + \".Reset\", payload)\r\n      .then(p => this.#triggerResetEvent(p))\r\n      .catch(e => console.error(e));\r\n\t}\r\n\r\n\t#triggerStatusChangeEvent() {\r\n\t\tconsole.log(\"Status updated\");\r\n\t\tif (this.onStatusChange)\r\n\t\t\tthis.onStatusChange(this.getStatus());\r\n\t}\r\n\r\n\t#triggerResetEvent(payload) {\r\n\t\tconsole.log(\"---> Reset complete: \" + this.#serviceName);\r\n\t\tlet event = {\r\n\t\t\tcompletionCode: payload.completionCode,\r\n\t\t\terrorDescription: payload.errorDescription\r\n\t\t};\r\n\r\n\t\tif (this.onReset) {\r\n\t\t\tthis.onReset(event);\r\n\t\t}\r\n\t}\r\n\r\n\t#triggerErrorEvent(event) {\r\n\t\tif (this.onError) {\r\n\t\t\tthis.onError(event);\r\n\t\t}\r\n\t}\r\n\t\r\n\tupdateServiceSpecificStatus(newStatus) {\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tappendServiceSpecificStatus(status) {}\r\n\tfindServiceSpecificMessageType(owner, name, payload) {}\r\n\r\n\t#onSocketOpen(event) {\r\n\t\tthis.updateStatus();\r\n\t}\r\n\t\r\n\t#onSocketError(error) {\r\n\t\tthis.updateStatus();\r\n\t}\r\n\t\r\n\tupdateStatus() {\r\n\t\tconsole.log('\\n[get Status]');\r\n\t\t\r\n\t\tif (this.#serviceClient.isConnected) {\r\n\t    let payload = {\r\n\t        timeout: 5000\r\n\t      };\r\n\t      \r\n\t    this.#serviceClient.executeCommand(\"Common.Status\", payload)\r\n\t      .then(p => this.#setStatus(p))\r\n\t      .catch(e => console.error(e));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.#setStatus({common: {device: \"offline\"}});\r\n\t\t}\r\n\t}\r\n\t\r\n\tcancelRequest(requestId) {\r\n    console.log('Cancelling request ${requestId}');\r\n\r\n    let payload = {\r\n        timeout: 5000,\r\n        requestIds: [requestId]\r\n      };\r\n      \r\n    this.#serviceClient.executeCommand(\"Common.Cancel\", payload)\r\n      .then(p => {\r\n          this.deleteAwaitingCommand(requestId);\r\n          console.log('Request ${requestId} cancelled');\r\n        })\r\n      .catch(e => console.error(e));\r\n  } \r\n\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc2VydmljZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUEwRDtBQUMxRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsbUVBQWlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixnQkFBZ0I7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUyxtQkFBbUI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsVUFBVTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsV0FBVztBQUM1QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi9zY3JpcHQvc2VydmljZXMvcm90by1zZXJ2aWNlLmpzPzY2YzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm90b1NlcnZpY2VDbGllbnQgfSBmcm9tICcuL3JvdG8tc2VydmljZS1jbGllbnQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJvdG9TZXJ2aWNlIHtcclxuXHQjc2VydmljZVVSSTtcclxuXHQjc2VydmljZU5hbWU7XHJcblx0I3NlcnZpY2VEZXNjcjtcclxuICAjc2VydmljZUNsaWVudDtcdFxyXG5cdCNjb21tb25TdGF0dXM7XHJcblx0I2xhc3RFcnJvcjtcclxuXHRcclxuXHRvblN0YXR1c0NoYW5nZTtcclxuXHRvblJlc2V0O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihuYW1lLCBkZXNjciwgc2VydmljZVVSSSkge1xyXG5cdFx0dGhpcy4jc2VydmljZVVSSSA9IHNlcnZpY2VVUkk7XHJcblx0XHR0aGlzLiNzZXJ2aWNlTmFtZSA9IG5hbWU7XHJcblx0XHR0aGlzLiNzZXJ2aWNlRGVzY3IgPSBkZXNjcjtcclxuICAgIHRoaXMuI2NvbW1vblN0YXR1cyA9IHt9O1xyXG4gICAgXHJcbiAgICB0aGlzLiNzZXJ2aWNlQ2xpZW50ID0gbmV3IFJvdG9TZXJ2aWNlQ2xpZW50KHRoaXMuc2VydmljZU5hbWUpO1xyXG4gICAgdGhpcy4jc2VydmljZUNsaWVudC5vblNvY2tldE9wZW4gPSBlID0+IHRoaXMuI29uU29ja2V0T3BlbihlKTtcclxuICAgIHRoaXMuI3NlcnZpY2VDbGllbnQub25Tb2NrZXRFcnJvciA9IGUgPT4gdGhpcy4jb25Tb2NrZXRFcnJvcihlKTtcclxuICAgIFxyXG4gICAgdGhpcy4jc2VydmljZUNsaWVudC5yZWdpc3RlckV2ZW50SGFuZGxlcihcIkNvbW1vbi5TdGF0dXNDaGFuZ2VkRXZlbnRcIiwgcyA9PiB0aGlzLiNzdGF0dXNDaGFuZ2VkRXZlbnRIYW5kbGVyKHMpKTtcclxuICAgIHRoaXMuI3NlcnZpY2VDbGllbnQucmVnaXN0ZXJFdmVudEhhbmRsZXIoXCJDb21tb24uRXJyb3JFdmVudFwiLCBlID0+IHRoaXMuI3NldEVycm9yKGUpKTtcclxuXHR9XHJcblx0XHJcblx0Z2V0IHNlcnZpY2VOYW1lKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI3NlcnZpY2VOYW1lO1xyXG5cdH1cclxuXHRcclxuXHRnZXQgc2VydmljZURlc2NyKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI3NlcnZpY2VEZXNjcjtcclxuXHR9XHJcblxyXG5cdGdldCBzZXJ2aWNlQ2xpZW50KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuI3NlcnZpY2VDbGllbnQ7XHJcblx0fVxyXG5cdFxyXG5cdGdldFNldmljZUNvbW1hbmRSb290KCkge31cclxuXHJcblx0Z2V0U3RhdHVzKCkge1xyXG5cdFx0bGV0IHN0YXR1cyA9IHtcclxuXHRcdFx0Y29tbW9uOiB7XHJcblx0XHRcdFx0ZGV2aWNlOiB0aGlzLiNjb21tb25TdGF0dXMuZGV2aWNlLFxyXG5cdFx0XHRcdGRldmljZVBvc2l0aW9uOiB0aGlzLiNjb21tb25TdGF0dXMuZGV2aWNlUG9zaXRpb24sXHJcblx0XHRcdFx0cG93ZXJTYXZlUmVjb3ZlcnlUaW1lOiB0aGlzLiNjb21tb25TdGF0dXMucG93ZXJTYXZlUmVjb3ZlcnlUaW1lLFxyXG5cdFx0XHRcdGFudGlGcmF1ZE1vZHVsZTogdGhpcy4jY29tbW9uU3RhdHVzLmFudGlGcmF1ZE1vZHVsZSxcclxuXHRcdFx0XHRleGNoYW5nZTogdGhpcy4jY29tbW9uU3RhdHVzLmV4Y2hhbmdlLFxyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHRoaXMuYXBwZW5kU2VydmljZVNwZWNpZmljU3RhdHVzKHN0YXR1cyk7XHJcblx0XHRyZXR1cm4gc3RhdHVzO1xyXG5cdH1cclxuXHRcclxuXHRjb25uZWN0KCkge1xyXG4gICAgdGhpcy4jc2VydmljZUNsaWVudC5jb25uZWN0KHRoaXMuI3NlcnZpY2VVUkkpO1xyXG4gIH1cclxuXHRcclxuXHQjc2V0U3RhdHVzKG5ld1N0YXR1cykge1xyXG5cdFx0bGV0IHN0YXR1c0NoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFxyXG5cdFx0aWYgKG5ld1N0YXR1cy5jb21tb24pIHtcclxuXHRcdFx0aWYgKG5ld1N0YXR1cy5jb21tb24uZGV2aWNlICYmIChuZXdTdGF0dXMuY29tbW9uLmRldmljZSAhPT0gdGhpcy4jY29tbW9uU3RhdHVzLmRldmljZSkpIHtcclxuXHRcdFx0XHR0aGlzLiNjb21tb25TdGF0dXMuZGV2aWNlID0gbmV3U3RhdHVzLmNvbW1vbi5kZXZpY2U7XHJcblx0XHRcdFx0c3RhdHVzQ2hhbmdlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRzdGF0dXNDaGFuZ2VkID0gdGhpcy51cGRhdGVTZXJ2aWNlU3BlY2lmaWNTdGF0dXMobmV3U3RhdHVzKSB8fCBzdGF0dXNDaGFuZ2VkO1xyXG5cdFx0aWYgKHN0YXR1c0NoYW5nZWQpXHJcblx0XHRcdHRoaXMuI3RyaWdnZXJTdGF0dXNDaGFuZ2VFdmVudCgpO1xyXG5cdH1cclxuXHJcblx0I3NldEVycm9yKGVycm9yKSB7XHJcblx0XHRpZiAodGhpcy4jbGFzdEVycm9yICE9PSBlcnJvcikge1xyXG5cdFx0XHR0aGlzLiNsYXN0RXJyb3IgPSBlcnJvcjtcclxuXHRcdFx0dGhpcy4jdHJpZ2dlckVycm9yRXZlbnQodGhpcy4jbGFzdEVycm9yKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcbiAgI3N0YXR1c0NoYW5nZWRFdmVudEhhbmRsZXIocGF5bG9hZCkge1xyXG4gICAgdGhpcy4jc2V0U3RhdHVzKHtjb21tb246IHBheWxvYWR9KTtcclxuICB9XHJcblxyXG5cdHJlc2V0KCkge1xyXG5cdFx0bGV0IHBheWxvYWQgPSB7XHJcblx0XHRcdFx0dGltZW91dDogNTAwMFxyXG4gIFx0XHR9O1xyXG5cclxuXHQgIHJldHVybiB0aGlzLiNzZXJ2aWNlQ2xpZW50LmV4ZWN1dGVDb21tYW5kKHRoaXMuZ2V0U2V2aWNlQ29tbWFuZFJvb3QoKSArIFwiLlJlc2V0XCIsIHBheWxvYWQpXHJcbiAgICAgIC50aGVuKHAgPT4gdGhpcy4jdHJpZ2dlclJlc2V0RXZlbnQocCkpXHJcbiAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xyXG5cdH1cclxuXHJcblx0I3RyaWdnZXJTdGF0dXNDaGFuZ2VFdmVudCgpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiU3RhdHVzIHVwZGF0ZWRcIik7XHJcblx0XHRpZiAodGhpcy5vblN0YXR1c0NoYW5nZSlcclxuXHRcdFx0dGhpcy5vblN0YXR1c0NoYW5nZSh0aGlzLmdldFN0YXR1cygpKTtcclxuXHR9XHJcblxyXG5cdCN0cmlnZ2VyUmVzZXRFdmVudChwYXlsb2FkKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcIi0tLT4gUmVzZXQgY29tcGxldGU6IFwiICsgdGhpcy4jc2VydmljZU5hbWUpO1xyXG5cdFx0bGV0IGV2ZW50ID0ge1xyXG5cdFx0XHRjb21wbGV0aW9uQ29kZTogcGF5bG9hZC5jb21wbGV0aW9uQ29kZSxcclxuXHRcdFx0ZXJyb3JEZXNjcmlwdGlvbjogcGF5bG9hZC5lcnJvckRlc2NyaXB0aW9uXHJcblx0XHR9O1xyXG5cclxuXHRcdGlmICh0aGlzLm9uUmVzZXQpIHtcclxuXHRcdFx0dGhpcy5vblJlc2V0KGV2ZW50KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdCN0cmlnZ2VyRXJyb3JFdmVudChldmVudCkge1xyXG5cdFx0aWYgKHRoaXMub25FcnJvcikge1xyXG5cdFx0XHR0aGlzLm9uRXJyb3IoZXZlbnQpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHR1cGRhdGVTZXJ2aWNlU3BlY2lmaWNTdGF0dXMobmV3U3RhdHVzKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cdFxyXG5cdGFwcGVuZFNlcnZpY2VTcGVjaWZpY1N0YXR1cyhzdGF0dXMpIHt9XHJcblx0ZmluZFNlcnZpY2VTcGVjaWZpY01lc3NhZ2VUeXBlKG93bmVyLCBuYW1lLCBwYXlsb2FkKSB7fVxyXG5cclxuXHQjb25Tb2NrZXRPcGVuKGV2ZW50KSB7XHJcblx0XHR0aGlzLnVwZGF0ZVN0YXR1cygpO1xyXG5cdH1cclxuXHRcclxuXHQjb25Tb2NrZXRFcnJvcihlcnJvcikge1xyXG5cdFx0dGhpcy51cGRhdGVTdGF0dXMoKTtcclxuXHR9XHJcblx0XHJcblx0dXBkYXRlU3RhdHVzKCkge1xyXG5cdFx0Y29uc29sZS5sb2coJ1xcbltnZXQgU3RhdHVzXScpO1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy4jc2VydmljZUNsaWVudC5pc0Nvbm5lY3RlZCkge1xyXG5cdCAgICBsZXQgcGF5bG9hZCA9IHtcclxuXHQgICAgICAgIHRpbWVvdXQ6IDUwMDBcclxuXHQgICAgICB9O1xyXG5cdCAgICAgIFxyXG5cdCAgICB0aGlzLiNzZXJ2aWNlQ2xpZW50LmV4ZWN1dGVDb21tYW5kKFwiQ29tbW9uLlN0YXR1c1wiLCBwYXlsb2FkKVxyXG5cdCAgICAgIC50aGVuKHAgPT4gdGhpcy4jc2V0U3RhdHVzKHApKVxyXG5cdCAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUuZXJyb3IoZSkpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuI3NldFN0YXR1cyh7Y29tbW9uOiB7ZGV2aWNlOiBcIm9mZmxpbmVcIn19KTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Y2FuY2VsUmVxdWVzdChyZXF1ZXN0SWQpIHtcclxuICAgIGNvbnNvbGUubG9nKCdDYW5jZWxsaW5nIHJlcXVlc3QgJHtyZXF1ZXN0SWR9Jyk7XHJcblxyXG4gICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgdGltZW91dDogNTAwMCxcclxuICAgICAgICByZXF1ZXN0SWRzOiBbcmVxdWVzdElkXVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgIHRoaXMuI3NlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJDb21tb24uQ2FuY2VsXCIsIHBheWxvYWQpXHJcbiAgICAgIC50aGVuKHAgPT4ge1xyXG4gICAgICAgICAgdGhpcy5kZWxldGVBd2FpdGluZ0NvbW1hbmQocmVxdWVzdElkKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdSZXF1ZXN0ICR7cmVxdWVzdElkfSBjYW5jZWxsZWQnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAuY2F0Y2goZSA9PiBjb25zb2xlLmVycm9yKGUpKTtcclxuICB9IFxyXG5cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../script/services/roto-service.js\n");

/***/ }),

/***/ "../script/services/roto-srv-auxiliaries.js":
/*!**************************************************!*\
  !*** ../script/services/roto-srv-auxiliaries.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SrvAuxiliaries\": () => (/* binding */ SrvAuxiliaries)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n\r\n\r\nclass SrvAuxiliaries extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvAuxiliaries.serviceName, \"Auxiliaries\", serviceURI);\r\n\t}\r\n\t\r\n  static get serviceName() {\r\n    return \"auxiliaries\";\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LWF1eGlsaWFyaWVzLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTZDO0FBQzdDO0FBQ08sNkJBQTZCLHNEQUFXO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi9zY3JpcHQvc2VydmljZXMvcm90by1zcnYtYXV4aWxpYXJpZXMuanM/NjkxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3RvU2VydmljZSB9IGZyb20gJy4vcm90by1zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcnZBdXhpbGlhcmllcyBleHRlbmRzIFJvdG9TZXJ2aWNlIHtcclxuXHRjb25zdHJ1Y3RvcihzZXJ2aWNlVVJJKSB7XHJcblx0XHRzdXBlcihTcnZBdXhpbGlhcmllcy5zZXJ2aWNlTmFtZSwgXCJBdXhpbGlhcmllc1wiLCBzZXJ2aWNlVVJJKTtcclxuXHR9XHJcblx0XHJcbiAgc3RhdGljIGdldCBzZXJ2aWNlTmFtZSgpIHtcclxuICAgIHJldHVybiBcImF1eGlsaWFyaWVzXCI7XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/services/roto-srv-auxiliaries.js\n");

/***/ }),

/***/ "../script/services/roto-srv-barcode-reader.js":
/*!*****************************************************!*\
  !*** ../script/services/roto-srv-barcode-reader.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SrvBarcodeReader\": () => (/* binding */ SrvBarcodeReader)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n/* harmony import */ var _common_script_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/utils */ \"../../../../../PkgKioskJS/web-modules/common-script/utils.js\");\n\r\n\r\n\r\nclass SrvBarcodeReader extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tscannerStatus;\r\n\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvBarcodeReader.serviceName, \"Barcode reader\", serviceURI);\r\n\t}\r\n\r\n  static get serviceName() {\r\n    return \"barcodereader\";\r\n  }\r\n  \r\n\tgetSeviceCommandRoot() { \r\n\t\treturn \"BarcodeReader\"\r\n\t}\r\n\t\r\n\tupdateServiceSpecificStatus(newStatus) {\r\n\t\tlet changed = false;\r\n\t\tif (newStatus.barcodeReader && (newStatus.barcodeReader.scanner !== this.scannerStatus)) {\r\n\t\t\tthis.scannerStatus = newStatus.barcodeReader.scanner;\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tappendServiceSpecificStatus(status) {\r\n\t\tstatus.barcodeReader = {\r\n\t\t\t\tscanner: this.scannerStatus\r\n\t\t\t};\r\n\t}\r\n\r\n  startRead() {\r\n    return this.read(0);\r\n  }\r\n  \r\n  stopRead() {\r\n    if (this.lastRequestId) {\r\n      let payload = {\r\n          timeout: 1000,\r\n          requestIds: [this.lastRequestId]\r\n        };\r\n        \r\n      this.serviceClient.executeCommand(\"Common.Cancel\", payload)\r\n          .then(console.log(\"Barcode read cancelled\"))\r\n          .catch(e => console.log(e));\r\n    }\r\n  }\r\n  \r\n\tread(timeoutMS) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n      let payload = {\r\n          timeout: timeoutMS\r\n        };\r\n        \r\n      let command = this.serviceClient.executeCommand(\"BarcodeReader.Read\", payload);\r\n      this.lastRequestId = command.requestId;\r\n       \r\n      command.then(result => {\r\n          this.lastRequestId = null;\r\n          if (result.completionCode === \"success\") {\r\n            let read = {\r\n              completionCode: result.completionCode,\r\n              errorDescription: result.errorDescription\r\n            };\r\n        \r\n            if ((result.readOutput) && (result.readOutput.length > 0)) {\r\n              read.symbology = result.readOutput[0].symbologyName;\r\n              read.barcodeData = _common_script_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.decodeBase64(result.readOutput[0].barcodeData); //base64 encoded barcode data\r\n            }\r\n  \r\n            resolve(read);\r\n          }\r\n          else\r\n            reject(result.errorDescription);         \r\n        })\r\n        .catch(e => {\r\n          this.lastRequestId = null;\r\n          reject(e);\r\n        });\r\n    });\r\n\t}\r\n\r\n\ttest() {\r\n\t\t//this.test_statusChanged();\r\n\t\tthis.test_read();\r\n\t}\r\n\r\n\ttest_statusChanged() {\r\n\t\tlet msg = {\r\n\t\t\t\theader: {\r\n\t\t\t\t\tname:\"Common.StatusChangedEvent\",\r\n\t\t\t\t\ttype: \"event\"\r\n\t\t\t\t},\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tdevice: \"deviceBusy\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\r\n\t\tthis.processMessage(msg)\r\n\t}\r\n\r\n\ttest_read() {\r\n\t\tlet msg = {\r\n        \"header\": {\r\n            \"name\": \"BarcodeReader.Read\",\r\n            \"requestId\": 3,\r\n            \"type\": \"completion\"\r\n        },\r\n        \"payload\": {\r\n            \"readOutput\": [\r\n                {\r\n                    \"barcodeData\": \"MTlKNFEwRFNHUDJQRlI=\",\r\n                    \"symbologyName\": \"\"\r\n                }\r\n            ],\r\n            \"completionCode\": \"success\"\r\n        }\r\n    };\r\n\t\t\r\n\t\tthis.processMessage(msg)\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LWJhcmNvZGUtcmVhZGVyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUNBO0FBQzdDO0FBQ08sK0JBQStCLHNEQUFXO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsb0VBQWtCLG9DQUFvQztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LWJhcmNvZGUtcmVhZGVyLmpzPzNjOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm90b1NlcnZpY2UgfSBmcm9tICcuL3JvdG8tc2VydmljZSc7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNydkJhcmNvZGVSZWFkZXIgZXh0ZW5kcyBSb3RvU2VydmljZSB7XHJcblx0c2Nhbm5lclN0YXR1cztcclxuXHJcblx0Y29uc3RydWN0b3Ioc2VydmljZVVSSSkge1xyXG5cdFx0c3VwZXIoU3J2QmFyY29kZVJlYWRlci5zZXJ2aWNlTmFtZSwgXCJCYXJjb2RlIHJlYWRlclwiLCBzZXJ2aWNlVVJJKTtcclxuXHR9XHJcblxyXG4gIHN0YXRpYyBnZXQgc2VydmljZU5hbWUoKSB7XHJcbiAgICByZXR1cm4gXCJiYXJjb2RlcmVhZGVyXCI7XHJcbiAgfVxyXG4gIFxyXG5cdGdldFNldmljZUNvbW1hbmRSb290KCkgeyBcclxuXHRcdHJldHVybiBcIkJhcmNvZGVSZWFkZXJcIlxyXG5cdH1cclxuXHRcclxuXHR1cGRhdGVTZXJ2aWNlU3BlY2lmaWNTdGF0dXMobmV3U3RhdHVzKSB7XHJcblx0XHRsZXQgY2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0aWYgKG5ld1N0YXR1cy5iYXJjb2RlUmVhZGVyICYmIChuZXdTdGF0dXMuYmFyY29kZVJlYWRlci5zY2FubmVyICE9PSB0aGlzLnNjYW5uZXJTdGF0dXMpKSB7XHJcblx0XHRcdHRoaXMuc2Nhbm5lclN0YXR1cyA9IG5ld1N0YXR1cy5iYXJjb2RlUmVhZGVyLnNjYW5uZXI7XHJcblx0XHRcdGNoYW5nZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNoYW5nZWQ7XHJcblx0fVxyXG5cclxuXHRhcHBlbmRTZXJ2aWNlU3BlY2lmaWNTdGF0dXMoc3RhdHVzKSB7XHJcblx0XHRzdGF0dXMuYmFyY29kZVJlYWRlciA9IHtcclxuXHRcdFx0XHRzY2FubmVyOiB0aGlzLnNjYW5uZXJTdGF0dXNcclxuXHRcdFx0fTtcclxuXHR9XHJcblxyXG4gIHN0YXJ0UmVhZCgpIHtcclxuICAgIHJldHVybiB0aGlzLnJlYWQoMCk7XHJcbiAgfVxyXG4gIFxyXG4gIHN0b3BSZWFkKCkge1xyXG4gICAgaWYgKHRoaXMubGFzdFJlcXVlc3RJZCkge1xyXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgIHRpbWVvdXQ6IDEwMDAsXHJcbiAgICAgICAgICByZXF1ZXN0SWRzOiBbdGhpcy5sYXN0UmVxdWVzdElkXVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgIHRoaXMuc2VydmljZUNsaWVudC5leGVjdXRlQ29tbWFuZChcIkNvbW1vbi5DYW5jZWxcIiwgcGF5bG9hZClcclxuICAgICAgICAgIC50aGVuKGNvbnNvbGUubG9nKFwiQmFyY29kZSByZWFkIGNhbmNlbGxlZFwiKSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUubG9nKGUpKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcblx0cmVhZCh0aW1lb3V0TVMpIHtcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGxldCBwYXlsb2FkID0ge1xyXG4gICAgICAgICAgdGltZW91dDogdGltZW91dE1TXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgbGV0IGNvbW1hbmQgPSB0aGlzLnNlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJCYXJjb2RlUmVhZGVyLlJlYWRcIiwgcGF5bG9hZCk7XHJcbiAgICAgIHRoaXMubGFzdFJlcXVlc3RJZCA9IGNvbW1hbmQucmVxdWVzdElkO1xyXG4gICAgICAgXHJcbiAgICAgIGNvbW1hbmQudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgdGhpcy5sYXN0UmVxdWVzdElkID0gbnVsbDtcclxuICAgICAgICAgIGlmIChyZXN1bHQuY29tcGxldGlvbkNvZGUgPT09IFwic3VjY2Vzc1wiKSB7XHJcbiAgICAgICAgICAgIGxldCByZWFkID0ge1xyXG4gICAgICAgICAgICAgIGNvbXBsZXRpb25Db2RlOiByZXN1bHQuY29tcGxldGlvbkNvZGUsXHJcbiAgICAgICAgICAgICAgZXJyb3JEZXNjcmlwdGlvbjogcmVzdWx0LmVycm9yRGVzY3JpcHRpb25cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgaWYgKChyZXN1bHQucmVhZE91dHB1dCkgJiYgKHJlc3VsdC5yZWFkT3V0cHV0Lmxlbmd0aCA+IDApKSB7XHJcbiAgICAgICAgICAgICAgcmVhZC5zeW1ib2xvZ3kgPSByZXN1bHQucmVhZE91dHB1dFswXS5zeW1ib2xvZ3lOYW1lO1xyXG4gICAgICAgICAgICAgIHJlYWQuYmFyY29kZURhdGEgPSBVdGlscy5kZWNvZGVCYXNlNjQocmVzdWx0LnJlYWRPdXRwdXRbMF0uYmFyY29kZURhdGEpOyAvL2Jhc2U2NCBlbmNvZGVkIGJhcmNvZGUgZGF0YVxyXG4gICAgICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgICAgIHJlc29sdmUocmVhZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHJlamVjdChyZXN1bHQuZXJyb3JEZXNjcmlwdGlvbik7ICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0SWQgPSBudWxsO1xyXG4gICAgICAgICAgcmVqZWN0KGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblx0fVxyXG5cclxuXHR0ZXN0KCkge1xyXG5cdFx0Ly90aGlzLnRlc3Rfc3RhdHVzQ2hhbmdlZCgpO1xyXG5cdFx0dGhpcy50ZXN0X3JlYWQoKTtcclxuXHR9XHJcblxyXG5cdHRlc3Rfc3RhdHVzQ2hhbmdlZCgpIHtcclxuXHRcdGxldCBtc2cgPSB7XHJcblx0XHRcdFx0aGVhZGVyOiB7XHJcblx0XHRcdFx0XHRuYW1lOlwiQ29tbW9uLlN0YXR1c0NoYW5nZWRFdmVudFwiLFxyXG5cdFx0XHRcdFx0dHlwZTogXCJldmVudFwiXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRwYXlsb2FkOiB7XHJcblx0XHRcdFx0XHRkZXZpY2U6IFwiZGV2aWNlQnVzeVwiXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cdFx0XHJcblx0XHR0aGlzLnByb2Nlc3NNZXNzYWdlKG1zZylcclxuXHR9XHJcblxyXG5cdHRlc3RfcmVhZCgpIHtcclxuXHRcdGxldCBtc2cgPSB7XHJcbiAgICAgICAgXCJoZWFkZXJcIjoge1xyXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJCYXJjb2RlUmVhZGVyLlJlYWRcIixcclxuICAgICAgICAgICAgXCJyZXF1ZXN0SWRcIjogMyxcclxuICAgICAgICAgICAgXCJ0eXBlXCI6IFwiY29tcGxldGlvblwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInBheWxvYWRcIjoge1xyXG4gICAgICAgICAgICBcInJlYWRPdXRwdXRcIjogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFyY29kZURhdGFcIjogXCJNVGxLTkZFd1JGTkhVREpRUmxJPVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwic3ltYm9sb2d5TmFtZVwiOiBcIlwiXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgIFwiY29tcGxldGlvbkNvZGVcIjogXCJzdWNjZXNzXCJcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cdFx0XHJcblx0XHR0aGlzLnByb2Nlc3NNZXNzYWdlKG1zZylcclxuXHR9XHJcbn0iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../script/services/roto-srv-barcode-reader.js\n");

/***/ }),

/***/ "../script/services/roto-srv-cc-pay.js":
/*!*********************************************!*\
  !*** ../script/services/roto-srv-cc-pay.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SrvCCPay\": () => (/* binding */ SrvCCPay)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n\r\n\r\nclass SrvCCPay extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvCCPay.serviceName, \"Credit card payment\", serviceURI);\r\n\t\t\r\n    this.serviceClient.registerEventHandler(\"CCPay.UserInteractionUpdateEvent\", e => this.triggerUserInteractionUpdateEvent(e));\r\n\t}\r\n\t\r\n  static get serviceName() {\r\n    return \"ccpay\";\r\n  }\r\n\r\n  getSeviceCommandRoot() { \r\n    return \"CCPay\"\r\n  }\r\n  \r\n  requestPayment(payload) {\r\n    console.log(\"Request payment: \" + payload);\r\n\t\treturn this.serviceClient.executeCommand(\"CCPay.RequestPayment\", payload);\r\n  }\r\n  \r\n  reverseLastPayment(payload) {\r\n    console.log(\"Reverse last payment: \" + payload);\r\n\t\treturn this.serviceClient.executeCommand(\"CCPay.ReverseLastPayment\", payload);\r\n  }\r\n  \r\n  closeDay(payload) {\r\n    console.log(\"Close day: \" + payload);\r\n\t\treturn this.serviceClient.executeCommand(\"CCPay.CloseDay\", payload);\r\n  }\r\n  \r\n  triggerUserInteractionUpdateEvent(event) {\r\n\t\tconsole.log(\"UserInteractionUpdateEvent\");\r\n\t\tconsole.log(event);\r\n\t\tif (this.onUserInteractionUpdate)\r\n\t\t  this.onUserInteractionUpdate(event);\r\n\t}\r\n\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LWNjLXBheS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QztBQUM3QztBQUNPLHVCQUF1QixzREFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2RldmljZS1tYW5hZ2VyLy4uL3NjcmlwdC9zZXJ2aWNlcy9yb3RvLXNydi1jYy1wYXkuanM/NzkzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3RvU2VydmljZSB9IGZyb20gJy4vcm90by1zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcnZDQ1BheSBleHRlbmRzIFJvdG9TZXJ2aWNlIHtcclxuXHRjb25zdHJ1Y3RvcihzZXJ2aWNlVVJJKSB7XHJcblx0XHRzdXBlcihTcnZDQ1BheS5zZXJ2aWNlTmFtZSwgXCJDcmVkaXQgY2FyZCBwYXltZW50XCIsIHNlcnZpY2VVUkkpO1xyXG5cdFx0XHJcbiAgICB0aGlzLnNlcnZpY2VDbGllbnQucmVnaXN0ZXJFdmVudEhhbmRsZXIoXCJDQ1BheS5Vc2VySW50ZXJhY3Rpb25VcGRhdGVFdmVudFwiLCBlID0+IHRoaXMudHJpZ2dlclVzZXJJbnRlcmFjdGlvblVwZGF0ZUV2ZW50KGUpKTtcclxuXHR9XHJcblx0XHJcbiAgc3RhdGljIGdldCBzZXJ2aWNlTmFtZSgpIHtcclxuICAgIHJldHVybiBcImNjcGF5XCI7XHJcbiAgfVxyXG5cclxuICBnZXRTZXZpY2VDb21tYW5kUm9vdCgpIHsgXHJcbiAgICByZXR1cm4gXCJDQ1BheVwiXHJcbiAgfVxyXG4gIFxyXG4gIHJlcXVlc3RQYXltZW50KHBheWxvYWQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiUmVxdWVzdCBwYXltZW50OiBcIiArIHBheWxvYWQpO1xyXG5cdFx0cmV0dXJuIHRoaXMuc2VydmljZUNsaWVudC5leGVjdXRlQ29tbWFuZChcIkNDUGF5LlJlcXVlc3RQYXltZW50XCIsIHBheWxvYWQpO1xyXG4gIH1cclxuICBcclxuICByZXZlcnNlTGFzdFBheW1lbnQocGF5bG9hZCkge1xyXG4gICAgY29uc29sZS5sb2coXCJSZXZlcnNlIGxhc3QgcGF5bWVudDogXCIgKyBwYXlsb2FkKTtcclxuXHRcdHJldHVybiB0aGlzLnNlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJDQ1BheS5SZXZlcnNlTGFzdFBheW1lbnRcIiwgcGF5bG9hZCk7XHJcbiAgfVxyXG4gIFxyXG4gIGNsb3NlRGF5KHBheWxvYWQpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiQ2xvc2UgZGF5OiBcIiArIHBheWxvYWQpO1xyXG5cdFx0cmV0dXJuIHRoaXMuc2VydmljZUNsaWVudC5leGVjdXRlQ29tbWFuZChcIkNDUGF5LkNsb3NlRGF5XCIsIHBheWxvYWQpO1xyXG4gIH1cclxuICBcclxuICB0cmlnZ2VyVXNlckludGVyYWN0aW9uVXBkYXRlRXZlbnQoZXZlbnQpIHtcclxuXHRcdGNvbnNvbGUubG9nKFwiVXNlckludGVyYWN0aW9uVXBkYXRlRXZlbnRcIik7XHJcblx0XHRjb25zb2xlLmxvZyhldmVudCk7XHJcblx0XHRpZiAodGhpcy5vblVzZXJJbnRlcmFjdGlvblVwZGF0ZSlcclxuXHRcdCAgdGhpcy5vblVzZXJJbnRlcmFjdGlvblVwZGF0ZShldmVudCk7XHJcblx0fVxyXG5cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../script/services/roto-srv-cc-pay.js\n");

/***/ }),

/***/ "../script/services/roto-srv-lights.js":
/*!*********************************************!*\
  !*** ../script/services/roto-srv-lights.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FLASH_RATE\": () => (/* binding */ FLASH_RATE),\n/* harmony export */   \"LIGHT_COLOR\": () => (/* binding */ LIGHT_COLOR),\n/* harmony export */   \"LIGHT_NAME\": () => (/* binding */ LIGHT_NAME),\n/* harmony export */   \"SrvLights\": () => (/* binding */ SrvLights)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n\r\n\r\nconst LIGHT_NAME = Object.freeze({ \r\n    TICKET_PRINTER: \"ticketprinter\",\r\n    RECEIPT_PRINTER: \"receiptprinter\",\r\n    CREDIT_CARD: \"creditcard\",\r\n    NFC_CREDIT_CARD: \"nfccreditcard\",\r\n    PIN: \"pin\",\r\n    CARD_DISPENSER: \"carddispenser\",\r\n    NFC_READER: \"nfcreader\",\r\n    BARCODE_READER: \"barcodereader\",\r\n    CASH_RECYCLER: \"cashrecycler\"\r\n})\r\n\r\nconst FLASH_RATE = Object.freeze({ \r\n    OFF: \"off\",\r\n    SLOW: \"slow\",\r\n    QUICK: \"quick\",\r\n    CONTINUOUS: \"continuous\"\r\n})\r\n\r\nconst LIGHT_COLOR = Object.freeze({ \r\n    RED: \"red\",\r\n    GREEN: \"green\",\r\n    YELLOW: \"yellow\",\r\n    BLUE: \"blue\",\r\n    CYAN: \"cyan\",\r\n    MAGENTA: \"magenta\",\r\n    WHITE: \"white\"\r\n})\r\n  \r\nclass SrvLights extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvLights.serviceName, \"Lights\", serviceURI);\r\n\t}\r\n\r\n  static get serviceName() {\r\n    return \"lights\";\r\n  }\r\n\r\n\tgetSeviceCommandRoot() { \r\n\t\treturn \"Lights\"\r\n\t}\r\n\t\r\n\t_onSocketOpen(event) {\r\n    super._onSocketOpen(event);\r\n    this.allLightsOff();\r\n  }\r\n\t\r\n\tallLightsOff() {\r\n    let message = {\r\n      timeout: 1000\r\n    };\r\n\r\n    Object.values(LIGHT_NAME).forEach(lightName => \r\n        message[lightName] = { flashRate: FLASH_RATE.OFF });\r\n   \r\n    return this.setLight(message);       \r\n  }\r\n\r\n  lightOn(lightName, flashRate, color) {\r\n    let message = {\r\n      timeout: 1000\r\n    };\r\n\r\n    let light = {\r\n      flashRate: flashRate,\r\n      color: color      \r\n    } \r\n    \r\n    message[lightName] = light;\r\n    \r\n    return this.setLight(message);    \r\n  }\r\n\r\n  lightOff(lightName) {\r\n    let message = {\r\n      timeout: 1000\r\n    };\r\n\r\n    let light = {\r\n      flashRate: FLASH_RATE.OFF\r\n    } \r\n    \r\n    message[lightName] = light;\r\n    \r\n    return this.setLight(message);    \r\n  }\r\n\r\n\tsetLight(payload) {\r\n    /*\r\n    * flashRate: off, slow, quick, continuous\r\n    * color: red, green, yellow, blue, cyan, magenta, white\r\n    * lightname: ticketprinter, receiptprinter, creditcard, nfccreditcard, pin, carddispenser, nfcreader, barcodereader, cashrecycler\r\n    */\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {        \r\n      this.serviceClient.executeCommand(\"Lights.SetLight\", payload)\r\n        .then(resolve)\r\n        .catch(reject);\r\n    });\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LWxpZ2h0cy5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE2QztBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDTyx3QkFBd0Isc0RBQVc7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQiwyQkFBMkI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LWxpZ2h0cy5qcz85OGUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdG9TZXJ2aWNlIH0gZnJvbSAnLi9yb3RvLXNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNvbnN0IExJR0hUX05BTUUgPSBPYmplY3QuZnJlZXplKHsgXHJcbiAgICBUSUNLRVRfUFJJTlRFUjogXCJ0aWNrZXRwcmludGVyXCIsXHJcbiAgICBSRUNFSVBUX1BSSU5URVI6IFwicmVjZWlwdHByaW50ZXJcIixcclxuICAgIENSRURJVF9DQVJEOiBcImNyZWRpdGNhcmRcIixcclxuICAgIE5GQ19DUkVESVRfQ0FSRDogXCJuZmNjcmVkaXRjYXJkXCIsXHJcbiAgICBQSU46IFwicGluXCIsXHJcbiAgICBDQVJEX0RJU1BFTlNFUjogXCJjYXJkZGlzcGVuc2VyXCIsXHJcbiAgICBORkNfUkVBREVSOiBcIm5mY3JlYWRlclwiLFxyXG4gICAgQkFSQ09ERV9SRUFERVI6IFwiYmFyY29kZXJlYWRlclwiLFxyXG4gICAgQ0FTSF9SRUNZQ0xFUjogXCJjYXNocmVjeWNsZXJcIlxyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IEZMQVNIX1JBVEUgPSBPYmplY3QuZnJlZXplKHsgXHJcbiAgICBPRkY6IFwib2ZmXCIsXHJcbiAgICBTTE9XOiBcInNsb3dcIixcclxuICAgIFFVSUNLOiBcInF1aWNrXCIsXHJcbiAgICBDT05USU5VT1VTOiBcImNvbnRpbnVvdXNcIlxyXG59KVxyXG5cclxuZXhwb3J0IGNvbnN0IExJR0hUX0NPTE9SID0gT2JqZWN0LmZyZWV6ZSh7IFxyXG4gICAgUkVEOiBcInJlZFwiLFxyXG4gICAgR1JFRU46IFwiZ3JlZW5cIixcclxuICAgIFlFTExPVzogXCJ5ZWxsb3dcIixcclxuICAgIEJMVUU6IFwiYmx1ZVwiLFxyXG4gICAgQ1lBTjogXCJjeWFuXCIsXHJcbiAgICBNQUdFTlRBOiBcIm1hZ2VudGFcIixcclxuICAgIFdISVRFOiBcIndoaXRlXCJcclxufSlcclxuICBcclxuZXhwb3J0IGNsYXNzIFNydkxpZ2h0cyBleHRlbmRzIFJvdG9TZXJ2aWNlIHtcclxuXHRjb25zdHJ1Y3RvcihzZXJ2aWNlVVJJKSB7XHJcblx0XHRzdXBlcihTcnZMaWdodHMuc2VydmljZU5hbWUsIFwiTGlnaHRzXCIsIHNlcnZpY2VVUkkpO1xyXG5cdH1cclxuXHJcbiAgc3RhdGljIGdldCBzZXJ2aWNlTmFtZSgpIHtcclxuICAgIHJldHVybiBcImxpZ2h0c1wiO1xyXG4gIH1cclxuXHJcblx0Z2V0U2V2aWNlQ29tbWFuZFJvb3QoKSB7IFxyXG5cdFx0cmV0dXJuIFwiTGlnaHRzXCJcclxuXHR9XHJcblx0XHJcblx0X29uU29ja2V0T3BlbihldmVudCkge1xyXG4gICAgc3VwZXIuX29uU29ja2V0T3BlbihldmVudCk7XHJcbiAgICB0aGlzLmFsbExpZ2h0c09mZigpO1xyXG4gIH1cclxuXHRcclxuXHRhbGxMaWdodHNPZmYoKSB7XHJcbiAgICBsZXQgbWVzc2FnZSA9IHtcclxuICAgICAgdGltZW91dDogMTAwMFxyXG4gICAgfTtcclxuXHJcbiAgICBPYmplY3QudmFsdWVzKExJR0hUX05BTUUpLmZvckVhY2gobGlnaHROYW1lID0+IFxyXG4gICAgICAgIG1lc3NhZ2VbbGlnaHROYW1lXSA9IHsgZmxhc2hSYXRlOiBGTEFTSF9SQVRFLk9GRiB9KTtcclxuICAgXHJcbiAgICByZXR1cm4gdGhpcy5zZXRMaWdodChtZXNzYWdlKTsgICAgICAgXHJcbiAgfVxyXG5cclxuICBsaWdodE9uKGxpZ2h0TmFtZSwgZmxhc2hSYXRlLCBjb2xvcikge1xyXG4gICAgbGV0IG1lc3NhZ2UgPSB7XHJcbiAgICAgIHRpbWVvdXQ6IDEwMDBcclxuICAgIH07XHJcblxyXG4gICAgbGV0IGxpZ2h0ID0ge1xyXG4gICAgICBmbGFzaFJhdGU6IGZsYXNoUmF0ZSxcclxuICAgICAgY29sb3I6IGNvbG9yICAgICAgXHJcbiAgICB9IFxyXG4gICAgXHJcbiAgICBtZXNzYWdlW2xpZ2h0TmFtZV0gPSBsaWdodDtcclxuICAgIFxyXG4gICAgcmV0dXJuIHRoaXMuc2V0TGlnaHQobWVzc2FnZSk7ICAgIFxyXG4gIH1cclxuXHJcbiAgbGlnaHRPZmYobGlnaHROYW1lKSB7XHJcbiAgICBsZXQgbWVzc2FnZSA9IHtcclxuICAgICAgdGltZW91dDogMTAwMFxyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgbGlnaHQgPSB7XHJcbiAgICAgIGZsYXNoUmF0ZTogRkxBU0hfUkFURS5PRkZcclxuICAgIH0gXHJcbiAgICBcclxuICAgIG1lc3NhZ2VbbGlnaHROYW1lXSA9IGxpZ2h0O1xyXG4gICAgXHJcbiAgICByZXR1cm4gdGhpcy5zZXRMaWdodChtZXNzYWdlKTsgICAgXHJcbiAgfVxyXG5cclxuXHRzZXRMaWdodChwYXlsb2FkKSB7XHJcbiAgICAvKlxyXG4gICAgKiBmbGFzaFJhdGU6IG9mZiwgc2xvdywgcXVpY2ssIGNvbnRpbnVvdXNcclxuICAgICogY29sb3I6IHJlZCwgZ3JlZW4sIHllbGxvdywgYmx1ZSwgY3lhbiwgbWFnZW50YSwgd2hpdGVcclxuICAgICogbGlnaHRuYW1lOiB0aWNrZXRwcmludGVyLCByZWNlaXB0cHJpbnRlciwgY3JlZGl0Y2FyZCwgbmZjY3JlZGl0Y2FyZCwgcGluLCBjYXJkZGlzcGVuc2VyLCBuZmNyZWFkZXIsIGJhcmNvZGVyZWFkZXIsIGNhc2hyZWN5Y2xlclxyXG4gICAgKi9cclxuXHRcdFxyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsgICAgICAgIFxyXG4gICAgICB0aGlzLnNlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJMaWdodHMuU2V0TGlnaHRcIiwgcGF5bG9hZClcclxuICAgICAgICAudGhlbihyZXNvbHZlKVxyXG4gICAgICAgIC5jYXRjaChyZWplY3QpO1xyXG4gICAgfSk7XHJcblx0fVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/services/roto-srv-lights.js\n");

/***/ }),

/***/ "../script/services/roto-srv-nfc-reader.js":
/*!*************************************************!*\
  !*** ../script/services/roto-srv-nfc-reader.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SrvNFCReader\": () => (/* binding */ SrvNFCReader)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n/* harmony import */ var _common_script_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/utils */ \"../../../../../PkgKioskJS/web-modules/common-script/utils.js\");\n\r\n\r\n\r\nclass SrvNFCReader extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tscannerStatus;\r\n\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvNFCReader.serviceName, \"NFC reader\", serviceURI);\r\n\t}\r\n\r\n  static get serviceName() {\r\n    return \"nfcreader\";\r\n  }\r\n  \r\n\tgetSeviceCommandRoot() { \r\n\t\treturn \"BarcodeReader\"\r\n\t}\r\n\r\n\tupdateServiceSpecificStatus(newStatus) {\r\n\t\tlet changed = false;\r\n\t\tif (newStatus.barcodeReader && (newStatus.barcodeReader.scanner !== this.scannerStatus)) {\r\n\t\t\tthis.scannerStatus = newStatus.barcodeReader.scanner;\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tappendServiceSpecificStatus(status) {\r\n\t\tstatus.barcodeReader = {\r\n\t\t\t\tscanner: this.scannerStatus\r\n\t\t\t};\r\n\t}\r\n\r\n  startRead() {\r\n    return this.read(0);\r\n  }\r\n  \r\n  stopRead() {\r\n    if (this.lastRequestId) {\r\n      let payload = {\r\n          timeout: 1000,\r\n          requestIds: [this.lastRequestId]\r\n        };\r\n        \r\n      this.serviceClient.executeCommand(\"Common.Cancel\", payload)\r\n          .then(console.log(\"NFC read cancelled\"))\r\n          .catch(e => console.log(e));\r\n    }\r\n  }\r\n\r\n  read(timeoutMS) {\r\n    return new Promise((resolve, reject) => {\r\n      let payload = {\r\n          timeout: timeoutMS\r\n        };\r\n        \r\n      let command = this.serviceClient.executeCommand(\"BarcodeReader.Read\", payload);\r\n      this.lastRequestId = command.requestId;\r\n       \r\n      command.then(result => {\r\n          this.lastRequestId = null;\r\n          if (result.completionCode === \"success\") {\r\n            let read = {\r\n              completionCode: result.completionCode,\r\n              errorDescription: result.errorDescription\r\n            };\r\n        \r\n            if ((result.readOutput) && (result.readOutput.length > 0)) {\r\n              read.symbology = result.readOutput[0].symbologyName;\r\n              let decodedData = _common_script_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.decodeBase64(result.readOutput[0].barcodeData)\r\n              let reversedData = this._reverseBytesRead(decodedData);\r\n              read.barcodeData = reversedData; //base64 encoded barcode data\r\n            }\r\n  \r\n            resolve(read);\r\n          }\r\n          else\r\n            reject(result.errorDescription);         \r\n        })\r\n        .catch(e => {\r\n          this.lastRequestId = null;\r\n          reject(e);\r\n        });\r\n    });\r\n  }\r\n  \r\n  _reverseBytesRead(str) {\r\n    return str.match(/..?/g).reverse().join(\"\");\r\n  }\r\n  \r\n\ttest() {\r\n\t\t//this.test_statusChanged();\r\n\t\tthis.test_read();\r\n\t}\r\n\r\n\ttest_statusChanged() {\r\n\t\tlet msg = {\r\n\t\t\t\theader: {\r\n\t\t\t\t\tname:\"Common.StatusChangedEvent\",\r\n\t\t\t\t\ttype: \"event\"\r\n\t\t\t\t},\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tdevice: \"deviceBusy\"\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\r\n\t\tthis.processMessage(msg)\r\n\t}\r\n\r\n\ttest_read() {\r\n\t\tlet msg = {\r\n\t\t\t\theader: {\r\n\t\t\t\t\tname:\"BarcodeReader.Read\",\r\n\t\t\t\t  requestId: 2,\r\n\t\t\t\t\ttype: \"completion\"\r\n\t\t\t\t},\r\n\t\t\t\tpayload: {\r\n\t\t\t\t\tcompletionCode: \"success\", \r\n\t\t\t\t\terrorDescription: \"\", \r\n\t\t\t\t\treadOutput: [\r\n            {\r\n  \t\t\t\t\t\tsymbology: \"\",\r\n  \t\t\t\t\t\tbarcodeData: \"MDRGQzEzREE3QjczODQ=\",\r\n  \t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\r\n\t\tthis.processMessage(msg)\r\n\t}\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LW5mYy1yZWFkZXIuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBQ0E7QUFDN0M7QUFDTywyQkFBMkIsc0RBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxvRUFBa0I7QUFDbEQ7QUFDQSwrQ0FBK0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi9zY3JpcHQvc2VydmljZXMvcm90by1zcnYtbmZjLXJlYWRlci5qcz9lODI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdG9TZXJ2aWNlIH0gZnJvbSAnLi9yb3RvLXNlcnZpY2UnO1xyXG5pbXBvcnQgeyBVdGlscyB9IGZyb20gJ0Bjb21tb24tc2NyaXB0L3V0aWxzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTcnZORkNSZWFkZXIgZXh0ZW5kcyBSb3RvU2VydmljZSB7XHJcblx0c2Nhbm5lclN0YXR1cztcclxuXHJcblx0Y29uc3RydWN0b3Ioc2VydmljZVVSSSkge1xyXG5cdFx0c3VwZXIoU3J2TkZDUmVhZGVyLnNlcnZpY2VOYW1lLCBcIk5GQyByZWFkZXJcIiwgc2VydmljZVVSSSk7XHJcblx0fVxyXG5cclxuICBzdGF0aWMgZ2V0IHNlcnZpY2VOYW1lKCkge1xyXG4gICAgcmV0dXJuIFwibmZjcmVhZGVyXCI7XHJcbiAgfVxyXG4gIFxyXG5cdGdldFNldmljZUNvbW1hbmRSb290KCkgeyBcclxuXHRcdHJldHVybiBcIkJhcmNvZGVSZWFkZXJcIlxyXG5cdH1cclxuXHJcblx0dXBkYXRlU2VydmljZVNwZWNpZmljU3RhdHVzKG5ld1N0YXR1cykge1xyXG5cdFx0bGV0IGNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdGlmIChuZXdTdGF0dXMuYmFyY29kZVJlYWRlciAmJiAobmV3U3RhdHVzLmJhcmNvZGVSZWFkZXIuc2Nhbm5lciAhPT0gdGhpcy5zY2FubmVyU3RhdHVzKSkge1xyXG5cdFx0XHR0aGlzLnNjYW5uZXJTdGF0dXMgPSBuZXdTdGF0dXMuYmFyY29kZVJlYWRlci5zY2FubmVyO1xyXG5cdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBjaGFuZ2VkO1xyXG5cdH1cclxuXHJcblx0YXBwZW5kU2VydmljZVNwZWNpZmljU3RhdHVzKHN0YXR1cykge1xyXG5cdFx0c3RhdHVzLmJhcmNvZGVSZWFkZXIgPSB7XHJcblx0XHRcdFx0c2Nhbm5lcjogdGhpcy5zY2FubmVyU3RhdHVzXHJcblx0XHRcdH07XHJcblx0fVxyXG5cclxuICBzdGFydFJlYWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yZWFkKDApO1xyXG4gIH1cclxuICBcclxuICBzdG9wUmVhZCgpIHtcclxuICAgIGlmICh0aGlzLmxhc3RSZXF1ZXN0SWQpIHtcclxuICAgICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICB0aW1lb3V0OiAxMDAwLFxyXG4gICAgICAgICAgcmVxdWVzdElkczogW3RoaXMubGFzdFJlcXVlc3RJZF1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICB0aGlzLnNlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJDb21tb24uQ2FuY2VsXCIsIHBheWxvYWQpXHJcbiAgICAgICAgICAudGhlbihjb25zb2xlLmxvZyhcIk5GQyByZWFkIGNhbmNlbGxlZFwiKSlcclxuICAgICAgICAgIC5jYXRjaChlID0+IGNvbnNvbGUubG9nKGUpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlYWQodGltZW91dE1TKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICBsZXQgcGF5bG9hZCA9IHtcclxuICAgICAgICAgIHRpbWVvdXQ6IHRpbWVvdXRNU1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgIGxldCBjb21tYW5kID0gdGhpcy5zZXJ2aWNlQ2xpZW50LmV4ZWN1dGVDb21tYW5kKFwiQmFyY29kZVJlYWRlci5SZWFkXCIsIHBheWxvYWQpO1xyXG4gICAgICB0aGlzLmxhc3RSZXF1ZXN0SWQgPSBjb21tYW5kLnJlcXVlc3RJZDtcclxuICAgICAgIFxyXG4gICAgICBjb21tYW5kLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgIHRoaXMubGFzdFJlcXVlc3RJZCA9IG51bGw7XHJcbiAgICAgICAgICBpZiAocmVzdWx0LmNvbXBsZXRpb25Db2RlID09PSBcInN1Y2Nlc3NcIikge1xyXG4gICAgICAgICAgICBsZXQgcmVhZCA9IHtcclxuICAgICAgICAgICAgICBjb21wbGV0aW9uQ29kZTogcmVzdWx0LmNvbXBsZXRpb25Db2RlLFxyXG4gICAgICAgICAgICAgIGVycm9yRGVzY3JpcHRpb246IHJlc3VsdC5lcnJvckRlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICgocmVzdWx0LnJlYWRPdXRwdXQpICYmIChyZXN1bHQucmVhZE91dHB1dC5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICAgIHJlYWQuc3ltYm9sb2d5ID0gcmVzdWx0LnJlYWRPdXRwdXRbMF0uc3ltYm9sb2d5TmFtZTtcclxuICAgICAgICAgICAgICBsZXQgZGVjb2RlZERhdGEgPSBVdGlscy5kZWNvZGVCYXNlNjQocmVzdWx0LnJlYWRPdXRwdXRbMF0uYmFyY29kZURhdGEpXHJcbiAgICAgICAgICAgICAgbGV0IHJldmVyc2VkRGF0YSA9IHRoaXMuX3JldmVyc2VCeXRlc1JlYWQoZGVjb2RlZERhdGEpO1xyXG4gICAgICAgICAgICAgIHJlYWQuYmFyY29kZURhdGEgPSByZXZlcnNlZERhdGE7IC8vYmFzZTY0IGVuY29kZWQgYmFyY29kZSBkYXRhXHJcbiAgICAgICAgICAgIH1cclxuICBcclxuICAgICAgICAgICAgcmVzb2x2ZShyZWFkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgcmVqZWN0KHJlc3VsdC5lcnJvckRlc2NyaXB0aW9uKTsgICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgIHRoaXMubGFzdFJlcXVlc3RJZCA9IG51bGw7XHJcbiAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgX3JldmVyc2VCeXRlc1JlYWQoc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyLm1hdGNoKC8uLj8vZykucmV2ZXJzZSgpLmpvaW4oXCJcIik7XHJcbiAgfVxyXG4gIFxyXG5cdHRlc3QoKSB7XHJcblx0XHQvL3RoaXMudGVzdF9zdGF0dXNDaGFuZ2VkKCk7XHJcblx0XHR0aGlzLnRlc3RfcmVhZCgpO1xyXG5cdH1cclxuXHJcblx0dGVzdF9zdGF0dXNDaGFuZ2VkKCkge1xyXG5cdFx0bGV0IG1zZyA9IHtcclxuXHRcdFx0XHRoZWFkZXI6IHtcclxuXHRcdFx0XHRcdG5hbWU6XCJDb21tb24uU3RhdHVzQ2hhbmdlZEV2ZW50XCIsXHJcblx0XHRcdFx0XHR0eXBlOiBcImV2ZW50XCJcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdHBheWxvYWQ6IHtcclxuXHRcdFx0XHRcdGRldmljZTogXCJkZXZpY2VCdXN5XCJcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHRcclxuXHRcdHRoaXMucHJvY2Vzc01lc3NhZ2UobXNnKVxyXG5cdH1cclxuXHJcblx0dGVzdF9yZWFkKCkge1xyXG5cdFx0bGV0IG1zZyA9IHtcclxuXHRcdFx0XHRoZWFkZXI6IHtcclxuXHRcdFx0XHRcdG5hbWU6XCJCYXJjb2RlUmVhZGVyLlJlYWRcIixcclxuXHRcdFx0XHQgIHJlcXVlc3RJZDogMixcclxuXHRcdFx0XHRcdHR5cGU6IFwiY29tcGxldGlvblwiXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRwYXlsb2FkOiB7XHJcblx0XHRcdFx0XHRjb21wbGV0aW9uQ29kZTogXCJzdWNjZXNzXCIsIFxyXG5cdFx0XHRcdFx0ZXJyb3JEZXNjcmlwdGlvbjogXCJcIiwgXHJcblx0XHRcdFx0XHRyZWFkT3V0cHV0OiBbXHJcbiAgICAgICAgICAgIHtcclxuICBcdFx0XHRcdFx0XHRzeW1ib2xvZ3k6IFwiXCIsXHJcbiAgXHRcdFx0XHRcdFx0YmFyY29kZURhdGE6IFwiTURSR1F6RXpSRUUzUWpjek9EUT1cIixcclxuICBcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdFxyXG5cdFx0dGhpcy5wcm9jZXNzTWVzc2FnZShtc2cpXHJcblx0fVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/services/roto-srv-nfc-reader.js\n");

/***/ }),

/***/ "../script/services/roto-srv-receipt-printer.js":
/*!******************************************************!*\
  !*** ../script/services/roto-srv-receipt-printer.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SrvReceiptPrinter\": () => (/* binding */ SrvReceiptPrinter)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n\r\n\r\nclass SrvReceiptPrinter extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tonMediaPresented;\r\n\tpaperStatus;\r\n\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvReceiptPrinter.serviceName, \"Receipt printer\", serviceURI);\r\n\t\t\r\n    this.serviceClient.registerEventHandler(\"Printer.PaperThresholdEvent\", e => this.triggerPaperThresholdEvent(e));\r\n    this.serviceClient.registerEventHandler(\"Printer.MediaPresentedEvent\", e => this.triggerMediaPresentedEvent(e));\r\n    this.serviceClient.registerEventHandler(\"Printer.DefinitionLoadedEvent\", e => this.triggerDefinitionLoadedEvent(e));\r\n\t}\r\n\r\n  static get serviceName() {\r\n    return \"receiptprinter\";\r\n  }\r\n\r\n\tgetSeviceCommandRoot() { \r\n\t\treturn \"Printer\"\r\n\t}\r\n\r\n\tupdateServiceSpecificStatus(newStatus) {\r\n\t\tlet changed = false;\r\n\t\tif (newStatus.printer && (newStatus.printer.paper.upper !== this.paperStatus)) {\r\n\t\t\tthis.paperStatus = newStatus.printer.paper.upper;\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tappendServiceSpecificStatus(status) {\r\n\t\tstatus.printer = {\r\n\t\t\t\tpaper: this.paperStatus\r\n\t\t\t};\r\n\t}\r\n\r\n\tloadDefinition(definition) {\r\n\t\tlet payload = { \r\n\t\t\t\ttimeout: 2000,\r\n\t\t\t\tdefinition: definition,\r\n\t\t\t\toverwrite: true\r\n  \t\t};\r\n  \t\t\t\r\n\t\treturn this.serviceClient.executeCommand(\"Printer.LoadDefinition\", payload);\r\n\t}\r\n\r\n\tprintForm(payload) {\t\r\n    console.log(\"Printing receipt\");\r\n\r\n\t\treturn new Promise((resolve, reject) => {       \r\n      this.serviceClient.executeCommand(\"Printer.PrintForm\", payload)\r\n        .then(resolve)\r\n        .catch(reject);\r\n    });\r\n\t}\r\n\r\n\ttriggerPrintFormEvent(payload) {\r\n\t\tlet event = {\r\n\t\t\trfidData: payload.data,\r\n\t\t\tcompletionCode: payload.completionCode,\r\n\t\t\terrorDescription: payload.errorCode\r\n\t\t};\r\n\r\n\t\tif (this.onReceiptPrint)\r\n\t\t\tthis.onReceiptPrint(event);\r\n\t}\r\n\r\n\ttriggerPaperThresholdEvent(event) {\r\n\t\tif (this.onPaperThreshold)\r\n\t\t  this.onPaperThreshold(event);\r\n\t}\r\n\r\n\ttriggerDefinitionLoadedEvent(payload) {\r\n\t\tconsole.log(\"definition loaded\")\r\n\t}\r\n\r\n\ttriggerMediaPresentedEvent(payload) {\r\n\t\tif (this.onMediaPresented)\r\n\t\t\tthis.onMediaPresented();\r\n\t}\r\n\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LXJlY2VpcHQtcHJpbnRlci5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE2QztBQUM3QztBQUNPLGdDQUFnQyxzREFBVztBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXZpY2UtbWFuYWdlci8uLi9zY3JpcHQvc2VydmljZXMvcm90by1zcnYtcmVjZWlwdC1wcmludGVyLmpzPzc2ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm90b1NlcnZpY2UgfSBmcm9tICcuL3JvdG8tc2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgU3J2UmVjZWlwdFByaW50ZXIgZXh0ZW5kcyBSb3RvU2VydmljZSB7XHJcblx0b25NZWRpYVByZXNlbnRlZDtcclxuXHRwYXBlclN0YXR1cztcclxuXHJcblx0Y29uc3RydWN0b3Ioc2VydmljZVVSSSkge1xyXG5cdFx0c3VwZXIoU3J2UmVjZWlwdFByaW50ZXIuc2VydmljZU5hbWUsIFwiUmVjZWlwdCBwcmludGVyXCIsIHNlcnZpY2VVUkkpO1xyXG5cdFx0XHJcbiAgICB0aGlzLnNlcnZpY2VDbGllbnQucmVnaXN0ZXJFdmVudEhhbmRsZXIoXCJQcmludGVyLlBhcGVyVGhyZXNob2xkRXZlbnRcIiwgZSA9PiB0aGlzLnRyaWdnZXJQYXBlclRocmVzaG9sZEV2ZW50KGUpKTtcclxuICAgIHRoaXMuc2VydmljZUNsaWVudC5yZWdpc3RlckV2ZW50SGFuZGxlcihcIlByaW50ZXIuTWVkaWFQcmVzZW50ZWRFdmVudFwiLCBlID0+IHRoaXMudHJpZ2dlck1lZGlhUHJlc2VudGVkRXZlbnQoZSkpO1xyXG4gICAgdGhpcy5zZXJ2aWNlQ2xpZW50LnJlZ2lzdGVyRXZlbnRIYW5kbGVyKFwiUHJpbnRlci5EZWZpbml0aW9uTG9hZGVkRXZlbnRcIiwgZSA9PiB0aGlzLnRyaWdnZXJEZWZpbml0aW9uTG9hZGVkRXZlbnQoZSkpO1xyXG5cdH1cclxuXHJcbiAgc3RhdGljIGdldCBzZXJ2aWNlTmFtZSgpIHtcclxuICAgIHJldHVybiBcInJlY2VpcHRwcmludGVyXCI7XHJcbiAgfVxyXG5cclxuXHRnZXRTZXZpY2VDb21tYW5kUm9vdCgpIHsgXHJcblx0XHRyZXR1cm4gXCJQcmludGVyXCJcclxuXHR9XHJcblxyXG5cdHVwZGF0ZVNlcnZpY2VTcGVjaWZpY1N0YXR1cyhuZXdTdGF0dXMpIHtcclxuXHRcdGxldCBjaGFuZ2VkID0gZmFsc2U7XHJcblx0XHRpZiAobmV3U3RhdHVzLnByaW50ZXIgJiYgKG5ld1N0YXR1cy5wcmludGVyLnBhcGVyLnVwcGVyICE9PSB0aGlzLnBhcGVyU3RhdHVzKSkge1xyXG5cdFx0XHR0aGlzLnBhcGVyU3RhdHVzID0gbmV3U3RhdHVzLnByaW50ZXIucGFwZXIudXBwZXI7XHJcblx0XHRcdGNoYW5nZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGNoYW5nZWQ7XHJcblx0fVxyXG5cclxuXHRhcHBlbmRTZXJ2aWNlU3BlY2lmaWNTdGF0dXMoc3RhdHVzKSB7XHJcblx0XHRzdGF0dXMucHJpbnRlciA9IHtcclxuXHRcdFx0XHRwYXBlcjogdGhpcy5wYXBlclN0YXR1c1xyXG5cdFx0XHR9O1xyXG5cdH1cclxuXHJcblx0bG9hZERlZmluaXRpb24oZGVmaW5pdGlvbikge1xyXG5cdFx0bGV0IHBheWxvYWQgPSB7IFxyXG5cdFx0XHRcdHRpbWVvdXQ6IDIwMDAsXHJcblx0XHRcdFx0ZGVmaW5pdGlvbjogZGVmaW5pdGlvbixcclxuXHRcdFx0XHRvdmVyd3JpdGU6IHRydWVcclxuICBcdFx0fTtcclxuICBcdFx0XHRcclxuXHRcdHJldHVybiB0aGlzLnNlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJQcmludGVyLkxvYWREZWZpbml0aW9uXCIsIHBheWxvYWQpO1xyXG5cdH1cclxuXHJcblx0cHJpbnRGb3JtKHBheWxvYWQpIHtcdFxyXG4gICAgY29uc29sZS5sb2coXCJQcmludGluZyByZWNlaXB0XCIpO1xyXG5cclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7ICAgICAgIFxyXG4gICAgICB0aGlzLnNlcnZpY2VDbGllbnQuZXhlY3V0ZUNvbW1hbmQoXCJQcmludGVyLlByaW50Rm9ybVwiLCBwYXlsb2FkKVxyXG4gICAgICAgIC50aGVuKHJlc29sdmUpXHJcbiAgICAgICAgLmNhdGNoKHJlamVjdCk7XHJcbiAgICB9KTtcclxuXHR9XHJcblxyXG5cdHRyaWdnZXJQcmludEZvcm1FdmVudChwYXlsb2FkKSB7XHJcblx0XHRsZXQgZXZlbnQgPSB7XHJcblx0XHRcdHJmaWREYXRhOiBwYXlsb2FkLmRhdGEsXHJcblx0XHRcdGNvbXBsZXRpb25Db2RlOiBwYXlsb2FkLmNvbXBsZXRpb25Db2RlLFxyXG5cdFx0XHRlcnJvckRlc2NyaXB0aW9uOiBwYXlsb2FkLmVycm9yQ29kZVxyXG5cdFx0fTtcclxuXHJcblx0XHRpZiAodGhpcy5vblJlY2VpcHRQcmludClcclxuXHRcdFx0dGhpcy5vblJlY2VpcHRQcmludChldmVudCk7XHJcblx0fVxyXG5cclxuXHR0cmlnZ2VyUGFwZXJUaHJlc2hvbGRFdmVudChldmVudCkge1xyXG5cdFx0aWYgKHRoaXMub25QYXBlclRocmVzaG9sZClcclxuXHRcdCAgdGhpcy5vblBhcGVyVGhyZXNob2xkKGV2ZW50KTtcclxuXHR9XHJcblxyXG5cdHRyaWdnZXJEZWZpbml0aW9uTG9hZGVkRXZlbnQocGF5bG9hZCkge1xyXG5cdFx0Y29uc29sZS5sb2coXCJkZWZpbml0aW9uIGxvYWRlZFwiKVxyXG5cdH1cclxuXHJcblx0dHJpZ2dlck1lZGlhUHJlc2VudGVkRXZlbnQocGF5bG9hZCkge1xyXG5cdFx0aWYgKHRoaXMub25NZWRpYVByZXNlbnRlZClcclxuXHRcdFx0dGhpcy5vbk1lZGlhUHJlc2VudGVkKCk7XHJcblx0fVxyXG5cclxufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../script/services/roto-srv-receipt-printer.js\n");

/***/ }),

/***/ "../script/services/roto-srv-ticket-printer.js":
/*!*****************************************************!*\
  !*** ../script/services/roto-srv-ticket-printer.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"SrvTicketPrinter\": () => (/* binding */ SrvTicketPrinter)\n/* harmony export */ });\n/* harmony import */ var _roto_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./roto-service */ \"../script/services/roto-service.js\");\n/* harmony import */ var _common_script_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-script/utils */ \"../../../../../PkgKioskJS/web-modules/common-script/utils.js\");\n\r\n\r\n\r\nclass SrvTicketPrinter extends _roto_service__WEBPACK_IMPORTED_MODULE_0__.RotoService {\r\n\tonTicketPrint;\r\n\tonPaperThreshold;\r\n\tpaperStatus;\r\n\r\n\tconstructor(serviceURI) {\r\n\t\tsuper(SrvTicketPrinter.serviceName, \"Ticket printer\", serviceURI);\r\n\t\t\r\n\t\tthis.serviceClient.registerEventHandler(\"Printer.PaperThresholdEvent\", e => this.triggerPaperThresholdEvent(e));\r\n    this.serviceClient.registerEventHandler(\"Printer.DefinitionLoadedEvent\", e => this.triggerLoadDefinitionEvent(e));\r\n }\r\n\t\r\n  static get serviceName() {\r\n    return \"ticketprinter\";\r\n  }\r\n\r\n\tgetSeviceCommandRoot() { \r\n\t\treturn \"Printer\"\r\n\t}\r\n\r\n\tupdateServiceSpecificStatus(newStatus) {\r\n\t\tlet changed = false;\r\n\t\tif (newStatus.printer && (newStatus.printer.paper.upper !== this.paperStatus)) {\r\n\t\t\tthis.paperStatus = newStatus.printer.paper.upper;\r\n\t\t\tchanged = true;\r\n\t\t}\r\n\t\treturn changed;\r\n\t}\r\n\r\n\tappendServiceSpecificStatus(status) {\r\n\t\tstatus.printer = {\r\n\t\t\t\tpaper: this.paperStatus\r\n\t\t\t};\r\n\t}\r\n\r\n\tprintRaw(data, readRFID) {\r\n\t\tconsole.log(\"Printing: \" + data);\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n      let payload = {\r\n          timeout: 5000,\r\n          inputData: readRFID ? \"yes\": \"no\",\r\n          data: _common_script_utils__WEBPACK_IMPORTED_MODULE_1__.Utils.encodeBase64(data)\r\n        };\r\n        \r\n      this.serviceClient.executeCommand(\"Printer.PrintRaw\", payload)\r\n        .then(resolve)\r\n        .catch(reject);\r\n    });\r\n\t}\r\n\r\n\ttest(str) {\r\n\t\tconsole.log(str);\r\n\t}\r\n\r\n\ttriggerPaperThresholdEvent(event) {\r\n\t\tif (this.onPaperThreshold)\r\n\t\t  this.onPaperThreshold(event);\r\n\t}\r\n\t\r\n  triggerLoadDefinitionEvent(payload) {\r\n    console.log(\"definition loaded\")\r\n  }\r\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LXRpY2tldC1wcmludGVyLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUNBO0FBQzdDO0FBQ08sK0JBQStCLHNEQUFXO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isb0VBQWtCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZGV2aWNlLW1hbmFnZXIvLi4vc2NyaXB0L3NlcnZpY2VzL3JvdG8tc3J2LXRpY2tldC1wcmludGVyLmpzPzg2OGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm90b1NlcnZpY2UgfSBmcm9tICcuL3JvdG8tc2VydmljZSc7XHJcbmltcG9ydCB7IFV0aWxzIH0gZnJvbSAnQGNvbW1vbi1zY3JpcHQvdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNydlRpY2tldFByaW50ZXIgZXh0ZW5kcyBSb3RvU2VydmljZSB7XHJcblx0b25UaWNrZXRQcmludDtcclxuXHRvblBhcGVyVGhyZXNob2xkO1xyXG5cdHBhcGVyU3RhdHVzO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihzZXJ2aWNlVVJJKSB7XHJcblx0XHRzdXBlcihTcnZUaWNrZXRQcmludGVyLnNlcnZpY2VOYW1lLCBcIlRpY2tldCBwcmludGVyXCIsIHNlcnZpY2VVUkkpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnNlcnZpY2VDbGllbnQucmVnaXN0ZXJFdmVudEhhbmRsZXIoXCJQcmludGVyLlBhcGVyVGhyZXNob2xkRXZlbnRcIiwgZSA9PiB0aGlzLnRyaWdnZXJQYXBlclRocmVzaG9sZEV2ZW50KGUpKTtcclxuICAgIHRoaXMuc2VydmljZUNsaWVudC5yZWdpc3RlckV2ZW50SGFuZGxlcihcIlByaW50ZXIuRGVmaW5pdGlvbkxvYWRlZEV2ZW50XCIsIGUgPT4gdGhpcy50cmlnZ2VyTG9hZERlZmluaXRpb25FdmVudChlKSk7XHJcbiB9XHJcblx0XHJcbiAgc3RhdGljIGdldCBzZXJ2aWNlTmFtZSgpIHtcclxuICAgIHJldHVybiBcInRpY2tldHByaW50ZXJcIjtcclxuICB9XHJcblxyXG5cdGdldFNldmljZUNvbW1hbmRSb290KCkgeyBcclxuXHRcdHJldHVybiBcIlByaW50ZXJcIlxyXG5cdH1cclxuXHJcblx0dXBkYXRlU2VydmljZVNwZWNpZmljU3RhdHVzKG5ld1N0YXR1cykge1xyXG5cdFx0bGV0IGNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdGlmIChuZXdTdGF0dXMucHJpbnRlciAmJiAobmV3U3RhdHVzLnByaW50ZXIucGFwZXIudXBwZXIgIT09IHRoaXMucGFwZXJTdGF0dXMpKSB7XHJcblx0XHRcdHRoaXMucGFwZXJTdGF0dXMgPSBuZXdTdGF0dXMucHJpbnRlci5wYXBlci51cHBlcjtcclxuXHRcdFx0Y2hhbmdlZCA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY2hhbmdlZDtcclxuXHR9XHJcblxyXG5cdGFwcGVuZFNlcnZpY2VTcGVjaWZpY1N0YXR1cyhzdGF0dXMpIHtcclxuXHRcdHN0YXR1cy5wcmludGVyID0ge1xyXG5cdFx0XHRcdHBhcGVyOiB0aGlzLnBhcGVyU3RhdHVzXHJcblx0XHRcdH07XHJcblx0fVxyXG5cclxuXHRwcmludFJhdyhkYXRhLCByZWFkUkZJRCkge1xyXG5cdFx0Y29uc29sZS5sb2coXCJQcmludGluZzogXCIgKyBkYXRhKTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbGV0IHBheWxvYWQgPSB7XHJcbiAgICAgICAgICB0aW1lb3V0OiA1MDAwLFxyXG4gICAgICAgICAgaW5wdXREYXRhOiByZWFkUkZJRCA/IFwieWVzXCI6IFwibm9cIixcclxuICAgICAgICAgIGRhdGE6IFV0aWxzLmVuY29kZUJhc2U2NChkYXRhKVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgIHRoaXMuc2VydmljZUNsaWVudC5leGVjdXRlQ29tbWFuZChcIlByaW50ZXIuUHJpbnRSYXdcIiwgcGF5bG9hZClcclxuICAgICAgICAudGhlbihyZXNvbHZlKVxyXG4gICAgICAgIC5jYXRjaChyZWplY3QpO1xyXG4gICAgfSk7XHJcblx0fVxyXG5cclxuXHR0ZXN0KHN0cikge1xyXG5cdFx0Y29uc29sZS5sb2coc3RyKTtcclxuXHR9XHJcblxyXG5cdHRyaWdnZXJQYXBlclRocmVzaG9sZEV2ZW50KGV2ZW50KSB7XHJcblx0XHRpZiAodGhpcy5vblBhcGVyVGhyZXNob2xkKVxyXG5cdFx0ICB0aGlzLm9uUGFwZXJUaHJlc2hvbGQoZXZlbnQpO1xyXG5cdH1cclxuXHRcclxuICB0cmlnZ2VyTG9hZERlZmluaXRpb25FdmVudChwYXlsb2FkKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImRlZmluaXRpb24gbG9hZGVkXCIpXHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../script/services/roto-srv-ticket-printer.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("../script/rototype-main.js");
/******/ 	self["device-manager"] = __webpack_exports__;
/******/ 	
/******/ })()
;