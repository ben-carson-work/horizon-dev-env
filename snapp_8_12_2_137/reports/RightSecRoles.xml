<?xml version="1.0" encoding="UTF-8" standalone="no"?><DOEnt_DocTemplate><Header><EntityType>37</EntityType><EntityId>99304BC1-BD4F-803D-005D-01650F325926</EntityId><LastUpdate>2024-12-09T12:31:00.000+0100</LastUpdate></Header><DocTemplate><IconName>rpt-pdf.png</IconName><EntityType>37</EntityType><DocTemplateId>99304BC1-BD4F-803D-005D-01650F325926</DocTemplateId><DocTemplateName>Access Right Security Roles</DocTemplateName><DocTemplateCode>S4Q8S7EMGETVGQJ</DocTemplateCode><CategoryId>022178C4-D09A-4E70-917E-7336ACF45BD4</CategoryId><DocEnabled>true</DocEnabled><ExecRequireLogin>true</ExecRequireLogin><DocTemplateType>5</DocTemplateType><DocEditorType>5</DocEditorType><DocData unescaped="true"><![CDATA[{
  "PageWidth": 21,
  "PageHeight": 29.7,
  "UnitOfMeasure": "cm",
  "Title": "Detailed Access Right",
  "DefaultFontSize": 10,
  "BandList": [
    {
      "BandType": "PageHeader",
      "Comp": {
        "Height": 15
      },
      "CompList": [
        {
          "Text": [
            "            *This report contains only modified rights",
            "            *User can still have more rights if individual edits are done on his/her user"
          ],
          "Width": 21,
          "Height": 1.5,
          "X": -0.15,
          "Y": 11.22,
          "FontSize": 15
        },
        {
          "Text": "[@ITL.Account.User {transform:uppercase}]:",
          "Width": 10,
          "Height": 1,
          "X": 0,
          "Y": 0.38,
          "FontSize": 11,
          "FontStyle": "Bold",
          "Alignment": "Right"
        },
        {
          "Text": "[@Filters.RoleName]",
          "Width": 10,
          "Height": 1,
          "X": 10.1,
          "Y": 0.38,
          "FontSize": 11
        }
      ]
    },
    {
      "BandType": "Detail",
      "Comp": {
        "Height": 0.8
      },
      "DataSourceName": "Default",
      "CompList": [
        {
          "Text": "[@Default.RightName]",
          "X": 1.5,
          "Y": 0.4,
          "Width": 4,
          "Height": 0.8
        },
        {
          "Text": "[@Default.RightValue]",
          "X": 7,
          "Y": 0.4,
          "Width": 13.8,
          "Height": 0.8
        }
      ],
      "BandList": [
        {
          "BandType": "GroupHeader",
          "Comp": {
            "Height": 0.3
          },
          "IndexVars": "[@Default.RoleId]",
          "GroupChangeOnly": true,
          "ForceNewPage": true,
          "CompList": [
            {
              "Text": "[@Default.RoleName {transform:Uppercase}]",
              "X": 0.5,
              "Y": 0,
              "Width": 4,
              "Height": 0.5
            }
          ]
        },
        {
          "BandType": "GroupHeader",
          "Comp": {
            "Height": 0.5
          },
          "IndexVars": "[@Default.RightGroup]",
          "GroupChangeOnly": true,
          "CompList": [
            {
              "Text": "[@Default.RightGroup]",
              "X": 1,
              "Y": 0.3,
              "Width": 4,
              "Height": 0.5,
              "BorderBottomWidth": 1,
              "BorderBottomColor": "#000000"
            }
          ]
        }
      ]
    }
  ]
}]]></DocData><SystemCode>RightSecRoles</SystemCode><DocContexts/><SaleForApproval>false</SaleForApproval><SaleOpen>false</SaleOpen><SalePaid>false</SalePaid><SaleCompleted>false</SaleCompleted><IndividualPAH>false</IndividualPAH><PayByLink>false</PayByLink><DataExportOutputFormat/><CsvFieldSeparator/><CsvQuoteCharacter/><CsvIncludeHeaderLine/><CsvIncludeBOM>true</CsvIncludeBOM><LogCount>6</LogCount><DataSourceSelection>false</DataSourceSelection><DataSourceId/><MaxDateRangeDays/><MediaEncoderPluginId/><AutoCompleteOnPayment>false</AutoCompleteOnPayment><AutoCompleteDocTemplateId/><ProductDocumentTagIDs/><AttachDocTemplateIDs/><MediaRfidOptionType/><ParamList><Param><DocParamId>A3866FFB-1FC6-794F-07E1-018FC33D6DE1</DocParamId><DocTemplateId>99304BC1-BD4F-803D-005D-01650F325926</DocTemplateId><DocParamType>1006</DocParamType><DocParamName>RoleId</DocParamName><DocParamCaption>@Common.SecurityRole</DocParamCaption><DocParamDefault/><Mandatory>false</Mandatory></Param></ParamList><DataSourceList><DataSource><Name>Default</Name><Code>G941AC3413F3A2Q</Code><SQL unescaped="true"><![CDATA[select
  (case
   when (rght.RightType IS NULL AND rght.RightValue IS NULL) then 1
   else 0
  end) as DummyField,
  rl.RoleName,
  rl.RoleId,
  (case
    when rght.RightType IN(13/*POS*/,14/*Bck Office*/,61/*Operation areas*/,171/*Group locations*/,215/*Master location*/,251/*Call center*/,252/*Call center station*/) 
    then ('Login')
 when rght.RightType IN(4/*Reservations*/,6/*Straight sales*/,7/*Payments*/,8/*Print*/,9/*Payments*/,15/*Approval*/,16/*Print*/,17/*Validate*/,18/*Print not paid*/,31/*Partial payments*/,112/*Run batch printing*/,150/*Maximum refund amount*/,161/*Sale quantity warn limit*/,162/*Maximum sale amount*/,168/*Require approval over*/,317/*Allow remove items*/,412/*Max overall discount*/,445/**/) 
   then ('Orders')
  when rght.RightType IN(3/*Toolbar edit*/,10/*Minimize application*/,11/*Product redemption*/,32/*Negative transaction*/,62/*Product cancellation*/,79/*Void partially voided orders*/,109/*Manually open cash drawer*/,114/*Search transactions*/,115/*Training mode*/,116/*Reprint last transaction receipt*/,119/*Recycle media*/,131/*Backoffice product redemption*/,143/*Installment plans*/,144/*Installment contracts*/,147/*Type*/,153/*Override upgrade restrictions*/,169/*Upgrade used product*/,193/*Reset POS system clock error*/,203/*Change product expiration date*/,204/*Presale selection*/,212/*Biometric*/,286/*Block media*/,300/*Product refund*/,301/*Used product refund*/,302/*Expired product refund*/,306/*Product upgrade/downgrade*/,308/*Reissue media*/,331/*Override original payments restriction on voids*/,333/*Block/Unblock product*/,334/*Box maintenance cash drawer behavior*/,335/*Allow to show expected amount on final close*/,336/*Allow POS browser*/,406/*Manual reward point*/,427/*Wallet deposit*/,431/*Manual input*/,432/*POS overall discount*/,434/*Topup media*/,435/*Portfolio merge*/,436/*Portfolio settlement*/,437/*Product renew*/,438/*Change performance*/,439/*Allow POS "Functions" button*/,2001/*Admin*/,2002/*Manage Orders*/,2003/*View finance*/,2004/*Reports*/,2005/*Manage Users*/,2006/*Edit Personal Data*/,2007/*P@H download*/) 
   then ('Functions')
    when rght.RightType IN(59/*Foreign currencies*/,60/*Payment methods*/,83/*Box maintenance*/,132/*Issue voucher*/,133/*Redeem voucher*/,134/*Print voucher*/,182/*Settings*/,192/*Audit*/,194/*Block/unblock voucher*/,195/*Voucher void*/,196/*Voucher reissue*/,197/*Change voucher expiration date*/,213/*Regenerate*/,214/*Manual entry*/,292/*Modify credit limit*/,318/*Coupons*/,403/*Reward points*/)
    then ('Finance')
 when rght.RightType IN(20/*Draft email edit*/,45/*Credit terms*/,46/*Credit settlement*/,47/*Commercial terms*/,85/*Organizations*/,86/*People*/,96/*Security profile*/,280/*Category selection*/,338/*Security settings*/) 
   then ('Accounts')
  when rght.RightType IN(33/*Product tags*/,34/*Event tags*/,44/*Category tags*/,97/*Product types*/,173/*Events*/,174/*Catalogs*/,175/*Promotion rules*/,288/*Products' entitlements bulk override*/) 
    then ('Product types')
 when rght.RightType IN(154/*Organizations*/,157/*Workstations*/,158/*Events*/,159/*Product types*/,160/*Statistical reports*/,309/*Messages*/) 
    then ('Categories')
  when rght.RightType IN(88/*Media*/,89/*Transaction receipts*/,91/*Order confirmations*/,92/*Statistical reports*/,94/*Widgets*/,104/*Auto generated docs*/,135/*Vouchers*/,140/*Installment notifications*/,152/*Installment contracts*/,199/*Box receipts*/,282/*Credit card receipts*/) 
   then ('Templates')
 when rght.RightType IN(1/*Super User*/,63/*Manual unlock (reservation, logins)*/,67/*VGS Support*/,81/*Sales dashboard*/,82/*Activity audit*/,84/*Access log*/,87/*Base tables settings*/,95/*Licensee*/,98/*Resource management*/,99/*IT Monitor*/,100/*Admission dashboard*/,166/*Override box starting fund*/,176/*Custom Forms / Surveys*/,177/*Sale Channels*/,178/*Taxes*/,179/*Calendars*/,180/*Currencies*/,181/*Tasks*/,183/*Payments*/,184/*Digital Signage*/,185/*IT Settings*/,186/*Security roles*/,187/*Locations*/,188/*Workstations / Operating Areas*/,189/*Access Points / Access Areas*/,190/*Messages*/,285/*Override email address on re-send*/,316/*Commission rules*/,402/*Cross Platforms*/) 
    then ('Advanced')
  end
  ) as RightGroup,
  rght.RightType,
  lkit.ItemName as 'RightName',
   (case
      when rght.RightType IN(61/*Operating area*/,171/*Group locations*/,215/*Master location*/) 
      then(
      select stuff((
       select ', ' + DisplayName
        from tbAccount acc
       cross apply (select cast(('<X>'+replace(rght.RightValue, ',', '</X><X>')+'</X>') as xml)) as X(X)
        where acc.AccountId IN(
          select C.value('.', 'varchar(36)') as value 
          from X.X.nodes('X') AS X(C)
          where C.value('.', 'varchar(36)')<>''
       )
      for xml path('')
      ), 1, 2, '') 
        )
      when rght.RightType IN(252/*Call center station*/) 
      then(
      select stuff((
            select ', ' + WorkstationName
            from tbWorkstation wks
      cross apply (select cast(('<X>'+replace(rght.RightValue, ',', '</X><X>')+'</X>') as xml)) as X(X)
        where wks.WorkstationId IN(
          select C.value('.', 'varchar(36)') as value 
          from X.X.nodes('X') AS X(C)
          where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )
   when rght.RightType IN(60/*Payment methods*/) 
     then(
      select stuff((
            select ', ' + PluginName
            from tbPlugin pl
        cross apply (select cast(('<X>'+replace(rght.RightValue, ',', '</X><X>')+'</X>') as xml)) as X(X)
          where pl.PluginId IN(
          select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''  
      )
            for xml path('')
           ), 1, 2, '')
        )
   when rght.RightType IN(33/*Product tags*/,34/*Event tags*/,44/*Category tags*/) 
     then(
      select stuff((
            select ', ' + TagName
            from tbTag tag
      cross apply (select cast(('<X>'+replace(rght.RightValue, ',', '</X><X>')+'</X>') as xml)) as X(X)
          where tag.TagId IN(
        select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )
   when rght.RightType IN(403/*Reward points*/) 
      then(
      select stuff((
            select ', ' + MembershipPointName
            from tbMembershipPoint mp
     cross apply (select cast(('<X>'+replace(rght.RightValue, ',', '</X><X>')+'</X>') as xml)) as X(X)
          where mp.MembershipPointId IN(
         select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )

   when rght.RightType IN(11/*Product redemption*/) 
      then(
      select stuff((
            select ', ' + ItemName
            from tbLookupItem lkit
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where lkit.TableCode=194 and lkit.ItemCode IN(
         select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )
   when rght.RightType IN(301/*Used product refund*/) 
      then(
      select stuff((
            select ', ' + ItemName
            from tbLookupItem lkit
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where lkit.TableCode=193 and lkit.ItemCode IN(
         select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )

      when rght.RightType IN(334/*Box maintenance cash drawer behavior*/) 
     then(
      select stuff((
            select ', ' + ItemName
            from tbLookupItem lkit
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where lkit.TableCode=286 and lkit.ItemCode IN(
         select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )
   when rght.RightType IN(147/*Audit location type*/) 
      then(
      select stuff((
            select ', ' + ItemName
            from tbLookupItem lkit
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where lkit.TableCode=220 and lkit.ItemCode IN(
         select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )
   when rght.RightType IN(445/*P&H download*/, 2007/*P&H download B2B Administrator*/) 
     then(
      select stuff((
            select ', ' + ItemName
            from tbLookupItem lkit
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where lkit.TableCode=300 and lkit.ItemCode IN(
         select C.value('.', 'varchar(36)') as value 
         from X.X.nodes('X') AS X(C)
         where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )

    when rght.RightType IN(144/*Installment contracts*/) 
      then(
      select stuff((
            select ', ' + ItemName
            from tbLookupItem lkit
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where lkit.TableCode=222 and lkit.ItemCode IN(
           select C.value('.', 'varchar(36)') as value 
           from X.X.nodes('X') AS X(C)
           where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )  
      when rght.RightType IN(4/*Reservations*/,85/*Organizations*/,86/*People*/,96/*Security profile*/,97/*Product types*/,173/*Events*/,318/*Coupons*/) 
     then (
     REPLACE(REPLACE(REPLACE(REPLACE(REPLACE(rght.RightValue,'1','Inactive'),'2','Read'),'3','Edit'),'4','Create'),'5','Delete') + '                     (Master locations / Group locations / All locations)'
        )
      when rght.RightType IN(83/*Box maintenance*/) 
     then (
     REPLACE(REPLACE(REPLACE(rght.RightValue,'1','Inactive'),'2','Read'),'5','Audit') + '                     (Master locations / Group locations / All locations)'
   )   
   
   when rght.RightType IN(543/*CostCenter*/)  
      then(
      select stuff((
            select ', ' + InterCompanyCostCenterCode
            from tbIntercompanyCostCenter ICC
     cross apply (select cast(('<X>'+replace(replace(rght.RightValue,'/',','), ',', '</X><X>')+'</X>') as xml)) as X(X)
         where ICC.InterCompanyCostCenterId IN(
           select C.value('.', 'varchar(36)') as value 
           from X.X.nodes('X') AS X(C)
           where C.value('.', 'varchar(36)')<>''
      )
            for xml path('')
           ), 1, 2, '')
        )  
    
   when rght.RightValue='true' 
     then ('[x]')
   when rght.RightValue='false' 
      then ('[  ]')

      else RightValue end) AS 'RightValue'
from
  tbRole rl left join 
  tbRight rght on rght.EntityId=rl.RoleId and rght.EntityType=13 left join 
  tbLookupItem lkit on lkit.ItemCode=rght.RightType and lkit.TableCode=34
where
  (:@RoleId is null or rl.RoleId=:@RoleId)]]></SQL></DataSource><DataSource><Name>Filters</Name><Code>YEM4GAR2S399EMF</Code><SQL unescaped="true"><![CDATA[select
  /* ROLE */
  (case
    when :@RoleId is not null
    then (
      select ('[' + R.RoleCode + '] ' + R.RoleName) as RoleDesc
      from
        tbRole R
      where R.RoleId=:@RoleId
    )
    else ''
  end) as RoleName]]></SQL></DataSource></DataSourceList><RightList><Right><IconName>station.png</IconName><UsrEntityType>3</UsrEntityType><UsrEntityId>20A03348-9A17-4EEF-A1EE-02E59B9E2911</UsrEntityId><UsrEntityCode>BKOFFICE</UsrEntityCode><UsrEntityName>Back Office</UsrEntityName><RightLevel>5</RightLevel></Right><Right><IconName>account_prs.png</IconName><UsrEntityType>15</UsrEntityType><UsrEntityId>A0000131-0000-0000-0000-000000000015</UsrEntityId><UsrEntityCode/><UsrEntityName>Every user</UsrEntityName><RightLevel>5</RightLevel></Right></RightList></DocTemplate></DOEnt_DocTemplate>